\documentclass{article}
\usepackage[utf8]{inputenc}

\usepackage{mathtools}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{bm}
\usepackage{listings}
\usepackage{float}
\usepackage{fancyvrb}
\usepackage{xcolor}
\usepackage{tikz-cd}

\hbadness = 10000
\vbadness = 10000

\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
  \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
  #1 % the function
  \vphantom{\big|} % pretend it's a little taller at normal size
  \right|_{#2} % this is the delimiter
  }}

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal
% Custom colors

\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
morekeywords={self},              % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false
}}

\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

\theoremstyle{definition}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\A}{\mathbb{A}}

\newcommand{\x}{\bm{x}}
\newcommand{\Kx}{\K[\bm{x}]}

\renewcommand{\AA}[1]{\A^{#1}}
\newcommand{\An}{\A^n}
\newcommand{\Am}{\A^m}

\newcommand{\PP}[1]{\P^{#1}}
\newcommand{\Pn}{\P^n}
\newcommand{\Pm}{\P^m}

\newcommand{\Hom}{\text{Hom}}
\newcommand{\Aut}{\text{Aut}}
\newcommand{\End}{\text{End}}
\newcommand{\Iso}{\text{Iso}}


\newcommand{\lm}{\text{lm}}
\newcommand{\nr}{\text{nilrad}}
\newcommand{\spec}{\text{spec}}
\newcommand{\codim}{\text{codim}}
\newcommand{\ann}{\text{ann}}
\newcommand{\im}{\text{im}}
\newcommand{\id}{\text{id}}

\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\CRing}{\catname{CRing}}
\newcommand{\Top}{\catname{Top}}
\newcommand{\op}{\catname{op}}

\setlength{\parindent}{0pt}




\begin{document}

\section*{Ch 1}

\subsection*{Ex 1.20}
$A(X)$ is a field if and only if $I(X)$ is maximal, which happens if and only
if $X$ is minimal, i.e a point.

\subsection*{Ex 1.21}
Let $J = \langle f_1 = x_1^{3} - x_2^{6}, f_2 = x_1x_2 - x_2^{3}\rangle$. Then
$f_2 = x_2(x_1 - x_2^{2})$ is zero either when $x_2 = 0$ or when $x_1 =
x_2^{2}$, meanwhile $f_1 = (x_1 - x_2^{2})(x_1^{2} + x_1x_2^{2} + x_2^{4})$ is
zero when $x_1 = x_2^{2}$, but not when $x_2 = 0, x_1 \not = 0$.
We see that $\sqrt{J} = I(V(J)) = \langle x_1 - x_2^{2} \rangle$.

\subsection*{Ex 1.22}
First, of the $i$-th coordinate axis can be written as the zero locust
of all but the $i$-the hyperplanes of codimension $1$. So, if $X_i$
is the $i$-th coordinate axis, we have
\begin{align*}
	X_i 
	&=
	\bigcap_{j \not = i} V(x_j)
	&=
	V\left(\sum_{j \not = i} (x_j)\right)
	&=
	V(x_1, x_2, \ldots, x_{i- 1}, x_{i + 1}, \ldots x_n).
\end{align*}
We are interested in the ideal of the union of all $X_i$ in the case of $n = 3$
\begin{align*}
	I(X)
	&=
	I\left(\bigcup X_i\right) \\
	&=
	\bigcap I(a_i) \\
	&=
	(x_1, x_2) \cap (x_2, x_3) \cap (x_1, x_3)\\
	&=
	(x_1x_2, x_2x_3, x_1x_3).
\end{align*} 

Another way to arrive at the same result, is to realise that the coordinate
ring on a given axis is equal to the set of univariate polynomials in the given
indeterminate, and the coordinate ring on all three axes is the vector space
generated by all univariate monomials. This is exactly what $\Kx / (x_1x_2,
x_2x_3, x_1x_3)$ is. \\

Now, since $x_1, x_2, x_3 \not \in I(X)$, but $x_1x_2, x_2x_3, x_1x_3 \in
I(X)$, we have that any generating set of $I(X)$ must have a linear span which
includes each of the three monomials $x_1x_2, x_2x_3, x_1x_3$. But these three
monomials are linearly independent, and thus we need atleast three generators.

\subsection*{Ex 1.23}
\subsubsection*{(a)}

Let $J$ be an ideal in $A(Y)$. Then if $f \in J$, we have that $f(x) = 0$
implies that all $g \in \pi^{-1}(f) = f + \ker(\pi)$ satisfy $g(x) = 0$, since
$x \in \ker(\pi)$. \\

For the other direction, if $f \in \pi^{-1}(J)$ and $f(x) = 0$, we have that 
$\pi(f)(x) = 0$. \\

So, the two sets on polynomials vanish on the same points, whence their
varieties are equal by definition. \\

\subsubsection*{(b)}

We have that $\pi^{-1}(I_Y(X))$ is the set of polynomials $f$, such that
$\pi(f)$ vanishes on $X$. But since all the polynomials in $\ker(\pi)$ vanish
on all of $Y$, and therefore $X$, we have that $\pi(f)$ vanishs on $X$ if and
only if $f$ does, which means that $\pi^{-1}(I_Y(X)) = I(X)$.

\subsubsection*{(c)}

We have 
\begin{align*}
	I_{Y}(V_{Y}(J))
	&=
	I_{Y}(V(\pi^{-1}(J))) \\
	&=
	\pi(I(V(\pi^{-1}(J)))) \\
	&\subseteq
	\pi(\sqrt{\pi^{-1}(J)}) \\
	&=
	\pi(\pi^{-1}(\sqrt{J})) \\
	&=
	\sqrt{J},
\end{align*}
where we used part (a), (b), the Nullstellensatz, and the fact that contraction
commutes with taking the radical. We show the remaining inclusions as well. \\

Let $X \subseteq Y$ be a variety and let $x \in X$. Then 
every polynomial function in $I_Y(Y)$ vanishes on $x$, and $x \in V_{Y}(I_{Y}(X))$. \\

Let $J \unlhd A(Y)$ and $f \in \sqrt{J}$. Then $f^m$ vanishes on $V_{Y}(J)$ for some $m$,
whence $f$ does as well. It follows that $f \in I_{Y}(V_{Y}(J))$. \\

Finally, let $x \in V_{Y}(I_Y(X))$. Every variety is the zero locust of some
ideal, so let $X = V_{Y}(J)$. Then $x \in V_Y(I_Y(V_Y(J))) = V_Y(\sqrt{J})
\subseteq V_{Y}(J) = X$.


\subsection*{Ex 2.17}

We have $X = V\left(f_1 = x_1 - x_2x_3, f_2 = x_1x_3 - x_2^{2}\right)$. In this ring we have
\begin{align*}
	x_1
	&\equiv
	x_2x_3, \\
	x_1x_3 
	&\equiv
	x_2^{2}, \\
\end{align*}
which in turn yields
\begin{align*}
	x_1
	&\equiv
	x_2x_3, \\
	x_2x_3^{2} 
	&\equiv
	x_2^{2}, \\
\end{align*}

So we see that $A(X)$ is isomorphic to the algebra $A' = \K[x_2,
x_3]/(x_2x_3^{2} - x_2^{2})$. Let $(x_2(x_3^{2} - x_2)) = J \unlhd \K[x_2, x_3]
= A(V(f_1))$. It's easy to see that $J$ isn't prime. It is radical though as it
is a principal ideal generated by a squarefree product of irreducibles. It
follows that $J = (x_2) \cap (x_3^{2} - x_2)$ since the intersection of two
radical ideals equals the radical of their product, and we see that the minimal
prime ideals belonging to $J$ are $(x_2)$ and $(x_3^{2} - x_2)$. Since prime
ideals in $A(V(f_1)) \cong \K[x_2, x_3]$ are in one to one correspondence with
prime ideals in $\K[x_1, x_2, x_3]$ which contain $(f_1)$, we have that the
minimal ideals belonging to $(f_1, f_2)$ are $(x_2, x_1 - x_2x_3) = (x_1, x_2)$
and $(x_3^{2} - x_2, x_1 - x_2x_3)$, so $X = V(x_1, x_2) \cup V(x_3^{2} - x_2,
x_1 - x_2x_3)$ is a decomposition of $X$ into irreducible componenets. \\

This can be verified with the following Sage code (from python3)

\begin{python}
import sage.all
from sage.rings.rational_field import QQ
from sage.rings.polynomial.polynomial_ring_constructor \
	import PolynomialRing

def ex2_17(): 
    R = PolynomialRing(QQ, ["x_1", "x_2", "x_3"])
    x1, x2, x3 = R.gens()

    f1 = x1 - x2 * x3
    f2 = x1 * x3 - x2 ** 2
    
    J = R * [f1, f2]

    for Q in J.primary_decomposition():
        print(Q.radical().gens())
\end{python}

\subsection*{Ex 2.18}

$I(X)$ is the set of all polynomials vanishing on $X$, I.e it is maximal among
sets of polynomials vanishing on $X$. Thus, $V(I(X))$ is minimal among the
varieties containing $X$, which is the same as saying that $V(I(X))$ is the
closure of $X$ in the Zariski topology.

\subsection*{Ex 2.19}

\subsubsection*{(a)}

Let $X$ be a non-empty topology such that it can't be written as a finite union
of non-empty connected closed sets. Then in particular, $X$ isn't connected, so
we can write $X = X_1 \cup X_1'$ where $X_1 \cap X_1' = \emptyset$ and $X_1,
X_1'$ are non-empty closed sets. But then atleast one of these sets must be
disconnected, say $X_1$, and we can write $X_1 = X_2 \cup X_2'$ like before.
Continuing this way yields an infinite chain 
\[
X_1 \supsetneq X_2 \supsetneq X_3 \supsetneq \ldots,
\] 
and $X$ can't be Noetherian.

\subsubsection*{(b)}

Let $X = \bigcup_{1 \leq i \leq r} X_i$. Then given any infinite strict
decreasing chain of closed subsetes $Y_i$ we get $r$ infinite (possibly
non-strict) decreasing chains from $Y_i \cap X_j$ for each $1 \leq j \leq r$.
Taking the pairwise union of all $r$ chains yields the original chain $Y_i$,
and it follows that atleast one of the chains must contain infinitely many
strict inclusions, and by removing duplicates from this chain, we get an
infinite strictly decreasing chain of closed subsets. In other words, if $X$ is
non-Noetherian, then one of the $X_i$ must be non-Noetherian.

\subsection*{Ex 2.20}

\subsubsection*{(a)}

$Y \cap A$ closed in the subspace topology by definition implies that there is
some closed set $Z$ in $X$ such that $Z \cap A = Y$. Then $Y \subseteq Z$.
Since $\overline{Y}$ is the intersection of all closeds set in $X$ which
contain $Y$, we have $\overline{Y} \subseteq Z$. It follows that $\overline{Y}
\cap A \subseteq Z \cap A = Y$, but we also have $Y \subset A, Y \subset
\overline{Y}$, so $\overline{Y} \cap A = Y$.

\subsubsection*{(b)}

If $\overline{A} = U_1 \cup U_2$ with $U_1, U_2$ closed in the $\overline{A}$
subspace topology, then there are closed subsets $X_i$ such that $U_i = X_i
\cap \overline{A}$ and $A = (X_1 \cap A) \cup (X_2 \cap A)$. Moreover, if $X_i
\cap A = A$, then we'd have $\overline{A} \subseteq X_i$, and $\overline{A} =
U_i$, so the union $A = (X_1 \cap A) \cup (X_2 \cap A)$ is a non-trivial
decomposition. \\

For the other direction, first note that $\overline{U_1} \cup \overline{U_2}
\supseteq \overline{U_1 \cup U_2}$ since $\overline{U_1} \cup \overline{U_2}$
is a closed set which covers both $U_1$ and $U_2$. \\

If $A = U_1 \cup U_2$ with $U_1, U_2$ closed in the $A$ subspace topology, then
there are closed subsets $X_i$ such that $U_i = X_i \cap A$. Then $X_i \cap
\overline{A}$ must cover $\overline{U_i}$, and 
\[
	\overline{A} 
	\subseteq 
	\overline{U_1} \cup \overline{U_2} 
	\subseteq 
	(X_1 \cap \overline{A}) \cup (X_2 \cap \overline{A}),
\] 
but it's clear that the inclusions must hold in the other direction as well
since everything on the RHS is intersected with the LHS, and we see that
$\overline{A}$ is reducible. Moreover, the two sets on the RHS are non-empty as
the $U_i = X_i \cap A \subseteq X_i \cap \overline{A}$ are.

\subsection*{Ex 2.21}

\subsubsection*{(a)}

Assume that the cover $U_i$ of $X$ consists only of open connected sets and
that they all pairwise intersect each other. Let $X_1, X_2$ be two closed
proper subets of $X$ such that $X_1 \cup X_2 = X$. Then $X_1, X_2$ are also
both open as they complement each other. Now consider some $U_1$. If $U_1$
intersects both $X_1$ and $X_2$, we have that $U_1 \cap X_i$ is closed, since
$U_1 \cap X_1 = (U_1^{c} \cup X_2)^{c}$, so $U_1 = (U_1 \cap X_1) \cup (U_1
\cap X_2)$ is a decomposition of $U_1$ into closed sets, whence $U_1 \cap
X_1$ must intersect $U_2 \cap X_2$ by hypothesis of the $U_i$ being connected.
It follows that $X_1 \cap X_2 \not = \emptyset$ in this case. \\

Now consider the case where $U_1$ only intersects one of the $X_i$, say $X_1$.
Let $U_2$ be a set which intersects $X_2$ (such exist since the $U_i$ cover
$X$). Then as $U_1$ and $U_2$ intersect each other, it follows that $U_2$ must
intersect both $X_1, X_2$, and we can conclude like before that $X_1$ must
intersect $X_2$ in this case as well. 

\subsubsection*{(b)}

Let $X, U_i$ be as above but with the further stipulation that each $U_i$ is
irreducible. Assume towards a contradiction that $X$ is reducible and let $X =
X'_1 \cup \ldots \cup X'_r$ where each $X_i$ is a closed proper subset of $X$
and no $X_i$ is contained in the union of all $X_j, j \not = i$. Let $X_1 =
X'_1, X_2 = X_2 \cup \ldots X'_r$. Then $X = X_1 \cup X_2$ is a decomposition
of $X$ into two closed proper subsets. \\

Like above, if a $U_i$ intersects both $X_1, X_2$ we get a decomposition of
$U_i = (U_i \cap X_1) \cup (U_i \cap X_2)$ into non-empty closed proper
subsets, which is imposible by our assumption that each $U_i$ is irreducible.
Thus all $U_i$ must be contained in either $X_1$ or $X_2$ but not both. This is
imposible since they all pairwise intersect each other (and cover both $X_1,
X_2$). 


\subsection*{Ex 2.22}

\subsubsection*{(a)}

If $f(X) = U_1 \cup U_2$ is a decomposition of $f(X)$ into non-intersecting
closed proper subsets, then $X = f^{-1}(U_1) \cup f^{-1}(U_2)$ is the same for
$X$. So $f(X)$ disconnected implies $X$ disconnected.

\subsubsection*{(b)}

Like above.

\subsection*{Ex 2.23}

\subsubsection*{(a)}

First note that $I(\overline{X}) = I(V(I(X)) = I(X)$, so
we'll prove that $I(Y_1 \setminus Y_2) = I(Y_1) : I(Y_2)$. \\

Let $f \in I(Y_1 \setminus Y_2)$. Then $f$ vanishes on $Y_1$, and we have that 
$f g \in I(Y_1)$ for all $g \in \Kx$, and in particular, for all $g \in I(Y_2)$,
so $f \in I(Y_1) : I(Y_2)$. \\

Now let $f \in I(Y_1) : I(Y_2)$. Then for all $g \in I(Y_2)$, we have that $fg
\in I(Y_1)$. Now, since $Y_2$ is a subvariety, it's the zero locust of
$I(Y_2)$, and for all points $a \in Y_1 \setminus Y_2$, there is some
polynomial $g_a$ such that $g_a(a) \not = 0$. But $fg_{a} \in I(Y_1)$, so it
must be that $f(a) = 0$, and we see that $f \in I(Y_1 \setminus Y_2)$.

\subsubsection*{(b)}
Using the Nullstellensatz, part (a), and the fact that the $J_i$ are radical,
we get
\begin{align*}
	\overline{V(J_1) \setminus V(J_2)}
	&= V(I(\overline{V(J_1) \setminus V(J_2)})) \\
	&= V(I(V(J_1)) : I(V(J_2))) \\
	&= V(\sqrt{J_1} : \sqrt{J_2}) \\
	&= V(J_1 : J_2).
\end{align*}


\subsection*{Ex 2.24} 

Let $X \subseteq \An, Y \subseteq \Am$ be irreducible affine varieties and
assume towards a contradiction that $X \times Y = U_1 \cup U_2$ is a
decomposition into closed proper subsets. Let $\pi_X, \pi_Y$ be the projections
onto $X, Y$ repectively. First note that
\begin{align*}
	U_1 \cup U_2
	&=
	X \times Y \\
	&=
	\pi_X(X) \times \pi_Y(Y) \\
	&=
	\pi_X(U_1 \cup U_2) \times \pi_Y(U_1 \cup U_2) \\
	&=
	(\pi_X(U_1) \cup \pi_X(U_2)) \times (\pi_Y(U_1) \cup \pi_Y(U_2)) \\
	&= 
	(\pi_X(U_1) \times \pi_Y(U_1))
	\cup 
	(\pi_X(U_1) \times \pi_Y(U_2)) \\
	&\,\, \cup 
	(\pi_X(U_2) \times \pi_Y(U_1))
	\cup 
	(\pi_X(U_2) \times \pi_Y(U_2)),
\end{align*}
from where it will follow that either $Y = \pi_Y(U_1) \cup \pi_Y(U_2)$, or $X =
\pi_X(U_1) \cup \pi_X(U_2)$ are non-trivial decompositions into subsets. We
will show that $\pi_X(U_i), \pi_Y(U_i)$ are closed, which will contradict $X,
Y$ being irreducible. \\

Let $f \in I(U_1) \subseteq \K[x_1, x_2, \ldots, x_n, y_1, y_2, \ldots, y_m]$
and fix the last $m$ indeterminates of $f$ to some point $y \in \pi_Y(U_1)$.
Call the new polynomial $g_{f, y}$. Then for any $x \in \pi_X(U_1)$ we have
$g_{f, y}(x) = f(x, y)$ and since $(x, y) \in U_1$ and $f \in I(U_1)$, we see
that $g_{f, y}$ vanishes on $\pi_X(U_1)$. We claim that
\[
	\pi_X(U_1) 
	= 
	\bigcap_{f \in I(U_1), y \in \pi_Y(U_1)}
	V
	\left( g_{f, y}\right).
\] 
We've already shown one inclusion, for the other direction, suppose that $x \in
X$ such that all $g_{f, y}$ vanish on $x$. Then $f(x, y) = 0$ for all $y \in Y,
f \in I(U_1)$, which in turn means that $x \times Y \subset V(I(U_1)) = U_1$ so
$x \in \pi_X(U_1)$. It follows that $\pi_X(U_1)$ is closed and we are done.

\subsection*{Ex 2.30} 
If $U_i$ is some strict descending chain of closed irreducible sets in $A$,
then by Ex 2.20 (a), we have that $\overline{U}_i$ is a strict descending chain
of closed sets in $X$, which are irreducible by Ex 2.20 (b).

\subsection*{Ex 2.33} 

First, let's identify said matrices with $\A^{6}$ according to
\[
\begin{pmatrix}
	a_1 & a_2 & a_3 \\
	a_4 & a_5 & a_6 \\
\end{pmatrix}.
\] 
The rank of a matrix is at most $1$ if and only all of its minors of 
order $\geq 2$ are zero. For our matrix above, this yields the following
set of equations
\begin{align*}
	a_1 a_5 &= a_2 a_4 \\
	a_1 a_6 &= a_3 a_4 \\
	a_2 a_6 &= a_3 a_5.
\end{align*}

If we let $X$ denote our set in $\A^{6}$ identified with the given set of
matrices, then it follows from the discussion above that 
\[
X = V(J = (x_1x_5 - x_2x_4, x_1x_6 - x_3x_4, x_2x_6 - x_3x_5)).
\] 
is a variety. To show that it's irreducible, note that we can surjectively
parameterize $X$ with $t_1, t_2, t_3, u$ according to 
\begin{align*}
	a_1 = t_1,
	a_2 &= t_2,
	a_3 = t_3, \\
	a_4 = ut_1 ,
	a_5 &= ut_2,
	a_6 = ut_3.
\end{align*}
Irreducibility follows from the following lemma. 
\begin{lemma}
	Let $X \subseteq \An$ be a variety that is parameterized by $a_i = f_i(y_1,
	y_2, \ldots, y_m)$. Then $I(X)$ is prime and $X$ is irreducible.
\end{lemma}
\begin{proof}
	$I(X)$ can be identified with the ideal of algebraic dependencies on the
	$f_i$. I.e the kernel of $\Kx \to \K[f_1, f_2, \ldots, f_n]$. This kernel
	is prime since the image of the map is a subring of $\K[y_1, y_2, \ldots,
	y_m]$ which is an integral domain.
\end{proof}


\subsection*{Ex 2.34} 

\subsubsection*{(a)} 

Let $n \in \N$ be such that $\dim X \geq n$. Then there exist some chain
\[
Y_0 \subsetneq Y_1 \subsetneq \ldots \subsetneq Y_n
\] 
of closed irreducible subsets. Since $Y_i$ is irreducible, any two non-empty
open sets in $Y_i$ must intersect. Let $V_i = Y_i \setminus Y_{i - 1}$. Then
each $V_i$ is open and non-empty in $Y_i$, since $Y_{i - 1}$ is closed in
$Y_i$. \\

Now, pick some $U$ which intersects $Y_0$. Since $U \cap Y_1$ is open and
non-empty in $Y_1$, it must intersect $V_1$, whence $U \cap Y_0 \subsetneq
U \cap Y_1$. Moving on, $U \cap Y_2$ is open in $Y_2$, hence it must
intersect $V_2$ and it follows that 
\[
	U \cap Y_0 \subsetneq U \cap Y_1 \subsetneq U \cap Y_2.
\] 
This procedure can be repeated to show that 
\[
	U \cap Y_0 \subsetneq U \cap Y_1 \subsetneq U \cap Y_2 \subsetneq
	\ldots \subsetneq U \cap Y_n \subset U
\] 
is an $n$-long chain of strict inclusions in $Y$. Moreover, each of the $U
\cap Y_i$ is irreducible in $U$ since a reduction of $Y_i \cap U = T_1 \cup
T_2$ yields a reduction
\[
	Y_i 
	= 
	(Y_i \setminus (U \setminus T_1))
	\cup
	(Y_i \setminus (U \setminus T_2)).
\]
Hence $\dim X \leq \sup_{i \in I}(\dim U_i)$. The reversed inequality
is immediate from Ex 2.30.

\subsubsection*{(b)} 

Let $X$ be an irreducible affine variety and 
\[
Y_0 \subsetneq Y_1 \subsetneq \ldots \subsetneq Y_n \subset X
\] 
a chain of irreducible subvarieties. Then if $U$ is non-empty and open in $X$,
we can translate the chain in affine space $T_{\bm{c}}(a_1, a_2, \ldots, a_n) =
(a_1 + c_1, \ldots, a_n + c_n)$ (this is a homeomorphism) such that
$T_{\bm{c}}(Y_0)$ intersects $U$. We can then repeat the argument of (a) to
show that 
\[
	T_{\bm{c}}(Y_0) \cap U \subsetneq T_{\bm{c}}(Y_1) \cap U \subsetneq \ldots
	\subsetneq T_{\bm{c}}(Y_n) \cap U \subset U
\] 
is a chain of irreducible closed subvarieties in $U$. \\

This is not the case in arbitrary topological spaces. Consider for example the
space $\N$ given the topology where the non-trivial closed subsets are of the
form $[1..n]$ and $[1..\infty]$. Then $\{0\}$ is open in $\N$ but has dimension
$0$. \\



\subsection*{Ex 2.35} 

First suppose that we have some chain
\[
	\{a\} \subset Y_0 \subsetneq Y_1 \subsetneq \ldots \subsetneq Y_n \subset X
\] 
of irreducible closed subsets $Y_i$. Then $Y_n = \bigcup_{i=1}^{r} \left(Y_n
\cap X_i\right)$, is a decomposition into closed sets, and since $Y_n$ is
irreducible, we need $Y_n \subseteq X_i$ for some $i$, whence $\max(\dim X_i :
a \in X_i) \geq \codim \{a\}$. \\

For the other direction, let $X_{i}$ be the irreducible variety containing $a$
with maximal dimension. Then by Prop 2.28 (b), we have $\codim_{X_i} \{a\} =
\dim X_i = \max(\dim X_j : a \in X_j)$.

\subsection*{Ex 2.36} 

\subsubsection*{(a)} 

$X$ being Noetherian is equivalent to 
Let $X$ be Noetherian and $U_i, i \in I$ be an open cover of $X$. Then $X$
admits a decomposition into irreducible subsets $X = X_1 \cup X_2 \cup \ldots
\cup X_r$. Let $U_i, i \in I_1$ be a subcover which covers $X_1$ where all
$U_i, i \in I_1$ intersect $X_1$, and no $U_i$ is contained in some other
$U_j$. Then the $U_i, i \in I_1$ must pairwise intersect each other. Use the
axiom of choice to pick a sequence of unique indices $i_1, i_2, \ldots$ in
$I_1$, and construct the chain
\[
	U_{i_1} \supseteq U_{i_1} \cap U_{i_2} (\supseteq U_{i_1} \cap U_{i_2})
	\cap U_{i_3} \supseteq \ldots,
\] 
Each intersection is non-empty, since it's an intersection non-empty as $X_1$
is irreducible. Moreover, since $X$ is Noetherian, this must either be a finite
chain so that $I_1$ is finite, or it must stabilize, so that 
\[
	U_{i_n} \subset \bigcap_{j = 1}^{n - 1} U_{i_j}
\] 
for some $n$. This contradicts how $I_1$ was constructed.

\subsubsection*{(b)} 

\textbf{Quick aside:} I revisited an old solution to this problem after finding
the reference to this problem in the start of Chapter 5. The old solution was
wrong, so I've re-solved this problem using tools from Chapters 1 through 4. I
also had trouble solving it the second time around as well, and after looking
at this link, https://math.stackexchange.com/a/119349/887520 , I decided to try
to do it using Noether Normalization. This was very difficult for me (took 2
days almost to show that the morphism $f$ below is surjective). So, this is all
just a heads up to say that this solution is a bit messy and uses a few
theorems and lemmas from all over the place. \\

Let $X$ be an irreducible subvariety in $\C[\x]$ of dimension $d \geq 1$. It
follows that the Krull dimension of $A(X)$ is $d$. The Noether normalization
lemma tells us that $A(X)$ is integral and finitely generated over some free
polynomial algebra $\C[y_1, y_2, \ldots, y_s]$. We will show that $d = s$.
First note that $d \geq s$, since we have a chain of length $s$ of prime ideals
$(0) \subsetneq (y_1) \subsetneq y_1, y_2) \subsetneq \ldots \subsetneq (y_1,
y_2, \ldots, y_s)$ which can be extended to a chain of the same length in
$A(X)$ by the Going Up Theorem. Now suppose that $\mathfrak{p}_0 \subsetneq
\mathfrak{p}_1 \subsetneq \ldots \subsetneq \mathfrak{p}_d$ is a chain of prime
ideals in $A(X)$ of length $d$. Then any ideal $\mathfrak{p}_i \cap \K[y_1,
y_2, \ldots, y_s]$ is prime, after which Corollary 5.9 in Atiyah-Macdonald
tells us that the chain contracts to a chain of strict inclusions of prime
ideals in $\C[y_1, y_2, \ldots, y_s]$. Exercise 11.7 in Atiyah-Macdonald tells
us that this ring has dimension $s$, so $s \geq d$, and we have $s = d$. \\

Now consider the inclusion $f^{*} : \C[y_1, y_2, \ldots, y_d] \to A(X)$ where
the $y_i$'s are algebraically independent polynomials in $A(X)$. We can
identify $\C[y_1, y_2, \ldots, y_d]$ with a free $\C$-algebra in $d$ variables,
and doing so induces a morphism of varieties. $f : X \to \A^{d}$. We claim that
$f$ is surjective. To show this, we will first construct $f$ explicitly. \\

By the proof of Corollary 4.8, we have that $f =
(\phi_1, \phi_2, \ldots, \phi_d)$ where $\phi_i = f^{*}(y_i)$, but $f^{*}$ is
just the inclusion, so $f = (y_1, y_2, \ldots, y_d)$. Now let $a \in \A^{d}$
and consider $J = (y_1 - a_1, y_2 - a_2, \ldots, y_d - a_d)$ as an ideal in
$A(X)$. We want to show that there is some $b \in V(J)$, since doing so
would imply that $y_i(b) - a_i = 0 \Leftrightarrow y_i(b) = a_i \Leftrightarrow
f(b) = a$. \\ 

First of, note that $A(X)$ is a finitely generated $\C[y_1, y_2, \ldots,
y_d]$-module by the Noether normalization lemma. We will consider $J' = (y_1 -
a_1, y_2 - a_2, \ldots, y_d - a_d)$ as an ideal in $\C[y_1, y_2, \ldots, y_d]$.
Note that $J \not = J'$, these two ideals have the same generators but
different parent rings! Now let's show that $V(J) \not = \emptyset$. \\

Suppose towards a contradiction that $V(J) = \emptyset$. Then $\sqrt{J} =
I(V(J)) = (1) \Rightarrow J = (1)$, so we can write 
\[
	1 = \sum_{i = 1}^{d} h_i(\x)y_i(\x)
\] 
for some set of polynomials $h_i \in A(X)$. It follows that $J'A(X) = A(X)$.
Now Nakayama's lemma grants us some $r \in \C[y_1, y_2, \ldots, y_d]$ such that
$rA(X) = 0$ and $r - 1 \in J'$. It follows that $r(a) = 1$ so $r \not = 0$. But
the $y_i$ are algebraically independent, so $y_i r = 0$ is a contradiction.
Hence $V(J) \not = \emptyset$ and we've shown that $f$ is surjective. \\

$f$ is a polynomial mapping, hence it's continuous in the classical topology.
So we have a surjective continuous map $f: X \to \A^{d} = \C^{d}$. We have that
$\C^{d}$ isn't compact (for $d \geq 1$), hence $X$ isn't either (since $X$
compact $\Rightarrow$ $f(X) = \C^{d}$ compact, a contradiction,
https://math.stackexchange.com/questions/26514/continuous-image-of-compact-sets-are-compact)


\subsection*{Ex 2.40} 

\subsubsection*{(a)} 

With $J = (x_1x_4 - x_2x_3)$, we recognize $V(J)$ as the set of $2$ by $2$
matrices with rank $\leq 1$. This variety is parameterizeable with 
\[
	a_1 = t_1, a_2 = t_2, a_3 = c t_1, a_4 = c t_2,
\] 
whence
\[
	R = \K[x_1, x_2, x_3, x_4]/J \cong \K[t_1, t_2, ct_1, ct_2] \subset \K[t_1, t_2, c]
\] 
so $R$ is an integral domain. Moreover, $R$ isn't a field, so $J$ is a prime
ideal which isn't maximal, whence it can at most have height $\dim(\K[x_1, x_2,
x_3, x_4]) - 1 = 3$, and $R$ can at most have dimension $3$. But in $\K[t_1,
t_2, ct_1, ct_2]$ we have the prime ideals 
\[
	(0) \subsetneq (t_1, t_2) \subsetneq (t_1, t_2, ct_1, ct_2)
\] 
So $R$ has dimension $3$. We quickly verify that all the ideals are prime.
$(0)$ is prime since we're in a domain. $(t_1, t_2, ct_1, ct_2)$ is prime since
we get a field when we quotient by it. $(t_1, t_2)$ is prime since any
polynomial in $\K[t_1, t_2, ct_1, ct_2]$ has terms where the sum of the degrees
of $t_1, t_2$ is greater than the degree of $c$, so $Q = \K[t_1, t_2, ct_1,
ct_2]/(t_1, t_2)$ consists of all polynomials in $\K[t_1, t_2, ct_1, ct_2]$
with terms where the degree of $c$ is equal to the sum of the degrees of $t_1,
t_2$. Hence $Q \cong \K[ct_1, ct_2]$ is an integral domain. Note that $(t_1)$
(or $(t_{2})$) isn't a prime ideal, since it contains $ct_1t_2$ but neither
$ct_1$ nor $t_2$ (or neither $ct_2$ nor $t_1$).

\subsubsection*{(b)} 

$x_1 | x_2x_3 = x_1x_4$, but $x_1 \not | x_2$, $x_1 \not | x_3$ (any element in
$J$ has $\deg \geq 2$, so $x_1$ won't divide any representatives of $x_2 + J$
or $x_3 + J$ since they all contain a term of $x_2$, or $x_3$ respectively).

\subsubsection*{(c)} 

Again, follows from $x_1 + J \not | x_2 + J$, and similar.

\subsubsection*{(d)} 

Under the isomorphic map $x_1 \mapsto t_1, x_2 \mapsto t_2, x_3 \to c t_1, x_4
\mapsto c t_2$, we see that $(x_1, x_2)$ is the contraction of the prime ideal
$(t_1, t_2)$, which has height $1$, so $(x_1, x_2)$ has height $1$ also. \\


\subsection*{Ex 3.12} 

\subsubsection*{(a)} 

Suppose that $A(X)$ is a UFD, $Y \subset X$ is an irreducible subvariety, and
that $\codim_X Y \geq 2$. We will begin by showing that there are two elements
$f_1, f_2 \in I(Y)$ which are prime in $A(X)$. \\

Since $Y$ is irreducible, $I(Y)$ is prime, and as $A(X)$ is a UFD, we must have
some element $f_1 \in I(Y)$ which is prime in $A(X)$. Moreover, $I(Y)$ has
height at least $2$, so it's strictly bigger than $(f_1)$ which has height $1$
by Prop 2.28 (c), hence $I(Y)$ must contain some element $m$ where $f_1 \not |
m$. But again, $I(Y)$ is prime, so it contains some prime factor $f_2$ of $m$.
\\

It follows that $(f_i) \subset I(Y) \Rightarrow V(f_i) \supset Y \Rightarrow
D(f_i) \subset U$. Hence we can write $\phi = h_1/f_1^{k_1}$ on $D(f_1)$, and
$\phi = h_2/f_2^{k_2}$ on $D(f_2)$ with $f_i \not | h_i$. On $D(f_1) \cap
D(f_2)$ we have 
\[
 h_1/f_1^{k_1}
 =
 h_2/f_2^{k_2}
 \Leftrightarrow
 h_1f_2^{k_2} = h_2 f_1^{k_1},
\] 
but $V(h_1f_2^{k_2} - h_2f_1^{k_1})$ is closed, so $h_1f_2^{k_2} = h_2
f_1^{k_1}$ must hold on $\overline{D(f_1) \cap D(f_2)}$. Our next claim is that
$\overline{D(f_1) \cap D(f_2)}$ is all of $A(X)$. To see this, note that that
$A(X)$ is a UFD, hence an integral domain, whence $X$ is irreducible and any
open subspace is dense. Thus $h_1f_2^{k_2} = h_2 f_1^{k_1}$ on all of $A(X)$,
and since $f_2^{k_1} | h_2f_1^{k_1}$, but $f_2$ divides neither $h_2$ nor
$f_1$, we have $k_1 = 0$, and $\phi = h_1 = h_2$ on $A(X)$. \\

For the other direction, we assume that $\codim_X(Y) = 1$, since if the
codimension is $0$ we'd have $Y = X$. Then Prop 2.38 $I(Y) = (f)$, with $f$ a
non-unit, so $Y = V(f) \Rightarrow U = D(f)$ and Corollary 3.10 tells us that
$\mathcal{O}_X(U) = \mathcal{O}_X(D(f)) \cong A_{f}(X)$ which isn't isomorphic
to $A(X)$ when $f$ isn't a unit.

\subsubsection*{(b)} 

Consider Exercise 2.40 and Example 3.3. We know that $(x_1, x_2)$ is a prime
ideal of height $1$ in $A(X)$, so $Y = V(x_1, x_2)$ has codimension $1$ in $X$,
but yet the example shows that $\mathcal{O}_X(X \setminus U)$ isn't $A(X)$.


\subsection*{Ex 3.20} 

We show that the corresponding localized coordinate rings are isomorphic, after
which Lemma 3.19 gives the desired isomorphisms. Let $\Kx_{I(a)} \to
A(X)_{I(a)}$ be given by 
\[
	\phi\left(
		g/f
	\right)
	=
	\frac{g + I(X)}{f + I(X)}.
\]
$\phi$ is well defined since $f \in \Kx \setminus I(a)$, and $a \in X
\Rightarrow I(a) \supset I(X)$, so $f + I(X)$ is non-zero. Suppose that
$\phi(g/f) = 0$. Then $(h + I(X))(g + I(X)) = hg + I(X) = 0$ for some $h + I(X)
\in A(X) \setminus I(a)$, which in turn implies that $hg \in I(X)$. Hence $hg/1
\in I(X)\Kx_{I(a)}$, but $h(a) \not = 0$, so $h$ is a unit in $\Kx_{I(a)}$, so
$hh^{-1}g/1 = g/1 \in I(X)\Kx_{I(a)}$, whence $\ker(\phi) \subseteq
I(X)\Kx_{I(a)}$. \\

Now suppose that $g \in I(X)$, then $\phi(g/1) = 0$, so all the generators of
$I(X)\Kx_{I(a)}$ lie in $\ker(\phi)$ and we have equality of the two ideals.
The desired result now follows from the first homomorphism theorem and Lemma
3.19.

\subsection*{Ex 3.21} 

\subsubsection*{(a)} 

Let $\epsilon \not = 0$ and define $f_{\epsilon} : \R \to \R$ as
follows,
\[
	f_{\epsilon}(x) = 
	\begin{cases}
		0 \text{ for } x \in (a - \epsilon, a + \epsilon), \\
		x - (a + \epsilon) \text{ for } x \in [a + \epsilon), \\
		x - (a - \epsilon) \text{ for } x \in (a - \epsilon].
	\end{cases}
\] 
Then $f_{\epsilon}$ is continuous, and agrees with the zero function on $(a -
\epsilon, a + \epsilon)$, so they reside in the same germ. Since we can pick
$\epsilon$ arbitrarily small, it follows that the functions in a given germ all
agree on $a$ only. Now let $I$ denote the ideal of all germs which are $0$ at
$a$. We claim that $\mathcal{F}_{a}/I$ is isomorphic to $\R$. To see this,
note that $f(a) = g(a)$ if and only if $f(a) - g(a) = 0$ and $f(a) - g(a) \in
I$. Hence every equivalence class of $\mathcal{F}_{a}/I$ may be identified
with the value which the stalks admit at $a$, and $\mathcal{F}_{a}/I \cong I$
is a field and $I$ is maximal. Moreover, it's the only maximal ideal since it
contains all non-units, indeed if $f(a) \not = 0$, then we can pick a small
enough neighbourhood of $a$ in which $f$ is invertible.

\subsubsection*{(b)} 
The open subsets of $\R$ are all infinite, so if two polynomials agree on an
open subset of $\R$ they must be equal. It follows that any stalk is isomorphic
to the polynomial ring which is not local.

\subsection*{Ex 3.22} 

\subsubsection*{(a)} 

Let $a \in U$. Then since $(U, \phi) \sim (U, \psi)$, we have by definition
some open $V_a \subset U$ containing $a$ such that $\restr{\phi}{V_a} =
\restr{\psi}{V_a}$. The $V_a : a \in U$ form an open cover of $U$, and $\phi =
\psi$ on $U$ by the gluing property.

\subsubsection*{(b)} 

The vanishing set of their difference is closed in $X$, and since their
difference vanishes on some open subset $V_a \subset X$, it vanishes on
$\overline{V_a} = X$.

\subsubsection*{(c)} 

Yes, consider for example the $f_{\epsilon}$ and the zero function from the
solution to Ex 3.21 (a) with $U = \R$.

\subsection*{Ex 3.23} 

Let $\phi : A(X)_{I(Y)} \to \mathcal{O}_{X, Y}$ be given by
\[
	\phi(g/f) = \overline{\left(D(f), g/f \right)}.
\] 
$\phi$ is well defined, for if $g/f = g'/f'$, then we have $h \in A(X)
\setminus I(Y)$ such that $h(gf' - g'f) = 0$. Hence $g/f$ and $g'/f'$ agree as
regular functions on the open set $U = D(f) \cap D(f') \cap D(h) = D(ff'h)$. We
have that $U$ is contained in both $D(f), D(f')$. Moreover, $U$ intersects $Y$
as $f, f', h \not \in I(Y)$ and $I(Y)$ is prime since $Y$ is irreducible so
$ff'h \not \in I(Y)$, so there must be some point $y \in Y$ where all $f, f',
h$ are non-zero and $y \in U \cap Y$. We can conclude that
$\overline{\left(D(f), g/f\right)} = \overline{\left(D(f'), g'/f'\right)}$. \\

Now suppose that $g/f \in \ker(\phi)$. Then we have that $0/1$ and $g/f$ agree
as functions on some neighbourhood $V$ which intersects $Y$. We can define
$g/f$ on all of $D(f)$. Vanishing sets of regular functions are closed, so
$g/f$ vanishes on the closure of $V$ in $D(f)$, but $Y$ is irreducible, so
$\overline{D(f)} = Y$ and $D(f)$ is irreducible as well, whence $g/f$ vanishes
on all of $D(f)$. It follows that $f(1 \cdot g - 0 \cdot f) = 0$ as polynomial
functions on $X$, hence $g/f = 0/1$ in $A(X)_{I(Y)}$. \\

Finally, to see that $\phi$ is surjective since, let $\overline{(U, \phi)} \in
\mathcal{O}_{X, Y}$, $y \in U$ and $V_y$ be an open subset of $U$ containing
$y$ such that $\phi$ is given by $g/f$ on $V_y$. Then $y \in D(f)$, so $D(f)
\cap Y \not = \emptyset$, and $\phi(g/f) = \overline{(D(f), g/f)}$ is a stalk
at $Y$ which is equal to $\overline{(U, \phi)}$ since they agree on $V_y$ (note
that $g/f$ is an element of the domain $A(X)_{I(Y)}$ since $f \not \in I(Y)$ as
$f(y) \not = 0$).

\subsection*{Ex 3.24} 
If $a \in V$, then $a \in U \cap V$, so any representative $(V, \phi)$ of a
germ in the original stalk can be restricted down to $U$. The other direction
is immediate since open subsets in $U$ are open in $X$ (by virtue of $U$ being
open). Passing up and down through the restriction doesn't change equivalence
class since any regular function defined on $V$ agrees with itself on $V \cap
U$. So the restriction of stalks is bijective. \\

Since the original restriction maps in the sheaves are homomorphisms, it follows
that if $(V, f), (V', f')$ are representatives of germs in $\mathcal{F}_a$,
that their product
\[
	(V \cap V', \restr{f}{V \cap V'}\restr{f'}{V \cap V'})
\]
restrict to the restrictions of their product,
\[
	(V \cap V' \cap U, \restr{\left(\restr{f}{V \cap V'}\restr{f'}{V \cap V'}\right)}{U})
	=
	(V \cap V' \cap U, \restr{f}{V \cap V' \cap U}\restr{f'}{V \cap V' \cap U}).
\]
The same is true for sums and any other algebraic operation, so we see that the
restriction of the stalk is an isomorphism.


\subsection*{Ex 4.12} 

A general affine conic be given by
\[
	f(x, y) 
	=
	a_5 x^{2}
	+
	a_4 xy
	+ 
	a_3 y^{2}
	+
	a_2 x
	+
	a_1 y
	+
	a_0,
\] 
where the $a_i$ are such that $(f)$ is prime. \\

We will show that $A = \K[x,y]/(f)$ is isomorphic exactly one of either $B_1 =
\K[x,y]/(g_1)$ or $B_2 = \K[x, y]/(g_2)$ where $g_1 = x^{2} - y$ and $g_2 = xy
- 1$. \\

First we show that $B_1 \not \cong B_2$. To see this, note that $B_1 \cong
\K[x]$ whilst $B_2 \cong \K[y, 1/y]$. We see that any element in $B_2$ is a sum
of units, whilst the only units in $B_1$ are scalars, so the two algebras can't
be isomorphic. \\

Now consider $f$ again. We will show that we can obtain either $g_1$ or $g_2$
from $f$ by a linear change of variables. \\ 

\textbf{case $a_5 = a_3 = 0$.} Since $f$ is quadric, we have $a_4 \not = 0$
in this case, so we can write
\[
	f(x, y) 
	=
	a_4 
	\left(
		xy
		+
		\frac{a_2}{a_4} x
		+
		\frac{a_1}{a_4} y
	\right)
	+
	a_0
	=
	a_4 
	\left(
		x
		+
		\frac{a_1}{a_4}
	\right)
	\left(
		y
		+
		\frac{a_2}{a_4}
	\right)
	-
	\frac{a_1a_2}{a_4}
	+
	a_0.
\] 
Since $f$ is irreducible, we can assume that $\frac{a_1a_2}{a_4} - a_0 \not =
0$, and after relabeling we have
\[
f = (ax + b)(y + c) - 1
\] 
where we were able to rescale $f$ so that $\frac{a_1a_2}{a_4} - a_0 = 1$ since
we only care about $V(f)$. We now have that $f(x, y) = g_2(ax + b, y + c)$, so
$\phi : \Kx \to \Kx$ where $\phi(x, y) = (ax + b, y + c)$ takes $I(g_2)$ to
$I(f)$, hence it induces a well defined homomorphism $\overline{\phi} :
A(V(g_2)) \to A(V(f))$, where $\overline{\phi}(h(x, y) + I(g_2)) = h(ax + b, y
+ c) + I(f)$, which is invertible with $\overline{\phi}^{-1}(h(x, y) + I(f)) =
h\left(\frac{x - b}{a}, y - c\right) + I(g_2)$. We've shown that $A(V(f)) \cong
A(V(g_2))$ whence $V(f) \cong V(g_2)$ by Corollary 4.8. \\

\textbf{case $a_5 \not = 0, a_4 \not = 0, a_3 = 0$}. By permuting variables,
this case covers when $a_3 \not = 0, a_4 \not = 0, a_5 = 0$ as well. We care
only about $V(f)$ so we can assume that $a_5 = 1$ and 
\begin{align*}
	f(x, y) 
	&= 
	x^{2} + a_4 xy + a_2 x + a_1 y + a_0. \\
	&= 
	\left(x + a_4y + a_2 - \frac{a_1}{a_4}\right)
	\left(x + \frac{a_1}{a_4}\right)
	+ a_0 - \frac{a_2a_1}{a_4} + \frac{a_1^{2}}{a_4^{2}},
\end{align*} 
and $a_0 - \frac{a_2a_1}{a_4} + \frac{a_1^{2}}{a_4^{2}} \not = 0$
since $f$ is reducible so after relabeling and division we get
\begin{align*}
	a f(x, y) 
	=
	\left(a x + b y + c\right)
	\left(x + d\right)
	- 1,
\end{align*} 
which just like in the previous case gives us an isomorphism between the $A(V(g_2))$ and $A(V(af)) = A(V(f))$
given by
\[
	\phi(h(x, y) + (g_2)) = h(ax + by + c, x + d) + (f)
\]
and 
\[
	\phi^{-1}(h(x, y) + (f)) = h\left(y - d, \frac{x}{b} + \frac{by}{a} - \frac{db}{a} - \frac{c}{b} \right) + (g_2).
\]


\textbf{case $a_5 \not = 0, a_4 = a_3 = 0$}. By permuting variables,
this case covers when $a_3 \not = 0, a_4 = a_5 = 0$ as well. We care
only about $V(f)$ so we can assume that $a_5 = 1$ and 
\begin{align*}
	f(x, y) 
	&= 
	x^{2} + a_2 x + a_1 y + a_0,
\end{align*} 
which gives us an isomorphism between the $A(V(g_1))$ and $A(V(f))$
given by
\[
	\phi(h(x, y) + (g_1)) = h(x, a_2 x + a_1 y + a_0) + (f)
\]
and 
\[
	\phi^{-1}(h(x, y) + (f)) = h\left(x, \frac{y}{a_1} - \frac{a_2}{a_1}x - \frac{a_0}{a_1}\right) + (g_1).
\]

\textbf{case $a_5 \not = 0, a_3 \not = 0$}. We care
only about $V(f)$ so we can assume that $a_5 = 1$ and 
\begin{align*}
	f(x, y) 
	&= 
	x^{2} + a_4 xy + a_3 y^{2} + a_2 x + a_1 y + a_0. \\
	&= 
	\left(
		x
		+
		Hy
		+
		P
	\right)
	\left(
		x
		+
		Ty
		+
		Q
	\right)
	+ 
	a_0 
	- 
	QP
\end{align*} 
where
\[
	H 
	= 
	\frac{a_4}{2} + \sqrt{\frac{a_4^{2}}{4} - a_3},\ 
	T 
	= 
	\frac{a_4}{2} - \sqrt{\frac{a_4^{2}}{4} - a_3},\ 
\] 
and
\[
	Q = \left(1 - \frac{H}{T}\right)^{-1}\left(a_2 - \frac{1}{T} a_1\right)
	P = \left(1 - \frac{T}{H}\right)^{-1}\left(a_2 - \frac{1}{H} a_1\right)
\] 
when $a_4^{2} \not = 4 a_3$. We get an isomorphism between $A(V(g_2))$ and $A(V(f))$ like in
previous cases but we skip the final calculations. This leaves one more case. \\

\textbf{case $a_5 \not = 0$, and $a_4^{2} = 4 a_3$.}
We can assume that $a_5 = 1$ and get
\begin{align*}
	f(x, y) 
	&= 
	a_4 x^{2} + a_4^{2} xy + a_3 y^{2} + a_2 x + a_1 y + a_0 \\
	&= 
	(x + \sqrt{a_3}y)^{2}
	+
	(a_4 - 2\sqrt{a_3}) y
	+
	a_2 x
	+ 
	a_1 y
	+ 
	a_0 \\
	&= 
	(x + \sqrt{a_3}y)^{2}
	+
	a_2 x
	+ 
	a_1 y
	+ 
	a_0,
\end{align*}
where we picked the square root of $a_3$ which yields cancelation as desired.
We see that $A(V(f))$ is isomorphic to $A(V(g_1))$ in this case, and also that
this case generalizes the $a_4 = a_3 = 0$ case.

\subsection*{Ex 4.13} 

Let $\catname{Aff}$ denote the category of affine varieties on, and
$\catname{Coord}$ denote the category of coordinate rings. 

\begin{lemma}
	Let $F : \catname{Aff} \to \catname{Coord}$ denote the map which assigns
	each affine variety it's coordinate ring. Then $F$ is an invertible
	contravariant functor, and $\catname{Aff}^{\op} \cong \catname{Coord}$ as
	categories.
\end{lemma}
\begin{proof}
	Remark 1.16 tells us that $F$ is bijective on the objects, and Corollary
	4.8 tells us that $f \mapsto f^{*}$ is bijective on the arrows. What
	remains to show is that $f \mapsto f^{*}$ preserves composition in a
	contravariant way. This is straightforward to verify. Let
	\[
		X \xrightarrow{f} Y \xrightarrow{g} Z
	\]
	be affine varieties and morphisms between them, and $h \in A(Z)$ be some
	regular function on $Z$. Then 
	\[
		(g \circ f)^{*}(h)
		=
		h \circ (g \circ f)
		=
		(h \circ g) \circ f
		=
		f^{*}(g^{*}(h))
		=
		(f^{*} \circ g^{*}) (h)
	\] 
\end{proof}

The previous lemma tells us that epimorphisms (right cancelative maps), are
mapped to monomorphisms (left cancelative) and vice versa. The problem though
is that epimorphisms/monomorphisms need not be surjective/injective
homomorphisms. The converse is true though, as we will soon see in the part
(a).

\subsubsection*{(a)}

Suppose that $f$ is surjective. Then $f$ is right cancelative in the category
of $\Set$, hence it's right cancelative and an epimorphism in the category of
$\catname{Aff}$. It follows that $f^{*}$ is a monomorphism in the category
$\catname{Coord}$. Now let $g \in \ker(f^{*})$, and consider the algebra
homomorphism $\phi : \K[x] \to A(Y)$ given by $\phi(x) = g$. Then $f^{*} \circ
\phi = f^{*} \circ 0$, which since $f^{*}$ is a monomorphism yields that $\phi$
is the zero map, so $g = 0$ in $A(Y)$ and $f^{*}$ is injective. \\

The converse is not true unfortunately, and this has to do with cases where the
image of $f$ is dense in $Y$, but not surjective. Consider for example $X = Y =
\A^{1}$, and $f : X \to Y$ given by $f(x) = x^{2}$. Then $f$ isn't surjective,
but $\im(f)$ is dense in $Y$, so any $g_1, g_2 \in A(Y)$ that agree on $\im(f)$
agree on all of $Y$. Hence $f^{*}(g_1) = f^{*}(g_2) \Rightarrow g_1 = g_2$ and
$f^{*}$ is injective.

\subsubsection*{(b)}

No, Example 4.9 exhibits a bijective morphism $f$ of varieties $f: \A^{1} \to
V(x_1^{2} - x_2^{3})$, but the corresponding algebra homomorphism $f^{*} :
A(V(x_1^{2} - x_2^{3})) \to \K[t]$ is not surjective.

\subsubsection*{(c)}

Yes, isomorphisms $\A^{1} \to \A^{1}$ correspond to polynomial maps which are
invertible by polynomial maps, and these are always linear (in the univariate
case).

\subsubsection*{(d)}

No! Consider for example $f(x, y) = (x, x^{2} + y)$. This map is regular and
bijective, and it's inverse is given by $f^{-1}(x, y) = (x, y - x^{2})$, which
is also regular and bijective.

\subsection*{Ex 4.19} 

\textbf{(a) $\cong$ (c)}. 
An isomorphism $f : \A^{1} \setminus \{1\} \to V(x_2 - x_1^{2}, x_3 - x_1^{3})
\setminus \{0\}$ is given by
\[
	f(x)
	=
	\left((x - 1), (x - 1)^{2}, (x - 1)^{3}\right),
\] 
where the inverse is
\[
	f^{-1}(x_1, x_2, x_3)
	=
	x_1 + 1.
\] 

\textbf{(d) $\not \cong$ (a)}. 
We have that $V(x_1x_2)$ is reducible so $A(V(x_1x_2))$ is not an integral
domain. Meanwhile, $\A^{1} \setminus \{1\} \cong D(x - 1)$ has coordinate ring
$\K[x]_{x - 1}$ which is an integral domain. \\

\textbf{(a) $\not \cong$ (e)}. 
We just saw that the coordinate ring of $\A^{1} \setminus \{1\}$
is local. This is not the case for $V(x_2^{2} - x_1^{3} - x_1^{2})$
since every point on the (infinite) variety induces a maximal ideal.

\textbf{(a) $\not \cong$ (f)}. 
We just saw that the coordinate ring of $\A^{1} \setminus \{1\}$ is local. This
is not the case for $V(x_2^{2} - x_1^{2} - 1)$ since every point on the
(infinite) variety induces a maximal ideal.

\textbf{(b) $\cong$ (d)}. 
We have $V(x_1^{2} + x_2^{2}) = V((x_1 - ix_2)(x_1 + ix_2))$, and if $a, b \in \A^{2}$
is such that $ab = 0$, then
\begin{align*}
	ab = 0
	\Leftrightarrow
	\left(\frac{a + b}{2} + i \frac{a - b}{2i}\right)
	\left(\frac{a + b}{2} - i \frac{a - b}{2i}\right) 
	= 0,
\end{align*}
so the isomorphism $f : \A^{2} \to \A^{2}$ $f(x_1, x_2) = \left(\frac{x_1 +
x_2}{2}, \frac{x_1 + x_2}{2i}\right)$ sends $V(x_1x_2)$ to $V((x_1 + ix_2)(x_1
- ix_2))$. \\

\textbf{(d) $\not \cong$ (e)}. 
We claim that $f = -x_2^{2} + x_1^{3} + x_1^{2}$ is irreducible. To see this,
note that any factors would need to be of the form
\begin{align*}
	(ax_1^{2} + bx_1 + cx_2 + d)
	(Bx_1 + Cx_2 + D)
	= \\
	aB x_1^{3} 
	+ 
	aC x_1^{2}x_2 
	+
	(aD + bB) x_1^{2}
	+
	(bC + Bc) x_1 x_2
	+
	cC x_2^{2}
	+
	(b + B) x_1
	+
	(c + C) x_2
	+ 
	dD
\end{align*} 
We get
\[
	aB = 1, cC = -1, aC = 0
\] 
which is impossible. It follows that $A(V(f))$ is an integral domain whilst
$A(V(xy))$ isn't so the two varieties are not isomorphic. \\

\textbf{(d) $\not \cong$ (f)}. 
We claim that $x_1^{2} - x_2^{2} - 1$ is irreducible. To see this,
note that any factors would need to be of the form
\[
	(ax_1 + bx_2 + c)
	(Ax_1 + Bx_2 + C)
	=
	aAx_1^{2} + bBx_2^{2} + cC
	+
	(aB + Ab)x_1x_2 + (aC + Ac)x_1 + (bC + bC) x_2.
\] 
so we need $a, b, c, A, B, C \in \C$ such that 
\begin{align*}
	aA &= 1 \\
	bB &= -1 \\
	cC &= -1 \\
	aB &= -Ab \\
	aC &= -Ac \\
	bC &= -Bc. \\
\end{align*}
If we fix $a = 1$ we get $A = 1$, then $B = -b$, $c = -C$, after which we get
$b = 1, B = -1$ or $b = -1, B = 1$. Assume the first case, then $bC = -Bc$
turns into $C = c$, contradicting our previous equation $c = -C$ since $c \not
= 0$ due to $cC = -1$. It follows that $A(V(x_1^{2} - x_2^{2} - 1))$ is an
integral domain which $A(V(x_1x_2))$ is not. \\


\textbf{(e) $\not \cong$ (f)}. 


Let $X = V(x_1^{2} - x_2^{2} - 1), Y = V(x_2^{2} - x_1^{3} - x_1^{2})$. When
graphing the projection of $Y$ onto $\R$, we see that the resulting curve
intersects itself at the origin. Meanwhile $X$ is isomorphic to the unit circle
by $(x_1, x_2) \mapsto (x_1, ix_2)$, which doesn't intersect itself. Thus we
guess that investigating the behaviour of $A(X)$ near the origin might lead to
a proof that the two varieties aren't isomorphic. We give it a try by looking
at the completion of $A(X)$ by the ideal $I((0, 0)) = (x, y)$. Proposition
10.13 in Atiyah MacDonald tells us that 
\[
	\widehat{A(Y)} 
	\cong 
	\K[[x_1, x_2]] \otimes_{\K[x_1,x_2]} A(Y)
	\cong 
	\K[[x_1,x_2]/I(Y).
\] 
We now claim that $f_Y$ factors in $\K[[x_1, x_2]]$, whence $\widehat{A(Y)}$
isn't a domain. We will use Hensel's Lemma to show this, more specifically, the
variant given in Theorem 7.3 in Eisenbud. We use the lemma to find a square root
of $x_1 + 1$ by searching for a solution of $g(z) = X^{2} - (x_1 + 1) = 0$
in $\widehat{A(Y)}[z]$. We have that $g'(X)^{2} = 4X^{2}$, and 
\[
	g(1) = 1 - x_1 - 1 = x_1 \equiv 0 \text{ mod } g'(1)(x_1, x_2) = (x_1, x_2),
\] 
whence applying the lemma gives us a root $b$ of $g$ in $\widehat{A(Y)}$, so
that $x_1 + 1 = b^{2}$ and $f_Y = x_2^{2} - x_1^{2}(x_1 + 1) = (x_2 - x_1b)
(x_2 + x_1b)$. \\

Since $X$ is isomorphic to the unit circle, we will just say that $X$ is the
unit circle from now on. We will now show that every completion of $A(X)$ is a
domain, after which the non-isomorphism will follow. Consider the completion of
$A(X)$ at the point $p$ on $X$ (I.e the maximal ideal $I(p)$). This is
isomorphic to the completion of $A(I(f_X(x_1 + p_1, x_2 + p_2)))$ at the
origin, where $f_X = x_1^{2} + x_2^{2} - 1$ (since we're just "moving" the
circle such that $p$ winds up at the origin). Denote the new polynomial by
$f_{X, p}$. Then
\begin{align*}
	f_{X, p} 
	&= 
	(x_1 + p_1)^{2} + (x_2 + p_2)^{2} - 1 \\
	&= 
	x_1^{2} + 2x_1p_2 + p_1^{2} + x_2^{2} + 2x_2p_2 + p_2^{2} - 1 \\
	&=
	x_1^{2} + 2x_1p_2 + x_2^{2} + 2x_2p_2
\end{align*} 
since $p$ is on the circle and $p_1^{2} + p_2^{2} = 1$. Furthermore,
\begin{align*}
	f_{X, p}
	&=
	x_1^{2} + 2x_1p_2 + x_2^{2} + 2x_2p_2
	&=
\end{align*}


We are done if we can show that $f_{X, p}$ is
irreducible in $\K[[x_1, x_2]]$ for all $p$. TODO Todo todo finnish

\textbf{Conclusion}:
We have the following equivalence classes
\begin{align*}
	(a) &\cong (c), \\
	(b) &\cong (d), \\
	&(e), \\
	&(f), \\
\end{align*}

\subsection*{Ex 5.7} 

\subsubsection*{(a)} 

I was stuck here for a long time, so we'll solve this exercise in a perhaps
overly detailed manner. \\

Let $X_1 = X_2 = \AA{1}$, and $U_i \subset X_i$ be
$D(x)$, I.e $\AA{1} \setminus 0$. Let $\PP{1}$ be $X_1$ glued with $X_2$ via
the isomorphism $\phi : U_1 \to U_2$, where $\phi : x \mapsto 1/x$. Let $i_1,
i_2$ be the injection maps from $X_1, X_2$ to $\PP{1}$. \\

Let $Y$ be an prevariety and $f : Y \to \PP{1}$ be a map. Let $Y_1 =
f^{-1}(i_1(X_1)), Y_2 = f^{-1}(i_2(X_2))$. We claim that $f$ is a morphism
precisely when both
\begin{align*}
	f_1 &: Y_1 \to \AA{1}, f_1 : y \mapsto i_1^{-1}(f(y)), \\ 
	f_2 &: Y_2 \to \AA{1}, f_2 : y \mapsto i_2^{-1}(f(y)).
\end{align*}
First of, we have that $f$ is a morphism if and only if both
\begin{align*}
	\hat{f}_1 &: Y_1 \to \PP{1}, \hat{f}_1 : y \mapsto f(y), \\ 
	\hat{f}_2 &: Y_2 \to \PP{1}, \hat{f}_2 : y \mapsto f(y), 
\end{align*}
are morphism by Remark 4.5 (b) and Lemma 4.6. Also, the injections $i_1, i_2$
are both isomorphisms onto their images (they are both their own inverse),
hence each $\hat{f}_k$ is a morphism exactly when $f_k = i_k^{-1} \circ
\hat{f}_k$ is a morphism. \\

Now, set $Y = \AA{1} \setminus 0 = D(x)$. Then $Y_1, Y_2$ are both open in
$\AA{1}$, and all such sets are distinguished. Thus we can suppose $Y_1 =
D(h)$ and we can write
\[
	f_1 = \frac{g}{h^{k}}.
\]
After canceling common factors and extracting all powers of $x$
we are left with an expression of the form
\[
	f = x^{m} \frac{G}{H}
\] 
where $m \in \Z$ and $(G, H) = 1, x \not | G$, $x \not | H$. But $i_1^{-1}$ is
the identity, so $f = f_1$ on $D(h_1)$ and $H f - x^{m} G = 0$ here. But
$D(h_1)$ is dense in $Y$, so $H f - x^{m} G = 0$ on all of $D(x)$ and 
\[
	f = x^{m} \frac{G}{H}
\] 
Dividing by $H$ might seem suspicious here, but this results in a well-defined
function since $(G, H) = 1$. Indeed, we can send any root $r$ of $H$ to $r
\mapsto i_2(0) = "\infty"$, after which chasing the definitions yields that $Y_1
= D(xH), Y_2 = D(xG)$ and $f_1 = f, f_2 = 1/f$ which are both well-defined
morphisms on their corresponding domains. \\ 

If $m = 0$, then $f(0) \in \AA{1} \setminus 0 = i_1(X_1)
\cap i_2(X_2)$ and we can trivially extend the domain of $f$ to all of
$\AA{1}$. If $m > 0$, then $f(0) = 0$ and we can extend $f_1$ by sending $f_1 :
0 \mapsto 0$, whilst we can leave $f_2$ untouched as $0 \not \in i_2(X_2)$ and
$0 \not \in Y_2$. If $m < 0$ we have $f(0) \not \in i_1(X_1)$, so we only need
to worry about $f_2$. Since $i_2^{-1} : x \mapsto 1/x$, we have that $f_2 =
x^{-m} \frac{H}{G}$ and we can simply extend $f_2$ by sending $f_2 : 0 \mapsto
0$ again.

\subsubsection*{(b)} 

In part (a) we had that every regular function from $D(x) \to \PP{1}$
could be written as $x^{m} \frac{G}{H}$ coprime, and as $G, H$ are 
univariate polynomials, they'll never be simultaneously zero. This is not
the case for coprime polynomial in two variables. \\

Consider the regular function $f : \AA{2} \setminus 0 = D(x) \cup D(y) \to
\PP{1}$ given by
\[
	f(x, y) = \frac{y}{x}
\] 
Then $f$ is regular because (using the notation of part (a) with $Y = D(x) \cup
D(y)$), $Y_1 = D(x)$, $Y_2 = D(y)$ and $f_1 = \frac{y}{x}, f_2 =
\frac{x}{y}$ are both quotient of polynomials with non-vanishing denominators
on their domains. \\

Now suppose towards a contradiction that $\hat{f}$ is an extension of $f$ to
the affine plane and let $\hat{f}_k = i_{k}^{-1} \circ
\restr{\hat{f}}{\hat{f}^{-1}(i_k(X_k))}$ as before. Then $(0, 0)$ must lie in
one or both of $\hat{f}^{-1}(i_1(X_1))$ or $\hat{f}^{-1}(i_2(X_2))$, and we
assume the index $1$ case. Now let $U_0$ be some open neighbourhood of $(0, 0)$
such that $\hat{f}_1$ is a rational function on $U_0$. We have $\hat{f}_1 = y/x$ on
$D(x) \cup D(y)$, hence on $U_0 \setminus (0, 0)$, and there is no rational
function on any open set $U$ containing $0$ which is $y/x$ on $U \setminus (0,
0)$, so we arrive in a contradiction.

\subsubsection*{(c)} 

Let $f : \PP{1} \to \AA{1}$ and $f_1 = f \circ i_1, f_2 = f \circ i_2$. Then
$f_1, f_2$ are both morphisms $\AA{1} \to \AA{1}$ by the glueing construction
of $\PP{1}$. On $\AA{1} \setminus \{0\}$ we have that $f_1(x) = f_2(1/x)$,
again by the construction of $\PP{1}$. Since $f_1, f_2$ are both in $A(\AA{1})
= \K[x]$, this is possible only if $f_1 = f_2 \in \K$.


\subsection*{Ex 5.8} 

We will solve these exercises using homogeneous coordinates. That is, we will
write points $i_1(x) = [x:1]$ and $i_2(x) = [1:x]$ with the equivalence
$[x_1:x_2] = \lambda [x_1:x_2]$ for all $\lambda \in \K \setminus 0$. Then
$i_1$ is injective since $i_1(x_1) = i_1(x_2)$ implies $[x_1 : 1] = [x_2 : 1]$
which is the case only when $x_1 = x_2$. Moreover if $x \not = 0$,
\[
	i_1(x) = [x:1] = 1/x [x:1] = [1:1/x] = i_2(1/x)
\] 
and we see that the equivalence classes $[x_1:x_2]$ correspond exactly to the
points on $\PP{1}$.



\subsubsection*{(a)} 

We begin by retracing some of the steps of Exercise 5.7 (a)
with this new notation to show the following lemma.

\begin{lemma}
	Let $f : \AA{1} \to \PP{1}$ be a morphism. Then $f$ must be of the form $f(x) =
	[p(x):q(x)]$, where $p, q \in \Kx$ are polynomials with no root in common. 
\end{lemma}
\begin{proof}
	Let $Y_1 = f^{-1}(i_1(\AA{1})), Y_2 = f^{-1}(i_2(\AA{1}))$ and $f_1 =
	i_1^{-1} \circ \restr{f}{Y_1},\ f_2 = i_2^{-1} \circ \restr{f}{Y_2}$. Then
	both $f_k$ are morphisms $\AA{1} \supseteq Y_k \to \AA{1}$, hence they can
	be written as 
	\[
		f_k = \frac{g_k}{h_k}
	\] 
	with $(g_k, h_k) = 1$. But then 
	\[
		\restr{f}{i_1(Y_1)} = i_1 \circ f_1 = [g_1(x)/h_1(x):1] = [g_1(x):h_1(x)],
	\] 
	and as $\PP{1}$ is irreducible and $Y_1$ is dense in $\PP{1}$, we have
	\[
		f = [g_1(x):h_1(x)]
	\] 
	on all of $\PP{1}$ and we are done. Note that it also follows that $g_1 =
	h_2, g_2 = h_1$.
\end{proof}

Now let $f : \PP{1} \to \PP{1}$ be an automorphism. From the lemma it follows
that we can write
\begin{align*}
	\restr{f}{i_1(\AA{1})}([x:1]) &= [p_1(x) : q_1(x)], \\
	\restr{f}{i_2(\AA{1})}([1:x]) &= [p_2(x) : q_2(x)],
\end{align*}
and as these expressions agree on the intersection $i_1(\AA{1}) \cap i_2(\AA{2})
= \{[x_1 : x_2] = [x_1/x_2 : 1] : x_1,x_2 \in \K \setminus 0 \}$, we have 
\[
	[p_1(x_1/x_2) : q_1(x_1/x_2)] = [p_2(x_1/x_2) : q_2(x_1/x_2)]
\] 
which in turn yields 
\[
	p_1(x)q_2(x) = p_2(x)q_1(x)
\] 
whenever $x \not \in V(q_1, q_2)$, but if $x \in V(q_1, q_2)$ then both sides are $0$
so we have 
\[
	p_1(x)q_2(x) = p_2(x)q_1(x)
\] 
everywhere and $(p_k, g_k) = 1$ yields $p_1 = c p_2, q_1 = c q_2$. If
we now relabel $p = p_1, q = q_1$, we get
\[
	f([x_1 : x_2]) = [p(x_1/x_2) : q(x_1/x_2)]
\] 
when $x_2 \not = 0$ and 
\[
	f([x_1 : x_2]) = [c p(x_2/x_1) : c q(x_2/x_1)] = [p(x_2/x_1) : q(x_2/x_1)]
\] 
when $x_1 \not = 0$. Moreover, since $f$ is injective, we have that $f$ is
injective on $i_1(\AA{1})$, hence $p, q$ must have degree $1$ and we are done.

\subsubsection*{(b)} 


\subsection*{Ex 5.9} 

For any ringed spaces $X, Y$, we always have that for any morphism $f : X \to
Y$ the pull-back $f^* : \mathcal{O}_Y(Y) \to \mathcal{O}_X(X)$ is an algebra
homomorphism. This is required by the definition of a morphism of a ringed
space. Thus we will only focus on the other direction for both subproblems.

\subsubsection*{(a)} 

Let $f^* : \mathcal{O}_Y(Y) \to \mathcal{O}_X(X)$ be an algebra homomorphism.
Let $y_1, y_2, \ldots, y_n$ be the coordinate functions on $Y$, and $\phi_i =
f^*(y_i)$. We claim that
\[
	f = (\phi_1, \phi_2, \ldots, \phi_n)
\] 
is a morphism $X \to Y$. \\ 

Let $U_i$ be a cover of $X$ by affine varieties. It follow from the definition
of a sheaf that $f^*$ followed by restriction to any $U_i$ is an algebra
homomorphism $\mathcal{O}_Y(Y) \to \mathcal{O}_{Y}(U_i)$ and we write this as
\[
	f_i^* = \restr{?}{U_i} \circ f^*.
\] 
From the proof of Corollary 4.8, we know that $f_i^*$ is the pullback of
$\restr{f}{U_i}$, hence $\restr{f}{U_i}$ is a morphism $U_i \to X$ and $f$ is a
morphism by Lemma 4.6.

\subsubsection*{(b)} 

No, for example Exercise 5.7 (c) tells us that $\mathcal{O}_{\PP{1}}(\PP{1})
\cong \K$, so there is only one non-zero $\K$-algebra homomorphism
$\mathcal{O}_{\PP{1}}(\PP{1}) \to \mathcal{O}_{\AA{1}}(\AA{1}) = \K[x]$ and
that is the injection $\K \to \K[x], k \mapsto k$. Meanwhile, from the
construction of $\PP{1}$ we already have two non-trivial homomorphism $i_1,
i_2$ for $\AA{1} \to \PP{1}$.


\subsection*{Ex 5.11} 

Let $Y \subseteq X$ be a closed subset and $U \subseteq X$ be an open affine
subset. Let $i : U \to \An$ be an embedding into affine space. Then $i(U \cap
Y)$ is closed in $\An$, hence a zero set of some polynomials $V(f_1, f_2,
\ldots, f_m)$. In other words, $U \cap Y$ is isomorphic to $V(f_1, f_2, \ldots,
f_m)$ via $i$ as ringed spaces. Hence $U \cap Y$ is an affine open set of $X$. \\

It follows that if $U_i$ is a finite cover of $X$ by affine open sets, then $Y
\cap U_i$ is a finite cover of $Y$ by affine open sets, and $Y$ is a
prevariety. \\

Moreover, the structure sheaf on $Y$ obtained from gluing the $U_i \cap Y$
together agrees with that of Construction 5.10 (b). Let $U \subset Y$ be an
open set, $\mathcal{O}_y$ be the structure sheaf from Construction 5.10 (b) and
$\mathcal{O}'_Y$ be the structure sheaf obtained from glueing $U_i \cap Y$. \\

We have $f \in \mathcal{O}'_Y(U)$ precisely when $f$ is regular on all $U_i
\cap Y$. Now let $a \in U$ and $i$ be such that $a \in U_i$. Then let $F$ be
any element in the preimage of $f$ under the quotient homomorphism $A(U_i) \to
A(U_i \cap Y) = A(U_i) + I(Y)$. Then $f$ and $F$ agree on $U_i \cap Y$, so $f
\in \mathcal{O}_Y(U)$ by Construction 5.10 (b). \\

Now let $f \in \mathcal{O}_Y(U)$. Then given a $U_i$ and $a \in U_i \cap Y$, we
have that there is some open $V_a \in X$ containing $a$ such that there is some
$g \in \mathcal{O}_X(V_a)$ and $\restr{f}{V_a \cap U} = \restr{g}{V_a \cap U}$.
But then $\restr{f}{V_a \cap U} \in \mathcal{O}_X(V_a \cap U)$, so given any $a
\in U_i \cap U$, we can find $V_a$ such that $\restr{f}{V_a \cap U}$ is
regular, hence $f$ is regular on $U_i \cap U$ and finally on $U$ by Lemma 4.6.



\subsection*{Ex 5.21} 

\begin{lemma}
	Let $V$ be a prevariety obtained by glueing the affine open sets $U_i$.
	Then $Z$ is closed in $V$ if and only if every $Z \cap U_i$ is closed. 
\end{lemma}
\begin{proof}
	We have that $Z$ is closed if and only if $V \setminus Z$ is open, which
	happens if and only if every $U_i \cap (V \setminus Z) = U_i \setminus Z$
	is open, and this is the case if and only if every $U_i \cap Z$ is closed.
\end{proof}

Let $i_1, i_2$ be the injections into $\PP{1}$ and define $X_1 = i_1(\AA{1}),
X_2 = i_2(\AA{1})$. Then $\PP{1} \times \PP{1}$ can be obtained by glueing
the patches $X_i \times X_j$, $i, j \in \{1, 2\}$. The diagonal $\Delta_{\PP{1}}$
intersects $X_1 \times X_1$ and $X_2 \times X_2$ as $\Delta_{\AA{1}}$ and is
thus closed there. It intersects $X_1 \times X_2, X_2 \times X_2$ as $V(xy -
1)$ and is closed there as well. Hence $\Delta_{\PP{1}}$ is closed in
$\PP{1} \times \PP{1}$ and $\PP{1}$ is separated.

\subsection*{Ex 5.22} 

\subsubsection*{(a)} 

Let $\pi_{xx} : (X \times Y) \times (X \times Y) \to X \times X$ be the
projection morphism onto the two $X$ coordinates. Then the inverse image of the
diagonal of $X$,
\[
	\pi_{xx}^{-1}(\Delta(X))
	=
	\{(x_1, y_1, x_2, y_2) \in (X \times Y) \times (X \times Y) : x_1 = x_2\}
\]
is closed in $(X \times Y) \times (X \times Y)$, and similarly, we have  
\[
	\pi_{yy}^{-1}(\Delta(Y))
	=
	\{(x_1, y_1, x_2, y_2) \in (X \times Y) \times (X \times Y) : y_1 = y_2\}
\]
closed as well. Intersecting the two yields $\Delta_{X \times Y}$ and we are
done.

\subsubsection*{(b)} 

Let $U_i, V_i$ be finite open affine coverings of $X, Y$ respectively. Then
$U_i \times V_j$ is a finite open covering of $X \times Y$. Every $U_i, V_j$ is
irreducible, since if $A \cup B = U_i$ are two closed non-trivial sets in
$U_i$, then $U_i \setminus A, U_i \setminus B$ are open in $U_i$ and in $X$,
whence $X \setminus (U_i \setminus A) = A \cup (X \setminus U_i)$ and $B \cup
(X \setminus U_i)$ are two closed non-trivial sets. Their union is 
\[
	(A \cup (X \setminus U_i))
	\cup
	(B \cup (X \setminus U_i))
	=
	(A \cup B)
	\cup
	(X \setminus U_i)
	=
	U_i
	\cup
	(X \setminus U_i)
	=
	X.
\] 
We now have that  every $U_i \times V_j$ is irreducible by Exercise 2.24. If we
can show that every $U_i \times V_j$ intersects every $U_r \times V_s$, then we
can apply Exercise 2.21 which yields $X \times Y$ irreducible. \\

Every $U_i, U_r$ and $V_j, V_s$ intersect since they are open sets in the
irreducible spaces $X, Y$, and it follows immediately that $U_i \times V_j$ and
$U_r \times V_s$ intersect. 

\subsection*{Ex 5.23} 

\subsubsection*{(a)} 

Let $U, V$ be affine open sets in the variety $X$, and $\pi_U : U \times V \to
X, \pi_V : U \times V \to X$ be the projections (followed by inclusions into
$X$). Then it follows from Proposition 5.20 (b) that $\{(u, v) \in U \times V:
\pi_U(u) = \pi_V(v)\} = \Delta_{U \cap V}$ is closed in $U \times V$. \\

Since both $U, V$ are affine, we have that $U \times V$ is affine as well. Let
$e : U \times V \xrightarrow{\sim} Z \subset \An$ be an embedding onto some
Zariski closed set in affine space. Then $e$ sends closed sets to closed sets.
Hence $e(\Delta_{U \cap V})$ is closed in $\An$, so $\Delta_{U \cap V}$ is an
affine variety. \\

Finally, $f : U \cap V \to \Delta_{U \cap V} , f : x \mapsto (x, x)$ is an
isomorphism with inverse $f^{-1} : (x, x) \mapsto x$, and $U \cap V$ is affine
as well.

\subsubsection*{(b)} 

Like above, we have that $X \cap Y \cong \Delta_{X \cap Y}$, so it's enough to
consider the diagonal. Also like above, the diagonal $\Delta_{X \cap Y}$ is
closed in $X \times Y$, and $X \times Y$ is affine so embeddable into some
Zariski closed set in affine space, hence $\Delta_{X \cap Y}$ is as well. From
now on we identify all of our varieties as embedded into affine space this way
(that is we may assume that $\Delta_{X \cap Y}, X \times Y \subset \AA{2n}$ are
Zariski closed). \\

Now, let $U$ be some irreducible component of $\Delta_{X \cap Y}$. We have $X
\times Y$ irreducible by Exercise 5.22, so we can apply Proposition 2.28 (b) to
get

\begin{align*}
	\dim \Delta_{X \cap Y} 
	&=
	\dim X \times Y
	- 
	\codim_{X \times Y}(U) \\
	&=
	\dim X 
	+ 
	\dim Y
	-
	\codim_{X \times Y}(U).
\end{align*} 

Hence we are done if we can show that $\codim_{X \times Y}(U) \leq n$. This
follows from Lemma XYZ which says that $\codim_{X \times Y}(U)$ is the same as
the height of $I(U)$ in $A(X \times Y)$. Since $U$ is an irreducible component
of $\Delta_{X \times Y}$, we have that $I(U)$ is a minimal prime ideal of
$I(\Delta_{X \times Y})$, hence $I(U)$ and $I(\Delta_{X \times Y})$ have the
same height ? 

but we claim that the height of $I(U)$

Now, $I(U)$ is a minimal ideal of
$I(\Delta_{X, Y})$


, and since $U \subseteq \Delta_{X \cap
Y}$, we have $I(U) \supseteq I(\Delta_{X \cap Y})$

$\cong A(X) \otimes A(Y)$.

TODO todo Todo : Finnish!

\subsection*{Ex 5.24}

We will look locally enough where $X$ is affine, and reduce this problem to the
affine case which we already solved in Exercise 2.34 (b). \\

Let $X$ be a variety, $U \subseteq X$ a dense open subset and 
\[
Y_0 \subsetneq Y_1 \subsetneq \ldots \subsetneq Y_n \subset X
\] 
a chain of irreducible closed subsets. Then let $Z$ be a affine open set which
intersects $Y_0$. Since $U$ is dense, we have that $U$ intersects $Z$ as well.
Let $e : Z \to \An$ be an embedding into affine space such that $e(Z)$ is the
zero locust of some set of polynomials. All our sets intersect $Z$, and we
write $Z' = e(Z), Y_i' = e(Z \cap Y_i), U' = e(Z \cap U)$. \\

We can use the construction from Exercise 2.34 (a) to show that $Y'_{i - 1}
\subsetneq Y_i'$ are strict inclusions. In brief, we set $V_i = Y_{i - 1}
\setminus Y_i$, which is non-empty and open in $Y_i$ and intersects $Z \cap
Y_i$ since $Y_i$ is irreducible, hence $\emptyset \not = e(Z \cap V_i) \subset Y'_i
\setminus Y'_{i - 1}$. \\

Now we claim that $U'$ is dense in $Z'$, which is equivalent to $U'$
intersecting every open set of $Z'$ (and this is the property we will need
anyhow). Let $V'$ be open in $Z'$ and $V = e^{-1}(V)$. Then $V$ is open in $Z$,
and by the definition of the subspace topology, we have some open $V''$ in $X$
such that $V'' \cap Z = V$. But $Z$ is open, so $V$ is open in $X$, and $V$
intersects $U$ since $U$ is dense in $X$. \\

To recap, we now have a strict chain of closed irreducible subsets 
in affine space 
\[
	Y'_0 \subsetneq Y'_1 \subsetneq \ldots \subsetneq Y'_n \subset Z'
\] 
and a dense open set $U' \subseteq Z'$, and we are free to use the translation
of Exercise 2.34 (b) to conclude that $\dim U' = \dim U \geq n$. \\

The other inequality is Exercise 2.30.

\subsection*{Ex 6.14}

Write $a = [a_0 : a_1 : \ldots : a_n]$ and $e_{i, j} = a_j x_i - a_i x_j$. We
claim that $I_p(\{a\}) = (e_{i, j} : 0 \leq i < j \leq n)$. First note that
$e_{i, j}(a) = a_j a_i - a_i a_j = 0$ for all $i, j$. Moreover, suppose that $b
= [b_0 : b_1 : \ldots : b_n]$ is such that $e_{i,j}(b) = 0$ for all $i, j$.
Then $a_i b_j = a_j b_i$ for all $i, j$, which is exactly the same thing as
saying all of the minors of order $2$ of the matrix 
\[
\begin{pmatrix}
	a_0 & a_1 & \ldots & a_n \\	
	b_0 & b_1 & \ldots & b_n \\	
\end{pmatrix}
\] 
vanish, which in turn happens if and only if the matrix has at
most rank $1$, I.e $a = b$ in $\Pn$. We've shown that $V((e_{i, j} : 0 \leq i <
j \leq n)) = \{a\}$ and we are done.

\subsection*{Ex 6.29}

In affine space, a line $L_1$ and a point $a$ not on this line, span a plane $P_1$,
and any line which intersect both $L_1, a$ lies on this plane. If we then pick
a line $L_2$ which doesn't intersect on this plane, we see that no line which
intersects both $L_1, a$, also intersects $L_2$. Any lines $L_2$ which doesn't
intersect $P_1$ is parallel to $L_1$, and since
parallel lines in general don't intersect in $\AA{3}$, we see that it's
impossible to find a third line $L$ which intersects $L_1, L_2, a$ 
when $L_1, L_2$ are parallel. \\

There is one more case where it's impossible to find such $L$. Let $q$ be the
point where $L_2$ meets $P_1$. If $q, a$ spans a line which is parallel to $L_1$,
then it's again impossible to find $L$ which intersects $L_1, L_2, a$, since such
a line would have to contain both $q, a$, whence it wont meet $L_1$. \\

This latter case correspond to when the plane $P_2$ containing $L_2$ and 
$a$ is parallel to $L_1$. \\

Projective space is more flexible as we have points at infinity, and parallel
lines intersect at infinity. Here if either $P_1, L_2$ or $P_2, L_1$ are
parallel, then there is a line $L$ through $a$ in each corresponding plane
$P_i$ which intersects the other line $L_j$ $i \not = j$ at infinity. \\

We solve the problem in $\AA{4}$. Here the lines $L_1, L_2$ corresponds to
planes through the origin spanned by the vectors $u_1, u_2$ and $v_1, v_2$
respectively. $a$ corresponds to a line through the origin spanned by a vector,
which we will denote by $a$ as well. The planes $P_1, P_2$ now correspond to
three dimensional hypersurfaces spanned by $a, u_1, u_2$ and $a, v_1, v_2$
respectively. Their intersection is a plane which contains $a$, spanned by say
$a, w$. Then the intersection plane meets the hypersurface corresponding to
$L_1$ in at least one point, parameterised by say $sa + tw = s'a + t'u_1 + r'
u_2$, and we have that $(s + s')a + tw = t'u_1 + r' u_2$, so the plane $\langle
a, w \rangle$ meets the plane of $\langle u_1, u_2 \rangle $. The same is of
course true of the plane $\langle v_1, v_2 \rangle $, hence the line $L$ in
$\PP{3}$ corresponding to $\langle a, w \rangle $ will meet all of $a, L_1,
L_2$. \\

This line is unique, since the plane $\langle a, w \rangle$ is unique. Indeed,
since $L_1 \not = L_2$, we have that the intersection $\langle a, u_1, u_2
\rangle \cap \langle a, v_1, v_2 \rangle$ is exactly a plane.

\subsection*{Ex 6.30}

\subsubsection*{(a)}
The only if part is immediate. \\

Let $R$ be a homogeneous ring such that for any homogeneous $f, g \in R$, we
have $fg = 0$ implies $f = 0$ or $g = 0$, and suppose that $p,q \in R$ are such
that $pq = 0$. Write $r = \deg p, s = \deg q$, and let $p_r, q_s$ be the
leading homogeneous components. Since a graded ring is the direct sum of it's
homogeneous components, every homogeneous component of $pq$ must be zero, in
particular the leading component $(pq)_{rs} = p_r q_s$. Our assumption on $R$
then tells us that either $p_r = 0$ or $q_s = 0$, and since these are the
leading components, $p = 0$ or $q = 0$, and $R$ is an integral domain.


\subsubsection*{(b)}

Suppose $f, g \in S(X)$ are such that $fg = 0$. Then $X = V(fg) = V(f) \cup
V(g)$ and if $X$ is irreducible, we must have either $V(f) = X$ or $V(g) = X$,
whence $f = 0$ or $g = 0$ and $S(X)$ must be an integral domain. \\

Similarly, if $X$ is reducible, let $X = U \cup V$ be a non-trivial
decomposition and $f \in I_p(U), g \in I_p(V)$ be non-zero polynomials. Then
$fg$ vanishes on both $U$ and $V$ hence on $X$ and $fg = 0$, so $S(X)$ isn't an
integral domain.

\subsection*{Ex 6.31}

\subsubsection*{(a)}

By Lemma 6.18, any strictly increasing chain of varieties in $\PP{n}$
corresponds to a chain of cones in $\AA{n+1}$, to which we can append a point
immediately after the empty variety
a la
\[
	X_0 = \emptyset \subsetneq \{a\} \subsetneq C(X_1) \subsetneq C(X_2)
	\subsetneq \ldots \subsetneq C(X_m),
\]
hence $\dim C(X) \geq 1 + \dim X$. \\

For the other direction, we take the opportunity to explore homogeneous 
coordinate ring and pass to the algebraic side. We provide a sequence
of lemmas to this end. 

\begin{lemma}
	Let $X$ be a projective variety. Then 
	\[
		S(X) = A(C(X)).
	\] 
\end{lemma}
\begin{proof}
	It follows from Remark 6.17 that $I_p(X) = I_a(C(X))$, after which the
	equality of the lemma follows from the definitions of homogeneous and affine
	coordinate rings.
\end{proof}

\begin{lemma}
	Let $X$ be a non-empty irreducible projective variety. Then $S(X)$ contains
	a homogeneous prime ideal $J$ of height $1$.
\end{lemma}
\begin{proof}
	Let $x_i$ be a non-zero coordinate on $C(X)$. Then $(x_i)$ is a homogeneous
	ideal in $A(C(X))$. Moreover, $(x_i)$ is prime, as it's the image of a
	prime ideal under the surjective ring homomorphism $\pi: \Kx \to A(C(X)),
	\pi: x \mapsto x + I_a(C(X))$. Finally, $(x_i)$ is its own minimal ideal,
	and therefore has height at least one by Krull's Principal Ideal theorem,
	and height exactly one since $X$ is irreducible, and $S(X) = A(C(X))$ is an
	integral domain so $(0)$ is prime there.
\end{proof}

\begin{corollary}
	If $X$ is a projective variety, then $1 + \dim X \leq \dim C(X)$.
\end{corollary}
\begin{proof}
	The respective coordinate rings are equal, and by the lemma, $A(C(X))$
	contains a maximal chain of prime ideals which are all homogeneous, 
	and since all of these but possibly the irrelevant ideals correspond
	to irreducible projective varieties, the corollary follows.
\end{proof}

\subsubsection*{(b)}
We can reduce to the case where $X, Y$ are pure dimensional by simply ignoring
irreducible components of non-maximal dimension. It follows from part (a) that
$\dim C(X) + \dim C(X) \geq n + 2$, whence Exercise 5.23 (a) yields
\[
	\dim C(X) \cap C(Y) \geq \dim C(X) + \dim C(Y) - (n + 1) \geq 1.
\]
Now, if $x \in C(X) \cap C(Y)$ then $\lambda x \in C(X)$ and $\lambda x \in
C(Y)$ for all $\lambda$, hence $x \in X \cap Y$ and $x \in C(X \cap Y)$. The
other inclusion follows similarly, hence $C(X \cap Y) = C(X) \cap C(Y)$ has
dimension at least $1$, so it's at least a line in affine space, and least a
point in projective space.

\end{document}
