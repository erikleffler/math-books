\documentclass{article}
\usepackage[utf8]{inputenc}

\usepackage{rotating}
\usepackage{mathtools}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{MnSymbol}
\usepackage{bm}
\usepackage{listings}
\usepackage{float}
\usepackage{fancyvrb}
\usepackage{xcolor}
\usepackage{tikz-cd}

\hbadness = 10000
\vbadness = 10000

\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
  \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
  #1 % the function
  \vphantom{\big|} % pretend it's a little taller at normal size
  \right|_{#2} % this is the delimiter
  }}

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal
% Custom colors

\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
morekeywords={self},              % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false
}}

\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

\theoremstyle{definition}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\A}{\mathbb{A}}


\newcommand{\x}{\bm{x}}
\newcommand{\Kx}{\K[\bm{x}]}
\newcommand{\KP}[2]{\K[#1_1, #1_2, \ldots, #1_{#2}]}

\newcommand{\oo}{\mathcal{O}}
\newcommand{\osp}[1]{\oo_{\Spec\left(#1\right)}}
\newcommand{\rospu}[2]{\restr{\osp{#1}}{#2}}
\newcommand{\oop}[2]{\oo_{\P^{#1}_{#2}}}
\newcommand{\ox}{\mathcal{O}_X}

\renewcommand{\AA}[1]{\A^{#1}}
\newcommand{\An}{\A^n}
\newcommand{\Am}{\A^m}

\newcommand{\PP}[1]{\P^{#1}}
\newcommand{\Pn}{\P^n}
\newcommand{\Pm}{\P^m}

\newcommand{\Hom}{\text{Hom}}
\newcommand{\Aut}{\text{Aut}}
\newcommand{\End}{\text{End}}
\newcommand{\Iso}{\text{Iso}}
\newcommand{\Mor}{\text{Mor}}

\newcommand{\lm}{\text{lm}}
\newcommand{\nr}{\text{nilrad}}
\newcommand{\Spec}{\text{Spec}}
\newcommand{\Proj}{\text{Proj}}
\newcommand{\proj}{\Proj}
\newcommand{\spec}{\Spec}
\newcommand{\codim}{\text{codim}}
\newcommand{\ann}{\text{ann}}
\newcommand{\Ass}{\text{Ass}}
\newcommand{\ass}{\text{Ass}}
\newcommand{\im}{\text{im}}
\newcommand{\id}{\text{id}}
\newcommand{\height}{\text{height}}
\newcommand{\supp}{\text{Supp}}
\newcommand{\Supp}{\text{Supp}}
\newcommand{\Der}{\text{Der}}
\newcommand{\der}{\text{Der}}
\newcommand{\colim}{\text{colim}}

\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Sch}{\catname{Sch}}
\newcommand{\CRing}{\catname{CRing}}
\newcommand{\KAlg}{\K-\catname{Alg}}
\newcommand{\AAlg}{A-\catname{Alg}}
\newcommand{\Alg}{\catname{Alg}}
\newcommand{\Top}{\catname{Top}}
\newcommand{\op}{\catname{op}}

\setlength{\parindent}{0pt}




\begin{document}

\section*{Ch 1}

\subsection*{Ex 1.2.B}
Let $a, b \in \Mor(A, A)$ be invetible morphisms. Then $(ab)$ is invertible
with inverse $(ab)^{-1} = b^{-1}a^{-1}$, $a^{-1}$ is invertible with inverse
$a$, and the identity morphism is it's own inverse. Hence the set of invertible
morphisms $A \to A$ form a group. \\

In Example 1.2.2, $\Aut(A, A)$ is the set of bijections on $A$, hence the
symmetric group $S_A$. \\

In Example 1.2.3, $\Aut(V, V)$ is the set of invertible linear maps $V \to V$. \\

Let $A, B \in \mathcal{C}$ be two objects in some category, isomorphic via $f :
	A \to B$. Then if $a, b \in \Aut(A)$, we have
\begin{align*}
	e_B               & = f f^{-1} = f e_A f^{-1}                        \\
	f a b f^{-1}      & = f a f^{-1} f b f^{-1}                          \\
	(f a f^{-1})^{-1} & = (f^{-1})^{-1} a^{-1} f^{-1} = f a^{-1} f^{-1},
\end{align*}
hence $a \mapsto f a f^{-1}$ is a group homomorphism $\Aut(A) \to \Aut(B)$.
It's an isomorphism since its inverse is given by $a' \mapsto f^{-1} a' f$.

\subsection*{Ex 1.2.C}

First of, let $\phi : A \to S^{-1}A$ be the canonical homomorphism. Then $a \in
	\ker(\phi)$ exactly when there is some $s \in S$ such that $s(a \cdot 1 - 0
	\cdot 1) = 0$, and such $a$ exists if and only if some $s \in S$ is a zero
divisor.


\subsection*{Ex 1.4.A}

For all $g : B' \to B \in \mathcal{B}$ we have
\[
	\begin{tikzcd}
		&
		\Mor_{\mathcal{A}}(A, GB')
		\ar[r, "Gg_{*}"]
		\ar[d, "\tau_{A, B'}"]
		&
		\Mor_{\mathcal{A}}(A, GB)
		\ar[d, "\tau_{A, B}"] \\
		&
		\Mor_{\mathcal{B}}(F(A), B')
		\ar[r, "g_{*}"]
		&
		\Mor_{\mathcal{B}}(F(A), B)
	\end{tikzcd}
\]

\subsection*{Ex 1.4.B}

Let $\eta_{A} = \tau_{A, F(A)}(\id_{F(A)})$. Then replacing $B'$ with $F(A)$
and $g : B' \to B$ with $g : F(A) \to B$ in the diagram of the previous exercise,
we obtain
\[
	\begin{tikzcd}
		&
		\Mor_{\mathcal{A}}(A, GF(A))
		\ar[r, "Gg_{*}"]
		\ar[d, "\tau_{A, F(A)}"]
		&
		\Mor_{\mathcal{A}}(A, GB)
		\ar[d, "\tau_{A, B}"] \\
		&
		\Mor_{\mathcal{B}}(F(A), F(A))
		\ar[r, "g_{*}"]
		&
		\Mor_{\mathcal{B}}(F(A), B),
	\end{tikzcd}
\]
and by tracing what happens to $\eta_{A}$, we get
\[
	g \circ \tau_{A, F(A)}(\eta_A)
	=
	\tau_{A, B} \circ Gg_{*}(\eta_{A})
\]
The left hand side above is given by $g \circ \id_{F(A)} = g$, and the right
hand side is $\tau_{A, B}(Gg(\eta_A)) = (\tau_{A, B}(Gg))(\eta_{A})$ and we are
done.


\section*{Ch 2}

\subsection*{Ex 2.2.J}

$\mathcal{F}_{p}$ is the set of pairs $(m, U)$ with $U$ open in $X$ containing
$p$ and $m \in \mathcal{F}(U)$ modulo the relation that if $(m', U')$ is
another such pair, and $V \in U \cap U', p \in V$ such that $\restr{m}{U} =
	\restr{m'}{U'}$, then $(m, U) \sim (m', U')$. \\

Now, let $(r, U) \in \mathcal{O}_p$. Then define $(r, U) (m, U) = (rm, U)$.
This action is well defined, as if $(r', U') \sim (r, U)$ and $r = r'$ in
$\mathcal{O}(V)$, then as $\mathcal{F}(V)$ is an $\mathcal{O}(V)$-module, $rm =
	r'm$ in $\mathcal{F}(V)$, and $(rm, V) \sim (r'm, V)$.


\subsection*{Ex 2.3.A}

Let $\phi_p : (m, U) \to (\phi(m), U)$. Then $\phi_p$ is well defined, as if
$(m, U) \sim (m', U')$ with $m = m'$ in $\mathcal{F}(V)$, then $\phi(m) =
	\phi(m')$ in $\mathcal{G}(V)$ since the morphisms in a morphism of sheaves
commute with restrictions.

\subsection*{Ex 2.3.C}

Given $V \subset U$, any morphism of sheaves $\restr{\mathcal{F}}{U} \to
	\restr{\mathcal{G}}{U}$ contains the data of a morphism of sheaves
$\restr{\mathcal{F}}{V} \to \restr{\mathcal{G}}{V}$, so restrictions in
$\Hom(\mathcal{F}, \mathcal{G})$ may be defined in this natural way, and it's
clear that they compose as they should. \\

We now prove the identity axiom. Suppose that $U$ is open in $X$ and that $U_i,
	i \in I$ is an open cover of $U$ such that $f, g \in \Hom(\mathcal{F},
	\mathcal{G})(U)$ agree on all $U_i$. Then let $V \subset U$ be open and $x \in
	\mathcal{F}(U)$. As $f, g$ agree on all $U_i$, they agree on all $V \cap U_i$,
hence $\restr{f}{V \cap U_i}(x) = \restr{g}{V \cap U_i}(x)$ in $\mathcal{G}(V
	\cap U_i)$ for all $i \in I$. Then commutativity of the morphisms tells us that
$\restr{f(x)}{V \cap U_i} = \restr{g(x)}{V \cap U_i}$ on these sets, whence the
identity axiom on $\mathcal{G}$ tells us that $f(x) = g(x)$. Hence $f = g$ on
any open set $V \subset U$, and we have verified identity on $\Hom(\mathcal{F},
	\mathcal{G})$. \\

We now prove the gluability axiom. Suppose that $U$ is open in $X$ and that
$U_i, i \in I$ is an open cover of $U$. Furthermore, suppose that $f_i \in
	\Hom(\mathcal{F}, \mathcal{G})(U_i), i \in I$ is a set of sheaf morphisms that
agree on the intersections $U_i \cap U_j$. Then, given some $V$ open in $U$ and
$h \in \mathcal{F}(V)$, we have that the $f_i$ all agree on the intersections
$V \cap U_i$, hence $f_i(\restr{h}{V \cap U_i})$ agrees on all intersections,
and by the gluability axiom there exists a $h' \in \mathcal{G}(V)$ which
restricts down to $f_i(h)$ in all $V \cap U_i$, and furthermore, identity tells
us that this $h'$ is unique. We can now define $f \in \Hom(\mathcal{F},
	\mathcal{G})(V)$ as $f : h \to h'$, and this $f$ will restrict to each $f_i$ on
each $U_i$.

\subsection*{Ex 2.3.I}

We show identity and glueing, beginning with identity. \\

Let $U$ be open in $\ker(\phi)$ and $U_i, i \in I$ be an open cover of $U$. Let
$f, g \in \ker(\phi)(U)$ be such that $\restr{f}{U_i} = \restr{g}{U_i}$ in
every $\ker(\phi)(U_i), i \in I$. Then $f = g$ by the identity property in
$\mathcal{F}$ and injectivity of $\ker(\phi)$ into $\mathcal{F}$. \\

We now show the glueing property. Let $U$ be open in $\ker(\phi)$ and $U_i, i
	\in I$ be an open cover of $U$. Furthermore, suppose $f_i \in \ker(\phi)(U_i),
	i \in I$ is a set of elements which agree when restricted to intersections $U_i
	\cap U_j$. We can glue these $f_i$ in $\mathcal{F}$ to find a $f \in
	\mathcal{F}(U)$ which restricts to $f_i$ on each $U_i$. It remains to show that
$f \in \ker(\phi)(U)$. To see this, note that $\phi(f)$ restricts to $0$ on
each $U_i$, since $f$ restricts to $f_i$ which lies in the kernel of $\phi$. It follows
that $\phi(f) = 0$ by the identity property of $\mathcal{G}$, and we are done.


\subsection*{Ex 2.4.A}

Suppose that $f \in \mathcal{O}(U)$ is $0$ at all stalks $p \in U$. Then for
every $p \in U$, there exist some open set $V_p$ containing $p$ such that $f =
	0$ in $\mathcal{O}(V_p)$. Then $V_p \cap U$ form an open cover of $U$, and $f =
	0$ by the identity property.

\subsection*{Ex 2.4.B}

Suppose that $(s_p)_{p \in U}$ is a set of compatible germs. Then we can find
an open cover $U_i,i \in I$ of $U$ and sections $f_i \in \mathcal{O}(U_i)$ such
that the germ of any $f_i$ at any point $q \in U_i$ is $s_q$. The $f_i$ must
then agree on intersections $U_i \cap U_j$ by Exercise 2.4.A, for they induce
the same germs $s_q, q \in U_i \cap U_j$ here. It follows that we can glue the
$f_i$ to an $f \in \mathcal{O}(U)$ which restricts to the $f_i$, and this $f$
has germ $s_q$ at any point $q \in U$, and we are done.

\subsection*{Ex 2.4.C}

If we show that the given diagram (2.4.3.1) commutes then we are done, as it
would follow that if
\[
	\phi_1((s_p)_{p \in U})
	=
	\phi_2((s_p)_{p \in U}),
\]
then $\phi_1(s) = \phi_2(s)$ since sections are determined by germs (Exercise
2.4.A). \\

To see that the diagram commutes we just write out all the definitions. Let $V$
be open in $U$ and $s \in \mathcal{O}(V)$. Then
\[
	\phi(s_p)
	=
	\overline{(\phi(s), V)}_p
	=
	\phi(s)_p.
\]

\subsection*{Ex 2.4.D}

We begin with injectivity. Let $\phi : \mathcal{F} \to \mathcal{G}$ be a
morphism of sheaves on the space $X$. Then if $U$ is open in $X$ and $s \in U$,
we have $\phi(u) = 0$ in $U$ if and only if the germ of $\phi(U)$ is $0$ on
every point of $U$. Hence $u \in \ker(\phi)$ if and only if $u \in
	\ker(\phi_p)$ for all $p \in U$. Hence a morphism of sheaves is injective if
and only if it is injective on stalks. \\

We move on and treat surjectivity. Let $\phi : \mathcal{F} \to \mathcal{G}$ be
an injective morphism of sheaves. Then if $\phi$ is surjective, and
$\overline{(s, U)}$ is some germ at the stalk $\mathcal{G}(U)_{p}$, there exist
some $s' \in \mathcal{F}(U)$ in the preimage of $\phi$, hence
$\phi_p(\overline{(s', U)}) = \overline{(\phi(s'), U)} = \overline{(s, U)}$ and
the morphism is surjective at stalks as well. \\

For the final case, suppose that $\phi$ is injective on the level of sheaves,
and is surjective at every stalk. Then by the previous part, we know that every
$\phi_p$ is injective as well, hence an isomorphism. We will show that a
compatible set of germs in $\mathcal{G}$ pull back to a compatible set of germs
in $\mathcal{F}$ under $\phi$, and doing this will require diligent
bookkeeping. \\

Let $U$ be open in $X$, and $(a_p)_{p \in U}$ be a compatible set of germs in
$\mathcal{G}$. As $\phi_p$ is an isomorphism for every $p \in U$, we may write
$\phi_p((b_p)_{p \in U}) = (a_p)_{p \in U}$ where $b_p \in \mathcal{F}_p$.
Picking representatives, let $b_p = \overline{(c_p, U_p)}$ where $c_p \in
	\mathcal{F}(U_p)$. Then as Diagram 2.4.3.1 commutes (we showed this in Exercise
2.4.C), we have
\[
	\overline{(\phi(c_p), U_p)}
	=
	a_p.
\]
Now, as $(a_p)_{p \in U}$ is a compatible set of germs, there exist an open
cover $V_i, i \in I$ and $g_i \in \mathcal{G}(V_i)$ such that the germ
$\overline{g_i}_p$ coincides with $a_p = \overline{(\phi(c_p), U_p)}$ for all
$p \in V_i$. I.e, there exist some open $W_{p}^{i} \subseteq V_i \cap U_p$
where $\phi(c_p) = g_i$. Since there exist such a open set for every $p \in U$,
just picking one for every $p \in U$ is enough to form an open cover of $U$,
and forgetting the $i$-superscript, the $W_p$ form an open cover of $U$, and
for every $q \in W_{p}$ we have that
\[
	\overline{\phi(c_p)}_q = a_q = \phi_q(b_q),
\]
whence comutativity of 2.4.3.1 yields
\[
	\phi_q(\overline{(c_p, W_p)}_q)
	=
	\overline{\phi(c_p)}_q
	=
	\phi_q(b_q),
\]
and injectivity of $\phi_q$ that
\[
	\overline{(c_p, W_p)}_q
	=
	b_q.
\]
To summarize, we have an open cover $W_{p}, p \in U$ of $U$, and sections $c_p
	\in \mathcal{F}(W_p)$ such that the germs of the $c_p$ coincide with $b_q$ for
all $q \in W_p$. I.e, $(b_p)_{p \in U}$ is a compatible set of germs! \\

It now follows from Diagram 2.4.3.1 and Exercise 2.4.B that $\phi$ is
surjective.

\subsection*{Ex 2.4.F}

Suppose that $\text{sh} : \mathcal{F} \to \mathcal{F}^{\text{sh}}$ and
$\text{sh}' : \mathcal{F} \to \mathcal{F}^{\text{sh}'}$ are two sheafifications
of $\mathcal{F}$. Then there exist unique morphisms $f :
	\mathcal{F}^{\text{sh}} \to \mathcal{F}^{\text{sh}'}$ $g :
	\mathcal{F}^{\text{sh}'} \to \mathcal{F}^{\text{sh}}$ such that
\[
	\text{sh}' = f \circ \text{sh}, \,
	\text{sh} = g \circ \text{sh}'.
\]
It follows that
\[
	\text{sh} = g \circ f \circ \text{sh},
\]
and by considering the sheafification diagram with $\mathcal{G} =
	\mathcal{F}^{\text{sh}}$, $f = \id$, we see that $g \circ f = \id$ by the
uniqueness constraint. Hence $g, f$ are isomorphisms.

\subsection*{Ex 2.4.G}

Let $\text{sh}_\mathcal{F}, \text{sh}_{\mathcal{G}}$ be the sheafification
morphisms. Then $\text{sh}_{\mathcal{G}} \circ \phi$ is a morphism from
$\mathcal{F}$ to the sheaf $\mathcal{G}^{\text{sh}}$, and there exist a unique
morphism of sheaves $\phi^{\text{sh}} : \mathcal{F}^{\text{sh}} \to
	\mathcal{G}^{\text{sh}}$ such that we get a commuting square
\[
	\phi^{\text{sh}} \circ \text{sh}_{\mathcal{F}}
	=
	\text{sh}_{\mathcal{G}} \circ \phi.
\]
Given another presheaf $\mathcal{H}$, and a morphism $\psi : \mathcal{G} \to
	\mathcal{H}$, we can construct a rectangle diagram of two commuting squares and
quickly read that $(\psi \circ \phi)^{\text{sh}} = \psi^{\text{sh}} \circ
	\phi^{\text{sh}}$ from which it follows that sheafification respects
composition. By drawing a commuting square and invoking uniqueness it also
quickly follows that $\id^{\text{sh}} = \id_{\mathcal{F}^{\text{sh}}}$, and
we've verified that sheafification is a functor.

\subsection*{Ex 2.4.H}

It's immediate that the restriction maps are well-behaved, and so we dedicate
our efforts to verifying the identity and gluability axioms. \\

We begin with identity. Suppose that $U_i, i \in I$ is an open cover of $U$,
and that $f = (f_p \in \mathcal{F}_p)_{p \in U} \in \mathcal{F}(U)$ is such
that $\restr{f}{U_i} = 0$. Then $f_p = 0_p$ for all $p \in U_i$ and all $i \in
	I$. Since the $U_i$ cover $U$, it follows that $f_p = 0_p$ for all $p \in U$,
and $f = 0$. \\

We continue and show gluability. Suppose that $U_i, i \in I$ is an open cover
of $U$, and that $f_i \in \mathcal{F}(U_i)$ are such that $\restr{f_i}{U_i \cap
		U_j} = \restr{f_j}{U_i \cap U_j}$ for all $i, j \in I$. Then $(f_i)_p =
	(f_j)_p$ for all $i, j \in I$ and $p \in U_i \cap U_j$. It follows that we can
define $f = ((f_i)_p \in \mathcal{F}_p)_{p \in U}$ where we take $i \in I$ such
that $p \in U_i$, and it doesn't matter which $i$ we take since if both $U_i$
and $U_j$ contain $p$, then $(f_i)_p = (f_j)_p$. This $f$ clearly restricts to
$f_i$ and we are done.

\subsection*{Ex 2.5.A}

Let $\mathcal{B}$ be a basis for $X$. Then let the $\mathcal{B}$-stalk at $p$
be defined as
\[
	\mathcal{O}_{\mathcal{B}, p}
	=
	\{
	(a, B_i) \in
	\mathcal{O}_X(B_i) \times \mathcal{B}
	\}
	/ \sim
\]
where $(a, B_i) \sim (a', B_i')$ if there exist some $B_j \in \mathcal{B}$ such
that $\restr{a}{B_j} = \restr{a'}{B_j}$.

We will show that the $\mathcal{B}$-stalks of $X$ are equal to the stalks at
$X$, and that sets of compatible germs of germs in $\mathcal{B}$-stalks are
precisely the sets of compatible germs of germs in classical stalks, from which
it follows that a basis will be enough to define the stalks of a sheaf. After
this, we will use Exercise 2.4.B to recover $\mathcal{F}$ from the
$\mathcal{B}$-sheaf. \\

Let $p \in X$ and $(a, U), (b, V) \in \mathcal{F}_{X, p}$ be two elements in
the stalk at $p$. Let $B_U, B_V$ be two basis elements containing $p$ and
contained in $U$ and $V$ respectively. Then $(a, U) \sim (a, B_U)$ and $(a, V)
	\sim (a, B_V)$, and so $(a, U), (b, V)$ may be identified with elements in
$\mathcal{F}_{\mathcal{B}, p}$. \\

Moreover, suppose that the germs are equivalent $(a, U) \sim (b, V)$ in the
stalk at $p$. Then we can find some open $W$ containing $p$ and contained in $U
	\cap V$ such that $\restr{a}{W} = \restr{b}{W}$, and there is some basis
element $B_W$ containing $p$ contained in $W \cap B_u \cap B_V$. It follows
that $\restr{a}{B_W} = \restr{b}{B_W}$, and the two germs are equivalent in the
$\mathcal{B}$-stalk at $p$ as well. \\

It's immediate that elements of the $\mathcal{B}$-stalk can be identified with
elements of the classical stalk, and that they are equivalent in the stalk
whenever they are equivalent in the $\mathcal{B}$-stalk. Hence the two ways of
defining the stalk at $p$ are the same, and $\mathcal{F}_{X, p} =
	\mathcal{F}_{\mathcal{B}, p}$. \\

Finally, suppose that $U$ is open in $X$ and that $(a_p)_{p \in U}$ is a
compatible set of germs. Then there exist a cover $U_i, i \in I$ and elements
$s^i \in \mathcal{F}(U_i)$ such that $s^i_q = a_q$ for all $q \in U_i$. Now let
$\mathcal{B}^{i} \subset \mathcal{B}$ be a cover of each $U_i$ by basis
elements. Then for each $p \in U$, there is some $i \in I$ and $B_{j}^{i} \in
	\mathcal{B}^{i}$ such that $p \in B_j^{i}$, $s^i_{q} = a_q$ for all $q \in
	B_j^{i}$. Hence $(a_p)_{p \in U}$ is a compatible $\mathcal{B}$-germs. For the
other direction, it's immediate that compatible sets of $\mathcal{B}$-germs
form compatible sets of germs. \\

Now, suppose we are given the data $X, \mathcal{B}$ and $\mathcal{F}_{B_i}$ for
all $B_i \in \mathcal{B}$, and we wish to recover $\mathcal{F}$ for all of $X$.
We will construct a sheaf $\mathcal{F}'$ which we will show is isomorphic to
$\mathcal{F}$. We will assume we are working with sheaves of rings, but the
construction is valid in other categories also. Let $U$ be open in $X$, and let
$\mathcal{F}'(U)$ be the set of compatible germs on $U$ (which can be obtained
from $\mathcal{B}$ as above). Then by Exercise 2.4.B, $\mathcal{F}'(U)$ is
isomorphic to $\mathcal{F}(U)$ as a set, and we may just as well let
$\mathcal{F}'(U)$ inherit the ring structure of $\mathcal{F}(U)$. Similarly, we
let the restriction maps of $\mathcal{F}'$ be inherited from $\mathcal{F}$.
It's immediate from our construction that $\mathcal{F}' \cong \mathcal{F}$.

\subsection*{Ex 2.5.B}

We'll begin by verifying injectivity. Let $a \in F(B)$. Then $(a_p)_{p \in B} =
	0$ implies that we have open sets $p \in B_p \subset B$ such that
$\restr{a}{B_p} = 0$, hence $a = 0$ by gluability of $F(B)$. \\

As for surjectivity, let $(a_p)_{p \in B} \in \mathcal{F}(B)$. Then by
definition, we have open sets for all $p \in B$ satisfying $p \in B_p \subset
	B$ and $s^p \in F(B_p)$ such that $s^p_q = a_q$ for all $q \in B_p$. It follows
from injectivity that the $s^p, s^{p'}$ agree on intersections $B_p \cap
	B_{p'}$ since they have the same germs here. Gluability now gives us an element
$a \in F(B)$ which gets mapped to $(a_p)_{p \in B}$.

\subsection*{Ex 2.5.C}

\subsection*{(a)}

Morphisms of sheaves are determined by their induced maps on stalks by Exercise
2.4.C, and every stalk lies in some basic open set, hence morphisms are
determined by their values on a basis.

\subsection*{(b)}

Maybe later...

\subsection*{Ex 2.5.E}

Let $\mathcal{B}^i$ be a basis for each $U_i$, and $\mathcal{B} = \bigcap_{i
		\in I} \mathcal{B}^i$. Then define a sheaf on $\mathcal{B}$ by setting
\[
	\mathcal{F}_X(B^i) = \mathcal{F}_{U_i}(B^i)
\]
whenever $B^i \in \mathcal{B}^i$. This is well-defined since if $B^i \in U_j$
for all $j \in J$, we have isomorphisms between all $U_j$ and the cocycle
condition assures that they define equivalence classes such that all rings can
be simultaneously identified. \\

It is now more or less immediate that $\mathcal{F}_X$ forms a sheaf on the
basis $\mathcal{B}$, since every sheaf axiom can be checked on some $U_i$ due
to the fact that every basis element is properly contained in some $U_i$. More
specifically, if $B = \bigcup_{j \in L} B^j$ then we have some $i \in I$ such
that $B \in U_i$ and identity and gluability is inherited from
$\mathcal{F}_{U_i}$.


\subsection*{Ex 2.7.A}

Let $U' \subset U$ in $X$. Then the diagram $\mathcal{O}_Y(V), V \supset U$
maps naturally to the diagram $\mathcal{O}_Y(V), V \supset U'$ and hence to the
colimit of the diagram $\mathcal{O}_Y(V), V \supset U'$. Any natural map from
the diagram $\mathcal{O}_Y(V), V \supset U$ to another ring must factor through
the colimit of $\mathcal{O}_Y(V), V \supset U$. Hence we get a map from the
colimit of $\mathcal{O}_Y(V), V \supset U$ to the colimit of $\mathcal{O}_Y(V),
	V \supset U'$, which then gives us our restriction map
$\pi^{-1}_{\text{pre}}\mathcal{O}_Y(U) \to
	\pi^{-1}_{\text{pre}}\mathcal{O}_Y(U')$. \\

It's clear that these maps all compose from the universal property of the map
factoring through the colimit. \\

For an example where the sheaf condition fails: Let $X = \{a, b\}$, $Y = \R$
with the euclidean topology and $\mathcal{O}_{\R}(U) = \R$ be the constant
sheaf. Then $\pi_{\text{pre}}^{-1}\mathcal{O}_{Y}(U) = \R$ for all opens sets
$U \subset X$. Then consider $0 \in
	\pi_{\text{pre}}^{-1}\mathcal{O}_{Y}(\{a\})$ $1 \in
	\pi_{\text{pre}}^{-1}\mathcal{O}_{Y}(\{b\})$. These sections vacuously agree on
overlaps, yet clearly they don't glue together to a global section.

\subsection*{Ex 2.7.B}

From the universal property of sheafification it follows that
we have a natural isomorphism
\[
	\Hom_{X}(\pi^{-1}\mathcal{G}, \mathcal{F})
	\cong
	\Hom_{X}(\pi^{-1}_{\text{pre}}\mathcal{G}, \mathcal{F}).
\]
Thus it will suffice to illustrate a natural isomorphism
\[
	\Hom_{X}(\pi^{-1}_{\text{pre}}\mathcal{G}, \mathcal{F})
	\cong
	\Hom_{Y}(\mathcal{G}, \pi_{*}\mathcal{F}).
\]
Let $g \in \Hom_{Y}(\mathcal{G}, \pi_{*}\mathcal{F})$ and define
$\tau g : \pi^{-1}_{\text{pre}}\mathcal{G} \to \mathcal{F}$
by sending a representative $\overline{(a, V)} \in \colim_{V \supset \pi(U)} \mathcal{G}(V)$
according to
\[
	\tau g
	:
	\overline{(a, V)}
	\mapsto
	\text{res}_{\pi^{-1}(V), U}(g(a)).
\]
This map is well-defined as if $\overline{(a, V)} = \overline{(a', V')}$ there
is some set $V''$ where $a, a'$ agree, and it follows that $g(a), g(a')$ agree
after being restricted to $U \subset \pi^{-1}(V'')$. \\

Now suppose that we have $f : \pi^{-1}_{\text{pre}}\mathcal{G} \to
	\mathcal{F}$. For $U$ open in $Y$ we have
\[
	\colim_{V \supset \pi(\pi^{-1}(U))}
	\mathcal{G}(V)
	=
	\mathcal{G}(U)
\]
and
\[
	\pi_{*}\mathcal{F}(U)
	=
	\mathcal{F}(\pi^{-1}U),
\]
whence it's trivial to define $\tau f : \mathcal{G}
	\to \pi_{*}\mathcal{F}$ according to
\[
	\restr{(\tau f)}{U}
	:
	a
	\mapsto
	\restr{f}{\pi^{-1}(U)}(a).
\]
So in some sense, $\tau f$ is just $f$ but where we've forgotten $f_U$ for all
$U$ such that $\pi(U)$ isn't open in $Y$. Clearly this is functorial in both
$\mathcal{G}$ and $\mathcal{F}$, and $\tau \tau f = f$. We don't show that the
previous map is functorial and has this one as its inverse.

\subsection*{Remark 2.7.3}

\begin{lemma}
	Let $\mathcal{G}$ be a presheaf on $Y$, $S$ be a set, $\mathcal{F}$ be the
	skyscraper sheaf on $Y$ supported at a point $p$ with set $S$. Then there
	is a natural bijection
	\[
		\Hom_{\text{set}}(\mathcal{G}_{p}, S)
		\cong
		\Hom_{\text{presheaf}(Y)}(\mathcal{G}, \mathcal{F})
	\]
\end{lemma}
\begin{proof}
	Let $f : \mathcal{G}_{p} \to S$. Then define $g_U : \mathcal{G}(U) \to
		\mathcal{F}(U)$ to be $0$ when $p \not \in U$, and otherwise to be $g_U : a
		\mapsto f(a_p)$. This clearly commutes with restrictions. \\

	Now suppose that $g : \mathcal{G} \to \mathcal{F}$. Then define $f :
		\mathcal{G}_{p} \to S$ to send $(a, U) \mapsto g_U(a)$. As the map $g$
	commutes with restriction, $f$ is well defined. \\

	It's easy to see that the maps are inverse to each other.
\end{proof}


\subsection*{Ex 2.7.C}

We begin by solving the exercise directly. From the definition of stalks
and $\pi^{-1}_{\text{pre}}$, we have that
\[
	(\pi^{-1}_{\text{pre}}\mathcal{G})_p
	=
	\colim_{U \ni p}
	\colim_{V \supset \pi(U)}
	\mathcal{G}(V),
\]
but for any $V$ containing $q = \pi(p)$, $\pi^{-1}(V)$ is an open set containing $p$,
so the nested colimits simply collapse to
\[
	(\pi^{-1}_{\text{pre}}\mathcal{G})_p
	=
	\colim_{V \supset q}
	\mathcal{G}(V)
	=
	\mathcal{G}_{q}.
\]
Our result now follows from the fact that sheafification preserves stalks. \\


\section*{Ch 3}

\subsection*{Ex 3.2.A}

\subsection*{(a)}

Let $R = \K[\epsilon]/(\epsilon^2)$. The set of prime ideals of $R$ is the set
of prime ideals of $\K[\epsilon]$ containing $(\epsilon^2)$. Hence $\Spec(R) =
	\{(\epsilon)\}$.

\subsection*{(b)}

Let $R = \K[x]_{(x)}$. The set of prime ideals of $R$ is the set of prime
ideals of $\K[x]$ contained in $(x)$. Hence $\Spec(R) = \{(x), (0)\}$.


\subsection*{Ex 3.2C}

Let $R = \Q[x]$. Then $R$ is a PID, hence prime ideals $\mathfrak{p} \in
	\Spec(R)$ correspond to irreducible polynomials in $\Q[x]$. I don't know any
nice way to describe all irreducible polynomials over $\Q[x]$, but we certainly
still do have all prime $(x - q) \in \Spec(R)$ for $q \in \Q$ which trace out a
line.

\subsection*{Ex 3.2D}

Suppose towards a contradiction that the set $Q \subset \K[x]$ of irreducible
polynomials is finite, and let $p = 1 + \prod_{q \in Q} q$. Then $p \equiv 1
	\mod q$ for all $q \in Q$, hence $p \not \in (q)$. Since $p$ isn't a unit
(indeed it's a polynomial of degree $\deg(p) = \sum \deg(q)$), it's contained
in some maximal ideal $p \in (q')$. But then $q'$ is irreducible, and $q' \not
	\in Q$, a contradiction!


\subsection*{Ex 3.2E}

Since $\dim(\C[x, y]) = 2$, any non-maximal non-zero prime ideal has to have
codimension $1$. We claim that every prime $\mathfrak{p}$ of codimension $1$
in a UFD is a principal ideal. \\

Let $R$ be a Noetherian UFD (don't think we need Noetherian, but it simplifies
things). Any prime ideal of $R$ can be generated by irreducible elements, since
if $\mathfrak{p} = (f_1, f_2, \ldots, f_k)$, then some irreducible factor of
every $f_i$ lies in $\mathfrak{p}$ by primality, and these factors generate
$\mathfrak{p}$. \\

Now suppose that $\mathfrak{p} = (f_1, f_2, \ldots, f_k)$ is a prime ideal in
$R$ with $k > 1$ and the $f_i$ form a minimal set of irreducible generators.
Then each $(f_i)$ is a prime ideal of codimension $1$ strictly contained in
$\mathfrak{p}$, and we see that $\mathfrak{p}$ has codimension $\geq 1$. \\

I.e, if $\mathfrak{p}$ is some prime ideal of codimension $1$, then it must
have a minimal set of irreducible generators that only has one element. \\

It follows that every prime ideal of codimension $1$ in $\C[x, y]$ is generated
by an irreducible polynomial.

\subsection*{Ex 3.2.F}

Let $\mathfrak{m}$ be a maximal ideal of $\Kx$. Then $\K \subset
	\Kx/\mathfrak{m}$ is a field extension which is finitely generated as an
algebra (by $x_1, \ldots, x_n$), hence $\Kx/\mathfrak{m}$ has finite dimension
as a $\K$-space by the Nullstellensatz. Since $\K$ is algebraically closed, and
finite dimensional extensions are algebraic, we must have $\K \cong
	\Kx/\mathfrak{m}$ as fields. As $\K \subseteq \Kx/\mathfrak{m}$, we have an
isomorphism $\K \to \Kx/\mathfrak{m}$ which is the identity on $\K$, as this is
surjective, it follows that $x_i = a_i$ in $\Kx/\mathfrak{m}$ for all $x_i$,
hence $\mathfrak{m} = (x_1 - a_1, \ldots, x_n - a_n)$.

\subsection*{Ex 3.2.G}

Since ideals of $A$ are subspaces, $A$ must satisfy both chain conditions.
Hence it's Artinian and Noetherian. The result now follows since Artinian
domains are fields.

\subsection*{Ex 3.2H}

First of, the ideal $I = (x^2 - 2, y^2 - 2)$ is not maximal, or even prime. To
see this, note that $(x + y)(x - y) = x^2 - y^2 = -2 + 2 = 0 \in \Q[x, y] / I$
\\

$(\sqrt{2}, \sqrt{2}), (-\sqrt{2}, -\sqrt{2})$ corresponds to the maximal ideal
$(x - y, y^2 - 2)$ with residue field $\Q[x, y]/(x - y, y^2 - 2) \cong
	\Q[\sqrt{2}]$. \\

$(\sqrt{2}, -\sqrt{2}), (-\sqrt{2}, \sqrt{2})$ corresponds to the maximal ideal
$(x + y, y^2 - 2)$ with residue field $\Q[x, y]/(x + y, y^2 - 2) \cong
	\Q[\sqrt{2}]$. \\

The two residue fields are isomorphic, but not equal, and they differ in
whether $x = y$ or $x = -y$.

\subsection*{Ex 3.2.L}

We begin by showing that localizations and quotients commute. This
follows from the fact that localization is an exact functor, so both the following
sequences are exact,
\[
	\begin{tikzcd}
		0
		\arrow{r} &
		S^{-1}I
		\arrow{r} &
		S^{-1}R
		\arrow{r} &
		S^{-1}(R/I)
		\arrow{r} &
		0 \\
		0
		\arrow{r} &
		S^{-1}I
		\arrow{r} &
		S^{-1}R
		\arrow{r} &
		(S^{-1}R)/(S^{-1}I)
		\arrow{r} &
		0, \\
	\end{tikzcd}
\]
hence the two rightmost modules/rings are isomorphic. \\

Moreover, in $\C[x, y]_x$ we have that $(xy)_x = (y)_x$. Combining these two
facts yield
\[
	(\C[x, y] / (xy))_x
	\cong
	\C[x, y]_x / (xy)_x
	\cong
	\C[x, y]_x / (y)_x
	\cong
	(\C[x, y] / (y))_x
	\cong
	C[x]_x.
\]

\subsection*{Example 3.2.11}
So we have
\[
	\phi : \Spec(\C[a, b]/(b-a^2)) \to \Spec(\C[x,y,z]/(y-x^2, z-y^2))
\]
which sends a maximal ideal
\[
	\phi
	:
	(a - k, b - k^2)
	\mapsto
	(x - k, y - k^2, z - k^4).
\]
Now consider the map
\[
	\psi :
	\C[x,y,z]/(y-x^2, z-y^2)
	\to
	\C[a, b]/(b-a^2)
\]
which sends
\[
	\psi : x \mapsto a, \,
	\psi : y \mapsto b, \,
	\psi : z \mapsto b^2.
\]
Then (as $\psi$ is an algebra homomorphism and fixes $\K$)
\[
	\psi^{-1}(a - k) = x - k, \,
	\psi^{-1}(b - k^2) = y - k^2, \,
	\psi^{-1}(b^2 - k^4) = z - k^4,
\]
and we see that $\psi^{-1}$ coincides with $\phi$ on maximal ideals.

\subsection*{Ex 3.2.O}

Let $\phi : \C[y] \to \C[x]$ be the $\C$-algebra morphism given by $\phi(y) =
	x^2$. Then $\phi^{-1}(x^2 - a) = y - a$, and as $x^2 - a = (x - \sqrt{a})(x +
	\sqrt{a})$, we have $[(y - a)] = \phi^{-1}([x - \sqrt{a}])$ and $[(y - a)] =
	\phi^{-1}([x + \sqrt{a}])$. Moreover, if $\mathfrak{p}$ is a prime ideal in
$\C[x]$ such that $[(y - a)] = \phi^{-1}(\mathfrak{p})$, then $\mathfrak{p}$
must contain $x^2 - a$, and as $\C[x]$ is a PID, we see that we've already
found all such $\mathfrak{p}$.

\subsection*{Ex 3.2.P}

\subsubsection*{(a)}

We prove the statement for general rings $A, B$ and a morphism $\phi : B \to
	A$. Note that if $\phi(J) \subseteq I$, then $\phi$ induces a map $B/I \to
	A/J$, and we get a map $\spec(A/J) \to \spec(B/I)$.

\subsubsection*{(b)}

Suppose that $\phi : \K[y_1, y_2, \ldots, y_m] \to \Kx$ be given by $\phi : y_i
	\mapsto f_i$. Then let $a = (x_1 - a_1, x_2 - a_2, \ldots, x_n - a_n)$. Then
$\phi(y_i - f_i(a_1, a_2, \ldots, a_n)) = f_i(x_1, x_2, \ldots, x_n) - f_i(a_1,
	a_2, \ldots, a_n) \in a$ (the containment in $a$ follows after evaluating at
$(a_1, a_2, \ldots, a_n)$). Hence
\[
	(y_1 - f_1(a_1, a_2, \ldots, a_n), y_2 - f_2(a_1, a_2, \ldots, a_n), \ldots, y_m - f_m(a_1, a_2, \ldots, a_n))
	\subseteq
	\phi^{-1}(a),
\]
and equality follows from $(y_1 - f_1(\bm{a}), y_2 - f_2(\bm{a}), \ldots, y_m -
	f_m(\bm{a}))$ being a maximal ideal.

\subsection*{Ex 3.2.Q}

The fiber $\pi^{-1}([p])$ consists of the set of all ideals in $\Z[x_1, x_2,
		\ldots, x_n]$ containing $p$. Any such ideal can be generated by $p$ along with
polynomials where all coefficients are $< p$, since we can subtract any terms
of the form $pk x^d$. This gives us a map $\pi^{-1}([p]) \to \spec(\F_p[x_1,
		x_2, \ldots, x_n])$. \\

Moreover, this map is invertible as follows. Given some ideal $I \in
	\spec(\F_p[x_1, x_2, \ldots, x_n])$, and generators $f_1, f_2, \ldots, f_m$ for
$I$ - pick representatives $\overline{f}_i$ for each $f_i$ in $\Z[x_1, x_2,
		\ldots, x_n]$, and consider the ideal $J = (p, \overline{f}_1, \ldots,
	\overline{f}_n)$. \\

It's easy to see that these two maps are mutually inverse each other.

\subsection*{Ex 3.4.F}

In $R \to R/I$, we have that the preimage of $\sqrt{0}$ is $\sqrt{I}$, and as
$\sqrt{0}$ is the intersection of all prime ideals in $R/I$, which in turn
correspond to all prime ideals in $R$ containing $I$, the statement follows.

\subsection*{Ex 3.4.G}

In a PID, all non-zero primes are maximal and are in one to one correspondence
with irreducible elements. Hence, $\A^1_k$ corresponds to all irreducible
polynomials in $\K[x]$. Given some set of functions $S \subset \K[x]$, $V(S)$
consists of all the common prime factors of elements in $S$. I.e $V(S)$ is a
finite set of points. So, the situation is much like that of $\A^1_{\C}$, where
the only closed subsets are finite sets of (non-zero) points, and no closed set
other than the whole space contains $(0)$. Hence every open set other than
$\emptyset$ contains $(0)$ as claimed in the exercise.

\subsection*{Ex 3.4.H}

Let $V(I)$ be a closed set in $B$. Our objective is to show that
$(\phi^*)^{-1}V(I)$ is a closed set in $A$. We have
\begin{align*}
	(\phi^*)^{-1}(V(I))
	 & =
	\{
	\mathfrak{p} \in \spec(A) : \phi^*(\mathfrak{p}) \in V(I)
	\}   \\
	 & =
	\{
	\mathfrak{p} \in \spec(A) : \phi^{-1}(\mathfrak{p}) \in V(I)
	\}   \\
	 & =
	\{
	\mathfrak{p} \in \spec(A) : I \subseteq \phi^{-1}(\mathfrak{p})
	\}.
\end{align*}
Now, if $I$ is contained in $\phi^{-1}(\mathfrak{p})$, then certainly the ideal
generated by $\phi(I)$ in $A$ will be contained in $\mathfrak{p}$ and vice versa,
so we have
\[
	\{
	\mathfrak{p} \in \spec(A) : I \subseteq \phi^{-1}(\mathfrak{p})
	\}
	=
	\{
	\mathfrak{p} \in \spec(A) : \phi(I)A \subseteq \mathfrak{p}
	\}
	=
	V(\phi(I)A)
\]
which is a closed set in $A$.

\subsection*{Ex 3.4.I}

\subsubsection*{(a)}

$\Spec(B/I)$ corresponds to all prime ideals of $B$ containing $I$, hence is
given by $V(I)$. Meanwhile, $\Spec(B_f)$ contains all prime ideals of
$\Spec(B)$ which don't meet $f$, I.e $\Spec(B) \setminus V(f)$. Finally,
$\Spec(\Q) = \{(0)\}$ which is neither closed nor open as a set in $\Spec(\Z)$,
it's closure is all of $\Spec(\Z)$, whilst it's complement isn't closed since
the closed subsets of $\Spec(\Z)$ are either the whole space or finite.

\subsubsection*{(b)}

Let $V(J) \subseteq \Spec(B/I)$ be a closed subset, and suppose that
$\mathfrak{p} \in V(J) = V(J \cup \{0\})$. Then $\phi^{-1}(J) \subseteq
	\phi^{-1}(\mathfrak{p})$, so $\phi^{-1}(\mathfrak{p}) \in V(\phi^{-1}(J \cup
	\{0\})) = V(\phi^{-1}J) \cap V(I)$. Now let $\mathfrak{q} \in V(\phi^{-1}(J)
	\cap V(I))$. Then $\phi(\mathfrak{q})$ is a prime ideal in $B/I$ which contains
$\phi\phi^{-1}(J)$, and $\phi\phi^{-1}(J) = J$ since $\phi$ is surjective. Hence
$\phi(\mathfrak{q}) \in V(J)$. \\

Let $V(J) \subseteq \Spec(B_f)$ be a closed subset, and suppose that
$\mathfrak{p} \in V(J)$. Then $\phi^{-1}(\mathfrak{p})$ is a prime ideal in $B$
which contains $\phi^{-1}(J)$ and doesn't meet $f$, I.e it lies in
$V(\phi^{-1}(J)) \setminus V(f)$. Similarly, let $\mathfrak{q} \in
	V(\phi^{-1}(J)) \setminus V(f)$. Then $\phi(\mathfrak{q})$ is a prime ideal in
$B_f$ which contains $\phi\phi^{-1}(J)$. But every ideal of $B_f$ is an
extended ideal (Atiyah Macdonald - Prop 3.11.i), so the ideal generated by
$\phi\phi^{-1}(J)$ is $J$ (AMD - Prop 1.17.iii), hence $J \subseteq
	\phi(\mathfrak{q})$ and $\phi(\mathfrak{q}) \in V(J)$.

\subsection*{Ex 3.4.J}

$f$ vanishes on $V(I)$ if and only if it vanishes on all prime ideals
containing $I$ if and only if it's contained in all prime ideals containing $I$
if and only if it's contained in $\sqrt{I}$ by Exercise 3.4.F.

\subsection*{Ex 3.5.A}

Let $U \in \Spec(A)$ be an open set, and suppose that $U = \Spec(A) \setminus
	V(J)$ (Any closed set can be written as $V(J)$ by Ex 3.4.C with $J$ an ideal).
Then let $f_i, i \in I$ be some generating set of $J$. Then
\[
	U
	=
	\Spec(A) \setminus V\left( \bigcup_{i \in I} f_i \right)
	=
	\Spec(A) \setminus \bigcap_{i \in I} V\left(f_i\right)
	=
	\bigcup_{i \in I} \left(\Spec(A) \setminus V\left(f_i\right)\right)
	=
	\bigcup_{i \in I} D_{f_i}.
\]

\subsection*{Ex 3.5.B}

From the previus exercise, we have that
\[
	\bigcup_{i \in I} D_{f_i}
	=
	\Spec(A) \setminus V\left(\bigcup_{i \in I} f_i\right).
\]
Now, $A = (f_i, i \in I)$, if and only if $V(f_i, i \in I) = \emptyset$ (using
Zorn's Lemma) if and only if $\bigcup_{i \in I} D_{f_i} = \Spec(A)$.

\subsection*{Ex 3.5.C}

We have that $(f_i, i \in I) = A$ if and only if there are finitely many $a_i
	\in A$, $i \in J$ such that $\sum_{i \in J} a_i f_i = 1$, and these $f_i, i \in
	J$ therefore generate $A$ as an ideal, so $\bigcup_{i \in J} D_{f_i} = A$ by Ex
3.5.B.

\subsection*{Ex 3.5.D}

If $\mathfrak{p} \in D(f) \cap D(g)$ then $\mathfrak{p}$ contains neither $f,
	g$ and primality, not $fg$ hence $\mathfrak{p} \in D(fg)$. The other direction
is trivial.

\subsection*{Ex 3.5.E}

$D(f) \subset D(g)$ if and only if all prime ideals not meeting $f$ also don't
meet $g$ if and only if all prime ideals containing $g$ contain $f$ as well if
and only if $f \in \sqrt{(g)}$ (all prime ideals containing $g$ contain $(g)$,
and the intersection of all prime ideals containing $(g)$ is $\sqrt{(g)}$). \\

Now, $f \in \sqrt{g}$ if and only if $f^n \in (g)$ if and only if $gh = f^n$ if
and only if $\frac{gh}{f^n} = 1$ in $A_f$ if and only if $g$ is invertible in
$A_f$.

\subsection*{Ex 3.6.A}

Let $A = \prod_{i = 1}^{n} A_i$, and $\mathfrak{p}$ be a prime ideal of $A$.
Then $A/\mathfrak{p}$ is an integral domain and it follows that all but one
$A_i$ is mapped to $0$ in the quotient. Thus all prime ideals of $A$ are of the
form
\[
	\mathfrak{p}
	=
	A_1 \times \ldots \times A_{k - 1} \times \mathfrak{p}_k
	\times A_{k + 1} \times \ldots \times A_n
\]
for some prime ideal $\mathfrak{p}_k$ of $A_k$ and $k \in [1..n]$. This gives
us a bijection between $\coprod_{i = 1}^{n} \Spec(A_i)$ and $\Spec(A)$, where
each $\Spec(A_i)$ is mapped onto the distinguished subset $D(e_i)$ where
\[
	e_i = (0, \ldots, 0, 1, 0, \ldots, 0)
\]
has $0$ in all but the $i$-th coordinate, and $1$ in the $i$-th coordinate. I.e
the $\Spec(A_i)$ are open in $\Spec(A)$. Moreover, this bijection clearly
respects inclusions of prime ideals, and we have
\[
	\Spec\left(
	\prod_{i = 1}^{n} A_i
	\right)
	=
	\coprod_{i = 1}^{n} \Spec(A_i)
\]
as topological spaces.

\subsection*{Ex 3.6.B}

\subsubsection*{(a)}

Let $U \subset X$ be a non-empty open set in the irreducible topological space
$X$. Then let $V = X \setminus U$. We have that $V \cup U = X$, hence $V \cup
	\overline{U} = X$. As $U$ is non-empty, $V \not = X$, whence $\overline{U} = X$
by irreducibility of $X$.

\subsubsection*{(b)}

Suppose that $Z = (A \cap Z) \cup (B \cap Z)$ with $A, B$ closed in $X$ (this
is exactly what a reduction of $Z$ into two closed subsets is in the subspace
topology). Then $A \cup B$ is closed in $X$, and contains $Z$. Hence
$\overline{Z} \subseteq A \cup B$ since $\overline{Z}$ is the smallest closed
set containing $Z$. It follows that $\overline{Z} = (A \cap \overline{Z}) \cup
	(B \cap \overline{Z})$. \\

Now, $Z$ is irreducible if and only if whenever $Z = (A \cap Z) \cup (B \cap Z)$
we have either $Z = (A \cap Z)$ or $Z = (B \cap Z)$, which is equivalent to
$Z \subseteq A$ or $Z \subseteq B$. But again, as $\overline{Z}$ is contained
in every closed subset containing $Z$, this is equivalent to $\overline{Z} \subseteq A$
or $\overline{Z} \subseteq B$, I.e irreducibility of $\overline{Z}$.

\subsection*{Ex 3.6.C}

If $A$ is an integral domain, then every prime ideal contains the minimal prime
ideal $(0)$. Since all closed subsets of spectra are of the form $V(S)$, it
follows that any closed subset $V \subset \Spec(A)$ which contains $[(0)] \in
	V$, must contain every other prime ideal as well. Now, $V \cup U = \Spec(A)$
with $V, U$ closed implies either $V = \Spec(A)$ or $U = \Spec(A)$ since one of
these sets must contain $[(0)]$.

\subsection*{Ex 3.6.D}

Proving the contrapositive is trivial. If $X = U \cup V$ where $U, V$ are
non-trivial, open and disjoint, then $U, V$ are closed and non-trivial as well,
hence $X$ is reducible.

\subsection*{Ex 3.6.E}

The union of the $x$ and $y$-axes in $\A^2_{\C}$ seems like a good candidate.
The corresponding ring is given by $A = \C[x, y]/(xy)$. This is reducible as it
isn't an integral domain. To show that it's connected, we will show that there
are no idempotents except $1$. Suppose $f \in A$ is such that $f^2 = f$. Then
if $f$ has any pure $x^m$ or $y^m$ term, consider the term with highest degree,
$f^2$ would have a $x^{2m}$ or $y^{2m}$ term since there couldn't be
cancelation due the maximality of degree. It follows that $f^2 \not = f$. Hence
$f$ is constant, and $f = 1$ since $\K$ doesn't have idempotents $\not = 1$.

\subsection*{Ex 3.6.G}

\subsubsection*{(a)}

Let $U_i, i \in I$ be a cover of $\Spec(A)$. Then each $U_i$ can be covered by
distinguished open sets of $\Spec(A)$ which lie inside $U_i$, since these form
a basis for the topology. Exercise 3.5.C tells us that each such cover by
distinguished open sets admits a finite subcover, and by picking the $U_i$
corresponding to the distinguished open sets forming the finite subcover, we
obtain a finite subcover of $U_i, i \in I$.

\subsubsection*{(b)}

Let $U = \Spec(A) \setminus V(\mathfrak{m})$. Then
\begin{align*}
	U
	 & =
	\Spec(A) \setminus V(\mathfrak{m})                              \\
	 & =
	\Spec(A) \setminus \bigcap_{i = 0}^{\infty} V(x_i)              \\
	 & =
	\bigcup_{i = 0}^{\infty} \left(\Spec(A) \setminus V(x_i)\right) \\
	 & =
	\bigcup_{i = 0}^{\infty} D(x_i).
\end{align*}
Moreover no subcover, finite or otherwise, will do since for example
\[
	[(x_1, x_2, x_3, \ldots)]
	\not \in
	\bigcup_{i = 1}^{\infty} D(x_i).
\]


\subsection*{Ex 3.6.H}

\subsubsection*{(a)}

Let $X = \bigcap_{i = 1}^{r} X_i$ with each $X_i$ quasicompact, and
$\mathcal{U} = \{U_i\}_{i \in I}$ be an open cover for $X$. For each $i \in
	[1..r]$, let $\mathcal{U}_i$ be the restriction of $\mathcal{U}$ to $X_i$. Then
each $\mathcal{U}_i$ admits a finite subcover with indexing set $J_i \subset
	I$, and it follows that $X$ is covered by the finite subcover $\{U_i\}_{i \in
	J}$ with $J = \bigcap_{i = 1}^{r} J_i$.

\subsubsection*{(b)}

Let $X$ be quasicompact and $V \subset X$ a closed non-trivial subset. Let
$\mathcal{U} = \{U_i \cap V\}_{i \in I}$ be a open cover of $V$. Then
$\mathcal{U} \cup \{X \setminus V\}$ is an open cover for $X$, hence admits a
finite subcover, which is a finite subcover for $V$ as well. So $V$ is
quasicompact.

\subsection*{Ex 3.6.I}

Non-maximal prime ideals are not closed points, since if $\mathfrak{p} \in
	V(S)$, then $S \subseteq \mathfrak{p}$, and $S \subseteq \mathfrak{m}$ for any
maximal ideal containing $\mathfrak{p}$, hence $\mathfrak{m} \in V(S)$.
Meanwhile maximal ideals are closed, as $V(\mathfrak{m}) = [(\mathfrak{m})]$. \\

In particular, if $\mathfrak{p}$ lies in some closed set, then all prime ideals
containing $\mathfrak{p}$ must lie in that set as well.

\subsection*{Ex 3.6.J}

\subsubsection*{(a)}


If $A = k[g_1, \ldots, g_n]$ is a finitely generated $k$-algebra, then so is
$A_f = A[g_1, \ldots, g_n, 1/f]$. Now suppose that $\mathfrak{m}_f$ is a
maximal ideal of $A_f$, and let $\mathfrak{m}$ be its preimage in $A$. Then
$A_f / \mathfrak{m}_f$ is a finite $k$-extension by the Nullstellensatz, and we
will show that $A/\mathfrak{m}$ is as well. This follows readilly by the fact
that the kernel of the localization map $A \to A_f$ composed before the
quotient map $A_f \to A_f / \mathfrak{m}_f$ is exactly $\mathfrak{m}$ by
construction. Hence $A/\mathfrak{m}$ injects into $A_f / \mathfrak{m}_f$,
whence
\[
	\dim_k(A/\mathfrak{m})
	\leq
	\dim_k(A_f/\mathfrak{m}_f),
\]
and $\mathfrak{m}$ is a maximal ideal in $A$ by Exercise 3.2.G. \\

Thus, every $D(f)$ contains a closed point, I.e every open set of $\Spec(A)$
contains a closed point. It follows that no closed set except $\Spec(A)$
contains all closed points, and the closed points are dense in $\Spec(A)$.

\subsubsection*{(b)}

Let $A = k[x]_{(x)}$. Then $\Spec(A) = \{(0), (x)\}$ and as $[(x)]$ is the only
closed point, the closure of all closed points is just $[(x)] \not = \Spec(A)$
again.

\subsection*{Ex 3.6.K}

Suppose that $f, g \in A$ take the same values on all closed points of
$\Spec(A)$. Then as the set $V(f - g)$ is closed in $\Spec(A)$ and contains the
dense set of all closed points, $V(f - g) = \Spec(A)$, and as $A$ is reduced,
$f = g$.

\subsection*{Ex 3.6.L}

See remark from Ex 3.6.I above.

\subsection*{Ex 3.6.N}

We prove the contrapositive. If $q \in X$, is such that some neighbourhood $U
	\ni q$ doesn't contain $p$, then $X \setminus U$ is a closed set which contains
$p$, hence $\overline{\{p\}} \subseteq X \setminus U$, and in particular, $q
	\not \in \overline{\{p\}}$. \\

In particular, this shows that $\overline{\{p\}}$ is dense, but this is fairly
clear anyhow. \\

If $r \not \in K$, then $X \setminus K$ is an open set containing $r$ but not
$p$.

\subsection*{Ex 3.6.P}

First of all, the closure of any point must be irreducible by minimality of the
closure. In §3.4.5 it is shown that the closed subsets of $\Spec(\C[x, y])$ are
either the entire space, or finite unions of closure of points. So, given a chain
\[
	Z_0 \supset Z_1 \supset \ldots,
\]
where $Z_0 \not = Z_1$, we know that $Z_1$ is a finite union of closures of
points, hence admits only a finite amount of proper closed subsets. It follows
that the chain must stabilize.

\subsection*{Ex 3.6.Q}

Let $C$ be a connected component. Then $C$ is a union of irreducible components
in the subspace topology. Moreover, the irreducible components of $C$ are
closed and irreducible in $X$ since $C$ is closed by Remark 3.6.13. They are
also maximal since $C$ is open. Indeed, if $X_C$ is an irreducible component of
$C$, and $V \supset X_C$ is closed, then $V \cap (X \setminus C)$ is closed, so
$V$ is not irreducible unless $V \subseteq C$.

\subsection*{Ex 3.6.R}

PID's are UFD's, and so the ideals properly containing $(x) = (x_1x_2\ldots
	x_m)$ with each $x_i$ irreducible are all the combinations of $x_i$. I.e there
are finitely many such ideals, hence each chain must stabilize.

\subsection*{Ex 3.6.T}

We prove the contrapositive. Any closed set in $\Spec(A)$ is of the form $V(I)$
with $I$ a radical ideal. If
\[
	V(I_1) \supsetneq V(I_2) \supsetneq \ldots
\]
is a strictly decreasing sequence with each $I_i$ radical, then
\[
	I_1 \subsetneq I_2 \subsetneq \ldots
\]
is a strictly increasing sequence of ideals by reverse inclusion. \\

The ring $\K[x_1,x_2, \ldots]$ has a non-Noetherian spectrum since it has
infinite strictly ascending chains of prime ideals, which turn into infinite
strictly decreasing chains of closed irreducible sets under $\Spec$.

\subsection*{Ex 3.6.U}

First of all, if $X$ is Noetherian, and $U$ is an arbitrary subset of $X$, then
$U$ is Noetherian as well. To see this, let
\[
	U \cap U_1 \supsetneq U \cap U_2 \supsetneq \ldots
\]
be an infinite strictly decreasing chain of closed sets in $U$. Then
\[
	U_1 \supsetneq U_1 \cap U_2 \supsetneq U_1 \cap U_2 \cap U_3 \ldots
\]
is an infinite strictly decreasing chain of closed sets in $X$. \\

Now, suppose that $X$ is Noetherian and $U$ is an arbitrary subset of $X$. Let
$\mathcal{U} = \{U_i\}_{i \in I}$ be an open cover of $U$. Then for each $U_i
	\in \mathcal{U}$, let $V_i = U \setminus U_i$. Then every $V_i$ is closed in
$U$, and their intersection is empty. Now, first pick some $W_0 = V_0$. Then
pick a $V_1$ which doesn't contain $W_0$. Such $V_1$ exists since the $V_i$
have empty intersection. Now let $W_1 = W_0 \cap V_1$. If $W_1 \not =
	\emptyset$, continue and pick $W_2$ similarly. As $X$ is Noetherian, so is $U$,
hence the chain of $W_i$'s must stabilize, but by construction this happens
only when some $W_n = \emptyset$, giving us a finite subset of $V_i$'s with
empty intersection, whence the corresponding subset of $U_i$'s is a finite
subcover of $\mathcal{U}$.


\subsection*{Ex 3.6.X}

Induction and Ex 3.6.W.

\subsection*{Ex 3.6.Y}

Finitely generated modules are quotients of free modules, which are Noetherian
by Ex 3.6.X, and their quotients are again Noetherian by Ex 3.6.W.

\subsection*{Ex 3.7.A}

Let $f \in I(S)$. Then $f$ vanishes on the $x$ axis, hence is divisible by $y$
and vanishes on $(0, 1)$, hence lies in $(x, y - 1)$. It follows that $f \in
	(y) \cap (x, y-1) = (xy, y^2 - y)$, and it's easy to see that $(xy, y^2 - y)
	\subseteq I(S)$, so there must be an equality.

\subsection*{Ex 3.7.B}

The axes have ideals $(y, z), (x, z), (x, y)$ respectively, and their
intersection is $(yx, yz, xy)$. This is a radical ideal as the quotients has no
nilpotents since elements of $\C[x, y, z]/(yx,yz,xy)$ have leading terms which
are pure powers of either $x, y, z$, and are not nilpotent.

\subsection*{Ex 3.7.E}

$f \in I(V(J))$ if and only if $f$ vanishes on $V(J)$ if and only if $f$ lies
in all prime ideals containing $J$ if and only if $f$ lies in $\sqrt{J}$. \\

Using the old definitions from Gathmann, where $V(J)$ is the set of zeros in
$\K$ of the ideal $J \in \Kx$, this statement required $\K$ algebraically
closed. But now we don't. Let's see why. \\

Let $J$ be an ideal in $\R[x]$, and $f \in I(V(J))$. Then $f$ vanishes on $V(J)$,
and w

\subsection*{Ex 3.7.D}

Over $\C$, $V(J)$ corresponds to the intersection of the unit circle with the
line $y = 1$. I.e geometrically, we should have that $V(J)$ corresponds to the
point $(0, 1)$, which is given by the maximal ideal $[(x, y - 1)]$. It is
indeed the case that $J \subset (x, y - 1)$ since $x^2 + y^2 - 1 = x^2 + (y -
	1)(y + 1)$. To see that no other ideals are contained in $V(J)$, just note that
$\C[x, y]/J \cong \C[x]/(x^2)$ and the only prime ideal in $\C[x]/(x^2)$ is $(x)$.
It follows that $V(J) = [(x, y - 1)]$, and that $I(V(J)) = (x, y - 1)$, hence
an element as requested may be given as
\[
	x \in I(V(J)) \setminus J.
\]
Note that $x \in \sqrt{J}$ as expected (or proved really), since $x^2 = x^2 +
	y^2 - 1 - (y-1)(y+1) \in J$.

\subsection*{Ex 3.7.F}

Let $V(S) \subset \Spec(A')$ be an closed set. We can suppose that $V(S) =
	V(J)$ with $J$ a radical ideal. As $V(J) = \Spec(A'/J)$, we might as just well
show that for some given reduced ring $A$, $\Spec(A)$ is irreducible if and
only if $A$ is an integral domain. One direction is covered by Exercise 3.6.C,
so we focus on the other direction. \\

Let $A$ be a reduced ring such that $\Spec(A)$ is irreducible.  Let $f_1, f_2
	\in A$ be two non-zero elements. Then as $A$ is reduced, neither lies in the
nilradical, and $D(f_1), D(f_2)$ are both non-empty. As $\Spec(A)$ is
irreducible, any two non-trivial open subsets of $\Spec(A)$ intersect, so there
is always some $[\mathfrak{p}] \in D(f_1) \cap D(f_2)$. So $f_1 \not \in
	\mathfrak{p}$ and $f_2 \not \in \mathfrak{p}$, hence $f_1f_2 \not \in
	\mathfrak{p}$ by primality, and $f_1f_2 \not = 0$. Since this is true of any
two non-zero elements in $A$, $A$ must be a domain. \\

We've proven the following lemma, which we will reuse in the future.
\begin{lemma}
	Let $A$ be a reduced ring. Then $\Spec(A)$ is irreducible if and only if
	$A$ is an integral domain.
\end{lemma}

Note that one direction fails if $A$ is not reduced. For example, $\K[x]/(x^2)$
has an irreducible spectrum, $\Spec(\K[x]/(x^2)) = \{[(x)]\}$, but is not an
integral domain. Where the proof breaks down in the case of non-reduced rings
$A$, is that $D(f_1)$ or $D(f_2)$ may be empty, since either of $f_1, f_2$ may
be nilpotent.


\subsection*{Ex 3.7.G}

By 3.7.F, irreducible subsets of $\Spec(A)$ are in inclusion-reversing
bijection with prime ideals $\mathfrak{p} \subset A$. It follows by maximality
of irreducible components, that they are in paired with minimal prime ideals of
$A$.

\subsection*{Ex 3.7.H}

Any prime ideal containing $f$ must contain an irreducible factor of $f$ by
primality. Hence the minimal primes of $(f)$ are exactly those that are
generated by its irreducible factors, hence these make up the irreducible
components of $V(f)$ as well.

\subsection*{Ex 3.7.I}

We have $V(I) = \Spec(A/I)$ and it follows from Ex 3.7.H that the irreducible
components of $\Spec(\C[x, y]/(xy))$ are given by $\{[(x)], [(y)]\}$.

\subsection*{Ex 4.1.A}

Let $S = \{g \in A : D(f) \subset D(g) \}$. Then by Exercise 3.5.F and
Definition 4.1.1, we have $\mathcal{O}(D(f)) = S^{-1} A$. Now let $\phi : A \to
	A_f$ and $\psi : S^{-1}A \to A$ be the two natural localization maps. Any
element of $S$ is a unit in $A_f$ by Exercise 3.5.F, hence there is a unique
morphism $\rho : S^{-1}A \to A_f$ such that $\phi = \rho \circ \psi$.
Similarly, as $D(f) = D(f^k)$, we have $f^k \in S$, and there is a unique
morphism $\theta : A_f \to S^{-1}A$ such that $\psi = \theta \circ \phi$. Hence
$\phi = \rho \circ \theta \circ \phi$ , and $\rho \circ \theta$ is the identity
on $\im(\phi)$. But any homomorphism from $S^{-1}A$ is determined by the values
it takes on $\im(\phi)$, hence $\rho \circ \theta = \id$ and $S^{-1}A \cong
	A_f$.

\subsection*{Ex 4.1.B}

We have that $\Spec(A_{f})$ consists of all the prime ideals of $\Spec(A)$
which don't contain $f$. I.e $\Spec(A_{f}) = D(f)$. Suppose that we have an
open cover $D(f) = \bigcup_{i \in I} D(f_i)$ of distinguished open sets
$D(f_i)$ in $\Spec(A)$. Then $D(f_i) \subseteq D(f)$, which implies that any
prime ideal in $D(f_i)$ doesn't contain $f$, hence is a contracted ideal from
$A_f$. Thus, the $D(f_i)$ are distinguished open sets in $\Spec(A_f)$ as well,
since a prime ideal $\mathfrak{p}$ in $A_f$ contains $f_i$ if and only if its
contraction in $A$ contains $f_i$. It follows that the $D(f_i)$ cover
$\Spec(A_f)$ as distinguished open sets in the topology of $\Spec(A_f)$, and
the whole proof of 4.1.3 may be transposed to $\Spec(A_f)$.

\subsection*{Ex 4.1.C}

Let $D(f_i), i \in I$ be an open cover for $D(f)$, and that $a_i/f_i^{k_i} \in
	D(f_i)$ are elements that agree on overlaps $D(f_if_j)$. Then the
$a_i/f_i^{k_i}$ certainly agree on the overlaps $D(f_if_j)$ after localizing to
$A_f$, and we may use the proof of base gluability for $\Spec(A)$ to find $r
	\in A_f = \mathcal{O}(D(f))$ such that $r = a_i/f_i^{k_i}$ in every $D(f_i)$.

\subsection*{Ex 4.1.D}

We first show that $\widetilde{M}(D_f) = M_{f}$. To see this, note that any
element in $S_{f} = \{1, f, f^2, \ldots \}$ doesn't vanish outside $V(f)$,
hence act as isomorphisms on $\widetilde{M}(D_f)$, so we have a unique morphism
$\phi : \widetilde{M}(D_f) \to M_f$ commuting with the canonical maps from $M$
by the universal property. Now let $S$ be the set of elements of $A$ which
doesn't vanish outside $V(f)$. We've shown before that this set is the set of
elements that are invertible in $A_f$, and as $M_f$ is an $A_f$-module, they
act as isomorphisms on the elements of $M_f$, hence we get a unique morphism
$\psi : M_f \to \widetilde{M}(D_f)$ commuting with the canonical maps from $M$
by the universal property. These two maps compose to an automorphism of $M_f$
which fixes the image of $M$ under the canonical map $M \to M_f$, and only one
such map can exist by the universal property, hence it's the identity map and
the two modules are isomorphic. \\

It's now easy to see that $\widetilde{M}$ is a presheaf, that every
$\widetilde{M}(D(f)) = M_f$ is an $\mathcal{O}(D(f)) = A_f$-module, and that
restrictions commute with ring actions. We take this for granted, and dedicate
our efforts to showing that the base identity and base gluability axioms hold.
\\

We begin with identity. Let $D(f_i), i \in I$ be an open cover of $D(f)$. We
can assume that $I = [1..n]$ by quasicompactness of $\Spec(A_f)$. Then suppose
that $s \in \widetilde{M}(D(f))$ is such that $\restr{s}{D(f_i)} = 0$. Then
there is $k_i \in \N$ such that $f_i^{k_i} s = 0$ for each $i \in [1..n]$, and
writing $g_i = f_i^{k_i}$, we have as before that the $D(g_i) = D(f_i)$ cover
$\Spec(A)$, so $(g_1, \ldots, g_n) = 1$ in $A_f = \mathcal{O}(D_f)$, and we
conclude identity by the same partition of unity argument as before,
\[
	s
	=
	\left(\sum_{i = 1}^{n} r_i g_i\right)s
	=
	\sum_{i = 1}^{n} r_i g_i s
	=
	0,
\]
where each $r_i \in A_f$. \\

For gluability, let $D(f_i), i \in I$ be an open cover of $D(f)$, and
$a_i/f_i^{k_i} \in \widetilde{M}(D(f_i))$ be elements that agree on all
intersections $D(f_i f_j)$. First, pick some finite subcover $[1..n] \subseteq
	I$. Then let $g_i = f_i^{k_i}$. The fact that $a_i/g_i$ restricts to the same
element as $a_j/g_j$ on $D(g_i g_j)$ means that $(g_i g_j)^{m_{ij}} (a_i g_j -
	a_j g_i) = 0$, and after picking $m = \max(m_{ij})$ (using the fact that we
picked a finite subcover), we have $(g_i g_j)^{m} (a_i g_j - a_j g_i) = 0$. Now
let $b_i = a_i g_i^m$ and $h_i = g_i^{m + 1}$. Then our previous equation becomes
$b_i h_j = b_j h_i$. Note that this is an equality of module elements in
$\widetilde{M}(D(f))$. Now let
\[
	1 = \sum_{i = 1}^{n} r_i h_i
\]
with $r_i \in A_f$ be a partition of unity (which exists since $D(h_i) = D(g_i)
	= D(f_i)$) in $A_f = \mathcal{O}(D(f))$, and set
\[
	s
	=
	\sum_{i = 1}^{n} r_i b_i.
\]
Then
\[
	s h_j
	=
	\sum_{i = 1}^{n} r_i b_i h_j
	=
	\sum_{i = 1}^{n} r_i b_j h_i
	=
	b_j,
\]
and
\[
	\restr{s}{D(f_j)}
	=
	b_j/h_j
	=
	a_j/g_j.
\]
The same argument as in the proof of Theorem 4.1.2 can be used to widen
gluability to the whole index set $I$.


\subsection*{Ex 4.1.E}

Let $f \in A \setminus \mathfrak{p}$ and $m/f \in M_{\mathfrak{p}}$. Then we
can send this to an equivalence class $(m/f, D(f)) \in
	\widetilde{M}_{[\mathfrak{p}]}$ since $[\mathfrak{p}] \in D(f)$ and $m/f \in
	\widetilde{M}(D_f) = M_f$. This map is well defined, since if $m/f = m'/f'$ in
$M_{\mathfrak{p}}$, then $g(mf' - m'f) = 0$ for some $g \in A \setminus
	\mathfrak{p}$, and $m/f = m'/f'$ in $D(ff'g)$ so
\[
	(m/f, D(f)) = (m/f, D(ff'g)) = (m'/f', D(ff'g)) = (m'/f', D(f'))
\]
in $\widetilde{M}_{[\mathfrak{p}]}$.

Similarly, let $(m, U)$ be a representative of an element in
$\widetilde{M}_{[\mathfrak{p}]}$. We can always restrict $U$ down to a
distinguished open set $D(f)$ which contains $[\mathfrak{p}]$, so we might as
well suppose that we picked the representative $(m', D(f))$, and any element of
$\widetilde{M}(D(f)) = M_f$ is of the form $m' = m/f$. So any element of
$\widetilde{M}_{[\mathfrak{p}]}$ may be represented by a pair $(m/f, D(f))$
with some $f \in A \setminus \mathfrak{p}$. Hence such a representative can be
sent to $m/f \in M_{\mathfrak{p}}$, and we will now show that this is a
well-defined map $\widetilde{M}_{[\mathfrak{p}]} \to M_{\mathfrak{p}}$. Suppose
that $(m/f, D(f)) \sim (m'/f', D(f'))$ in $\widetilde{M}_{[\mathfrak{p}]}$.
Then there is some $U \in D(f) \cap D(f')$ such that $m/f = m'/f'$ on
$\widetilde{M}_{[\mathfrak{p}]}(U)$, and we can further restrict to some $D(g)
	\subseteq U$ to see that $m/f = m'/f'$ on $M_g$. But them $m/f = m'/f'$ on
$M_{\mathfrak{p}}$ as well since this is just a further restriction ($g \in A
	\setminus \mathfrak{p}$ since $[\mathfrak{p}] \in D(g)$), so the map is
well-defined. \\

These two maps are clearly inverse each other, and both homomorphisms. Hence
the two modules are isomorphic.

\subsection*{Ex 4.1.F}

\subsubsection*{(a)}

Denote the given map by $\phi$. Let $m \in \ker(\phi)$. Suppose towards a
contradiction that $1 \not \in \ann(m)$. Then there is some prime ideal
$\mathfrak{p}$ containing $\ann(m)$, and as $m$ vanishes on $M_{\mathfrak{p}}$,
there exists some $s \in A \setminus \mathfrak{p}$ such that $sm = 0$, whence
$s \in \ann(m)$, a contradiction.

\subsubsection*{(b)}

By forming the $\Spec(A)$-module $\widetilde{M}$, which has $[\mathfrak{p}]$ as
points and $M_{\mathfrak{p}}$ as stalks by the previous exercise, an
application of Exercise 2.4.A immediately shows that the given map is
injective.


\subsection*{Ex 4.1.G}

Any $\mathcal{O}$-module morphism $\widetilde{M} \to \widetilde{N}$ defines a
$\mathcal{O}(\Spec(A)) = A$-module morphism $M \to N$ via $M =
	\widetilde{M}(\Spec(A) \to \widetilde{N}(\Spec(A)) = N$. \\

For the other direction, let $\phi : M \to N$ be an $A$-module morphism. Then
for open distinguished sets $X_f$ in $X$, define $\phi_f : \widetilde{M}(U) \to
	\widetilde{N}(U)$ by
\[
	\phi_f
	:
	m/f^k
	\to
	\phi(m)/f^k.
\]
This map clearly commutes with restrictions, and so we've constructed a
morphism of sheaves by Exercise 2.5.C. \\

These constructions are also clearly inverses of each other, and we are done.

\subsection*{Ex 4.3.A}

It's clear that any isomorphism of affine schemes gives rise to an isomorphism
of rings by considering the map on global sections. To show the reverse
direction, we will show that any isomorphism of affine schemes is completely
determined by the map between rings of global sections. From this a bijection
between isomorphisms in the two categories will immediately follow. We begin by
giving two lemmas which show that the map of the underlying topologies is
determined by the map of global sections.

\begin{lemma}
	Let $A, B$ be rings, and
	\begin{align*}
		\pi  & : \Spec(A) \to \Spec(B)    \\
		\phi & : \osp{B} \to \pi_*\osp{A}
	\end{align*}
	be an isomorphism of ringed spaces. Then the value of $f \in
		\osp{B}(\Spec(B)) = B$ at a point $[\mathfrak{p}] \in \Spec(B)$ is zero if
	and only if the value of $\phi(f) \in A$ is zero at the point
	$\pi^{-1}([\mathfrak{p}]) \in \Spec(A)$.
\end{lemma}
\begin{proof}
	As $\phi$ is an isomorphism of sheaves $\osp{B} \to \pi_*\osp{A}$, it's in
	particular an isomorphism at the stalk $\oo_{\Spec(B), [\mathfrak{p}]} \to
		\oo_{\pi_* \Spec(A), [\mathfrak{p}]}$. An isomorphism of rings sends units
	to units, hence when the rings are local, the maximal ideal of the ring in
	the domain is sent to the maximal ideal in the codomain. I.e, $f$ vanishes
	in $\oo_{\Spec(B), [\mathfrak{p}]}$ if and only if $\phi(f)$ vanishes in
	$\oo_{\pi_* \Spec(A), [\mathfrak{p}]} = \oo_{\Spec(A),
			\pi^{-1}([\mathfrak{p}])}$.
\end{proof}

\begin{lemma}
	Let $A, B$ be rings, and
	\begin{align*}
		\pi  & : \Spec(A) \to \Spec(B)    \\
		\phi & : \pi_*\osp{B} \to \osp{A}
	\end{align*}
	be an isomorphism of ringed spaces. Then the isomorphism of global sections
	$\phi : \osp{B}(\Spec(B)) \to \osp{A}(\Spec(A))$ coincides with the map
	$\pi$ on the spectra in the following sense. For any prime ideal
	$\mathfrak{p}$ of $B$, we have
	\[
		[\phi(\mathfrak{p})]
		=
		\pi^{-1}([\mathfrak{p}]).
	\]
\end{lemma}
\begin{proof}
	The point $[\mathfrak{p}] \in \Spec(B)$ is characterized by the fact that
	$f([\mathfrak{p}]) = 0$ if and only if $f \in \mathfrak{p}$. By the
	previous lemma, we see that $f \in \mathfrak{p}$ if and only if
	$\phi(f)(\pi^{-1}([\mathfrak{p}])) = 0$ which happens if and only if
	$\phi(f) \in \phi(\mathfrak{p})$. Hence $[\phi(\mathfrak{p})] =
		\pi^{-1}([\mathfrak{p}])$.
\end{proof}

The previous lemma shows that given a isomorphism of affine schemes, the map of
topologies is completely determined by the map of global sections. The next
lemma will show that the map of rings over any distinguished open subset also
is determined by the map of global sections. From these two facts it follows
that isomorphisms of ringed spaces is equivalent to isomorphisms of rings, and
more specifically the isomorphism of global sections.

\begin{lemma}
	Let $A, B$ be rings, and
	\begin{align*}
		\pi  & : \Spec(A) \to \Spec(B)    \\
		\phi & : \pi_*\osp{B} \to \osp{A}
	\end{align*}
	be an isomorphism of ringed spaces. Moreover, let $f \in B$ and $b/f^m \in
		\osp{B}(D(f))$. Denote the map between the rings of $D(f)$ by $\phi_{D(f)}
		: \osp{B}(D(f)) \to \osp{A}(\pi^{-1}(D(f)))$. Then
	\[
		\phi_{D(f)}(b/f^m)
		=
		\phi(b)/\phi(f)^m.
	\]
\end{lemma}
\begin{proof}
	We have $\phi(b) = \phi_{D(f)}(b)$ since the maps of $\phi$ have to commute
	with restrictions. Similarly $\phi(f) = \phi_{D(f)}(f)$, after which it
	follows that $1/\phi(f) = \phi_{D(f)}(1/f)$ since both of these elements
	are inverses to $\phi(f)$.
\end{proof}


\subsection*{Ex 4.3.B}

We know from Exercise 3.4.I.(b) that the subspace topology $D(f) \subset
	\Spec(A)$ agrees with the topology of $\Spec(A_f)$. Hence it remains only to
check that the structure sheaves agree. Let $D(g/f^m) = D(g)$ be a
distinguished open set in $\Spec(A_f)$. Then $\mathcal{O}(\Spec(A_f)))(D(g)) =
	(A_f)_{g} = A_{fg}$. Meanwhile, $D(g)  \subset \Spec(A_f)$ corresponds to
$D(fg) \subset \Spec(A)$, and $\mathcal{O}_{\Spec(A)}(D(fg)) = A_{fg}$. Hence
the two ringed spaces are isomorphic.

\subsection*{Ex 4.3.C}

It's a ringed space by the definition of restriction of a sheaf. Moreover,
given a point $[\mathfrak{p}] \in U$, we know that there exists an open
neighbourhood $V \subset X$ of $[\mathfrak{p}]$ such that
$\restr{\mathcal{O}}{V}$ is affine. As distinguished open sets form a base,
there must be some distinguished set $D(f)$ in $V \cap U$ which contains
$\mathfrak{p}$. Then $\restr{\mathcal{O}}{D(f)}$ is affine, as if
$\restr{\mathcal{O}}{V} = (\Spec(A), \mathcal{O}_{\Spec(A)})$, then
$\restr{\mathcal{O}}{D(f)} = (\Spec(A_f), \mathcal{O}_{\Spec(A_f)})$ by
Exercise 4.3.b.

\subsection*{Ex 4.3.D}

Any points $[\mathfrak{p}] \in X$ lies in some affine open set, which in turn
lies in some distinguished open set $D(f)$ inside that open set. If some
$[\mathfrak{p}]$ simultaneously lies in two distinguished open sets $D(f),
	D(f')$, which in turn may lie in two different affine open sets, $D(f) \subset
	\Spec(A_f), D(f') \subset \Spec(A_f')$, then in particular, $D(f) \cap D(f')$
is open in $\Spec(A_f)$, and we can find some $D(g) \subset D(f) \cap D(f')$
containing $[\mathfrak{p}]$ which is distinguished open in $\Spec(A_f)$. Hence
the distinguished open sets of the affine cover form an basis for $X$.

\subsection*{Ex 4.3.F}

\subsubsection*{(a)}

Let $X, \oo$ be a locally ringed space. Let $f \in \oo(X)$, and $U$ be the
subset of $X$ where the germ of $f$ is invertible. I.e $p \in U$ if and only if
there exist some open neighbourhood $V_p$ of $p$ such that $fg = 1$ in
$\oo(V_p)$. But then $f$ is invertible on all of $V_p$, so we can write $U$ as
a union of open sets $U = \bigcap_{p \in U} V_p$, hence $U$ is open. It follows
that the space $W \subset X$ where the germ of $f$ isn't invertible is closed.
Now, a local ring is a disjoint union of its maximal ideal and set of units.
Hence if the germ of $f$ isn't invertible at some point $p \in W$, we have that
$f$ must lie in the maximal ideal of $\mathcal{O}_p$, whence $f$ is zero in
$\kappa(p)$.

\subsubsection*{(b)}

Suppose that the germ of $f$ doesn't vanish anywhere. It follows from part (a)
that every germ of $f$ is invertible. In other words, we have for each $p \in
	X$, some open neighbourhood $V_p$ about $p$, and $g_p \in \oo(V_p)$ such that
$fg = 1$ in $\oo(V_p)$. But then if $q, p$ are two points such that $V_p$ and
$V_q$ intersect, we must have $g_p = g_q$ on $V_p \cap V_q$ since inverses are
uniquely determined. It follows by the gluing axiom that there is some $g \in
	\oo(X)$ such that $gf = 1$ on $\oo(X)$, and $f$ is invertible.

\subsection*{Ex 4.4.A}


We first specify how to construct the scheme $(X, \mathcal{O}_X)$ given $X_i, i
	\in I$, $X_{ij}$ and $f_{ij} : X_{ij} \to X_{ji}$ as in the exercise
description. \\

We construct the topological space $X$ as the disjoint union of the $X_i$
modulo the relation that $a \sim b$ whenever $a \in X_{ij}, b \in X_{ji}$ and
$f_{ij}(a) = b$. Using this construction, we can assume that the $X_i$ are
embedded into $X$, and form an open cover of $X$ with intersections $X_i \cap
	X_j = X_{ij} = X_{ji}$. \\

We construct the structure sheaf $\mathcal{O}_{X}$ as follows. Let $U$ be open
in $X$. Then we define $\oo_X(U)$ as the subring of the product $\prod_{i \in
		I} \oo_{X_i}(U \cap X_i)$ where for any $a \in \prod_{i \in I} \oo_{X_i}(U \cap
	X_i)$ and $i, j \in I$, we have $\restr{a_i}{X_{ij} \cap U} = \restr{a_j}{X_{ji} \cap U}$ where
$a_i$ is the $i$-th entry of $a$. Then $\mathcal{O}_X$ is a presheaf with
restriction maps defined component wise. To verify that it's a sheaf, we prove
that the identity and gluing axioms hold. \\

Beginning with the identity axiom, let $U$ be open in $X$, and $U_j, j \in J$
be a open cover of $X$. Then we may form another open cover according to
$V_{ij} = X_i \cap U_j, (i, j) \in I \times J$. Now suppose that $f, g \in
	\mathcal{O}_{X}(U)$ are such that $\restr{f}{U_j} = \restr{g}{U_j}$ for all $j
	\in J$. Then $\restr{f}{V_{ij}} = \restr{g}{V_{ij}}$ for all $i,j \in I \times
	J$, hence by identity in each $X_i$ we have $\restr{f}{X_i \cap U} =
	\restr{g}{X_i \cap U}$ for all $i \in I$. It follows that $f = g$ since they
have the same entry in every component $i \in I$. \\

For gluing, let $U, U_j, V_{ij}$ be as in the previous paragraph. Then let $f_j
	\in \mathcal{O}_X(U_j)$ be a family of elements which agree on intersections
$U_j \cap U_{j'}$. Then they agree on intersections $V_{ij} \cap V_{ij'}$,
hence can be glued to elements $f_i$ in each $\mathcal{O}_X(X_i)$. Then the
element $f \in \prod_{i \in I} \oo_{X_i}(X_i \cap U)$ which has $f_i$ as it's
$i$-th entry is such that $(f)_i = (f)_j$ on each intersection, hence it lies
in $\mathcal{O}_{X}(U)$ by our construction. \\

Finally, note that the cocycle condition ensures that not only does each $(X_i,
	\oo_{X_i})$ inject into $(X, \oo_X)$, but it does so in a way which is
compatible with the injection of $(X_j, \oo_{X_j})$ on the intersection
$(X_{ij}, \oo_{X_{ij}})$ (don't have energy to finish this).


\subsection*{Ex 4.4.B}

Let $(W, \oo_W)$ denote the scheme of the affine line with doubled origin.
First of, the topology $W$ is given as elements from $\Spec(\K[t]) \coprod
	\Spec(\K[u])$ modulo the relation that $(t - a) \sim (u - a)$ for all non-zero
$a$, and $(0) \sim (0)$. Hence, as a set we may view $W$ as the affine line
with an extra origin $\Spec(\K[t]) \cup (0_u)$. In $\Spec(\K[t])$ we have that
all cofinite sets are open, and the same in $\Spec(\K[t])$, hence a set in $W$
is open if and only if it's cofinite, since that's exactly the sets which
correspond to cofinite sets in the original topologies. \\

Now let's calculate the ring of global sections. It's given as the subring of
$\oo_W \subset \K[u] \times \K[t]$ such that for any $(a_1, a_2) \in
	\oo_W$, we have that
\[
	\phi\left(\restr{a_1}{D(t)}\right)
	=
	\restr{a_2}{D(u)}
\]
where $\phi : t \mapsto u$. I.e if $a_1 = f(u)$, then $a_2 = f(t)$. Hence
$\oo_W \cong \K[t]$. \\

Suppose now towards a contradiction that $(W, \oo_W)$ is affine, and equal to
the scheme $(\Spec(A), \osp{A})$ for some ring $A$. Then as the ring of global
sections of an affine scheme is equal to the ring, this would imply that $A =
	\K[x]$. But in $(\AA{1}_{\K}, \osp{\K[x]})$, we have that $V(x - a) = [(x -
	a)]$, for all points, whilst in $(W, \oo_W)$ we have $V(u) = v(t) = [(u),
	(t)]$. As any isomorphism between the two ringed spaces is determined by an
isomorphism between the global sections, and any such isomorphism is determined
by the image of $u = t$, such a map must send $u = t$ to a generator $x - a$ of
$\K[x]$. But this is impossible to do in a way which respects vanishing sets,
contradicting the first lemma in Exercise 4.3.A

\subsection*{Ex 4.4.C}

We can pick $U, V$ as the two copies of the affine plane. Their intersection is
the punctured affine plane, which is not an affine scheme by Example XX.

\subsection*{Ex 4.4.D}

First we verify that the gluing map $\phi_{ij} : U_i \to U_j$ is an isomorphism.
To see this, note that
\[
	\phi_{ji} \circ \phi_{ij} (x_{k/i})
	=
	\phi_{ji}(x_{k/j}/x_{i/j})
	=
	\phi_{ji}(x_{k/j})/\phi_{ji}(x_{i/j})
	=
	\frac{x_{k/i}/x_{j/i}}{x_{i/i}/x_{j/i}}
	=
	x_{k/i},
\]
and if $A$ is an integral domain, then any morphism from $K(A)$ is determined
by how it maps $A$. \\

Now, to see that these isomorphisms agree on triple overlaps. Note that
in $U_i$, the triple overlap is given as $D(x_{j/i}x_{k/i})$,
and here the ring is given by
\[
	\K[x_{0/i}, \ldots, x_{n/i}, 1/x_{j/i}, 1/x_{k/i}]/(x_{i/i} - 1).
\]
Similarly, on $U_j$ and $U_k$ the triple overlap rings are given by
\[
	\K[x_{0/j}, \ldots, x_{n/j}, 1/x_{i/j}, 1/x_{k/j}]/(x_{j/j} - 1),
\]
and
\[
	\K[x_{0/k}, \ldots, x_{n/k}, 1/x_{j/k}, 1/x_{i/k}]/(x_{k/k} - 1)
\]
respectively. Then
\[
	\phi_{jk} \circ \phi_{ij} (x_{l/i})
	=
	\phi_{jk}(x_{l/j}/x_{i/j})
	=
	\phi_{jk}(x_{l/j})/\phi_{jk}(x_{i/j})
	=
	\frac{x_{l/k}/x_{j/k}}{x_{i/k}/x_{j/k}}
	=
	x_{l/k}/x_{i/k}
	=
	\phi_{ik}(x_{l/i}),
\]
hence the gluing morphisms agree on triple overlaps.

\subsection*{Ex 4.4.E}

Let $U = U_0 \cup U_1$. Then $\oop{n}{\K}(U)$ is given by pairs from $(a_1,
	a_2) \in \oop{n}{\K}(U_0) \times \oop{n}{\K}(U_0)$ that agree on the overlap
$D(x_{i/j})$ and $D(x_{j/i})$. But then $a_1$ is a polynomial in
$x_{1/0}, x_{2/0}, \ldots, x_{n/0}$, and $a_2$ is a polynomial in
$x_{0/1}, x_{2/1}, \ldots, x_{n/1}$, and these variables are identified
according to $x_{i/0} = x_{i/1}/x_{0/1}$ on the overlap. No non-constant
polynomial in $x_{1/1}/x_{0/1}, x_{2/1}/x_{0/1}, \ldots, x_{n/1}/x_{0/1}$
can be written as a polynomial in $x_{0/1}, x_{2/1}, \ldots, x_{n/1}$,
hence $\oop{n}{\K}(U) = \K$.

\subsection*{Ex 4.4.F}

The closed points of each $\oop{n}{\K}(U_i)$ are given by maximal ideals, which
are of the form
\[
	\mathfrak{m}_{i, a} = (x_{0/i} - a_{0/i}, x_{1/i} - a_{1/i}, \ldots, x_{n/i} -
	a_{n/i})
\]
where $a_{i/i}$ is fixed to $1$. This closed point may be written as $[a_{0/i},
			a_{1/i}, \ldots, a_{n/i}]$ where $a_{i/i} = 1$ again. As $a_{i/i} = 1$, we can
think of this point as the equivalence class $[a_{0}, a_{1}, \ldots, a_{n}]$
where $a_i \not = 0$ and $[a_{0}, a_{1}, \ldots, a_{n}] \sim \lambda[a_{0},
		a_{1}, \ldots, a_{n}]$ for all non-zero $\lambda$. A similar process can be
repeated for any patch $U_j$, where the resulting point $[b_{0}, b_{1}, \ldots,
			b_{n}]$ has the coordinate $b_j$ non-zero. Thus points of $\oop{n}{\K}$ can be
thought of as equivalence classes $n + 1$ tuples $[a_{0}, a_{1}, \ldots,
			a_{n}]$ where not all coordinates are zero, and two tuples are equivalent if
they are scalar multiples of each other. \\

We will now verify, that on the overlap $U_{ij}$, forming point tuples from the
two descriptions $\mathfrak{m}_{i, a}$ and $\phi_{ij}(\mathfrak{m}_{i, a})$ of
the same ideal, result in equivalent point tuples. \\

On the overlap $U_{ji}$, the ideal/point $\mathfrak{m}_{i, a}$ may be
identified as
\begin{align*}
	(x_{0/j}/x_{i/j} - a_{0/i},\ x_{1/j}/x_{i/j} - a_{1/i},\ \ldots,\ x_{n/j}/x_{i/j} - a_{n/i})
	 & = \\
	(x_{0/j} - x_{i/j}a_{0/i},\ x_{1/j} - x_{i/j}a_{1/i},\ \ldots,\ x_{n/j} - x_{i/j}a_{n/i})
	 & ,
\end{align*}
but the $j$-th entry in the generator list then reads $x_{j/j} - x_{i/j} a_{j/i}$,
and $x_{j/j}=1$ so we may replace $x_{i/j}$ with $1/a_{j/i}$ and get
\begin{align*}
	(x_{0/j}/x_{i/j} - a_{0/i},\ x_{1/j}/x_{i/j} - a_{1/i},\ \ldots,\ x_{n/j}/x_{i/j} - a_{n/i})
	 & = \\
	(x_{0/j} - a_{0/i}a_{j/i},\ x_{1/j} - a_{1/i}/a_{j/i},\ \ldots,\ x_{n/j} - a_{n/i}/a_{j/i})
	 & ,
\end{align*}
from which we can construct the point as
\[
	[a_{0/i}/a_{j/i}, a_{1/i}/a_{j/i}, \ldots, a_{n/i}/a_{n/i}]
\]
which indeed is equivalent to the original point (as $x_{j/i} = x_{j/j}/x_{i/j}
	\not = 0$ on the intersection).

\subsection*{Ex 4.5.A}

When $x_0, x_1 \not = 0$, we have that $x_{0/1} = x_{0/0}/x_{1/0} = 1/x_{1/0}$,
and $x_{2/1} = x_{2/0}/x_{1/0}$.

\subsection*{Ex 4.5.B}

On each of the affine patches $U_0, U_1, U_2$, we define schemes (by defining
their global sections) as
\begin{align*}
	\oo_{U_0} & = \K[x_{1/0},x_{2/0}]/(1 + x_{1/0}^2 - x_{2/0}^2) \\
	\oo_{U_1} & = \K[x_{0/1},x_{2/1}]/(x_{0/1}^2 + 1 - x_{2/1}^2) \\
	\oo_{U_2} & = \K[x_{0/2},x_{1/2}]/(x_{0/2}^2 + x_{1/2}^2 - 1) \\
\end{align*}

On the patch $U_{0,1}$ we have the isomorphism
\[
	\phi_{0,1}
	:
	\oo_{U_0}(U_{0,1}) = \K[x_{1/0},x_{2/0},1/x_{1/0}] / (1 + x_{1/0}^2 - x_{2/0}^2)
	\to
	\oo_{U_1}(U_{1,0}) = \K[x_{0/1},x_{2/1},1/x_{0/1}] / (x_{0/1}^2 + 1 - x_{2/1}^2)
\]
given by
\[
	\phi_{0,1}
	:
	x_{1/0} \mapsto 1/x_{0/1},
	x_{2/0} \mapsto x_{2/1}/x_{0/1}.
\]
\[
	\phi_{1,2}
	:
	x_{0/1} \mapsto x_{0/2}/x_{1/2},
	x_{2/1} \mapsto 1/x_{1/2}.
\]
This map is indeed well-defined, as if $f = 1 + x_{1/0}^2 - x_{2/0}^2$,
then
\[
	\phi_{0,1}(f)
	=
	1 + (1/x_{0/1})^{2} - (x_{2/1}/x_{0/1})^{2}
	=
	(1/x_{0/1})^{2}
	(x_{0/1}^{2} + 1 - x_{2/1}^{2}).
\]
It's inverse, and all other intersection isomorphisms, are defined in a similar
fashion. \\

Finally, we conclude by verifying the cocycle condition in one of the six
directions
\begin{align*}
	\phi_{1,2} \circ \phi_{0,1}(x_{1/0})
	 & =
	\phi_{1,2}(1/x_{0/1})
	=
	\frac{1}{x_{0/2}/x_{1/2}}
	=
	x_{1/2}/x_{0/2}
	=
	\phi_{0, 2}(x_{1/0}) \\
	\phi_{1,2} \circ \phi_{0,1}(x_{2/0})
	 & =
	\phi_{1,2}(x_{2/1}/x_{0/1})
	=
	\frac{1/x_{1/2}}{x_{0/2}/x_{1/2}}
	=
	1/x_{0/2}
	=
	\phi_{0,2}(x_{2/0}).
\end{align*}

\subsection*{Ex 4.5.C}
\subsubsection*{(a)}

The ones where each term has the same degree, I.e polynomials of the form
\[
	-x_0^{k + 5} + x_1^{2}x_0^{k + 3} + x_0^{k}x_2^{5}.
\]
The "best" might be the one with $k = 0$ since this divides all the others?

\subsubsection*{(b)}

All points $(0, a, 0)$ satisfy the "best" homogeneous polynomial, and all
points $(0, a, b)$ satisfy the remaining homogeneous polynomials. This
justifies the word "best" from before, the "best" polynomial retains more
information in this sense.


\subsection*{Ex 4.5.D}

The parabola dehomogenises to $x_0x_2 - x_1^2$. This meets the
line $x_0 = 0$ at infinity at all points $(0, a, 0)$. \\

On $U_1$ the equation becomes $x_0x_2 - 1$, and on $U_2$ it's $x_0 - x_1^2$

\subsection*{Ex 4.5.E}

Given a set of homogeneous polynomials $f_i, i \in [1..m]$ of degrees
$\deg(f_i) = d_i$, define $V_p(f_i, i \in [1..m])$ as the scheme glued together
by the following gluing data. Subschemes $U_i, i \in [0..n]$ defined by global
sections as
\[
	\oo_{U_i}
	=
	\frac{A[x_{0/i}, \ldots, x_{n/i}]}
	{(x_{i/i} - 1, f_{1}(x_{0,i}, \ldots x_{n/i}), f_2(x_{0,i}, \ldots x_{n/i}), \ldots, f_{m}(x_{0,i}, \ldots x_{n/i}))}.
\]
Let $U_{i,j} = \oo_{U_i}(D(x_{j/i}))$ and morphisms $\phi_{i,j} : U_{i, j} \to
	U_{j, i}$ be given by $\phi_{i, j} : x_{k/i} \mapsto x_{k/j}/x_{i/j}$. These
are well-defined maps as
\[
	\phi_{i, j}(x_{i/i} - 1)
	=
	x_{i/j}/x_{i/j} - 1
	=
	0,
\]
and
\[
	\phi_{i,j}(f_{k}(x_{0,i}, \ldots x_{n/i}))
	=
	f_{k}(x_{0,j}/x_{i/j}, \ldots x_{n/j}/x_{i/j})
	=
	f_{k}(x_{0,j}, \ldots x_{n/j})/x_{i/j}^{d_k}
	=
	0.
\]
Moreover, they are isomorphisms as
\[
	\phi_{j, i} \circ \phi_{i, j} (x_{k/i})
	=
	\phi_{j,i}(
	x_{k/j}/x_{i/j}
	)
	=
	\frac{x_{k/i}/x_{j/i}}{x_{i/i}/x_{j/i}}
	=
	x_{k/i}.
\]
Finally, the cocycle condition is fulfilled as
\[
	\phi_{j, k} \circ \phi_{i, j} (x_{l/i})
	=
	\phi_{j, k}(x_{l/j}/x_{i/j})
	=
	\frac{x_{l/k}/x_{j/k}}{x_{i/k}/x_{j/k}}
	=
	x_{l/k}/x_{i/k}
	=
	\phi_{i, k}(x_{l/i}).
\]

\subsection*{Ex 4.5.F}
\subsubsection*{(a)}

First, suppose that $I$ is a homogeneous ideal of $S = \bigoplus_{i \in \Z}
	S_i$ which is generated by forms $g_i, i \in J$ of degrees $d_i \in \Z$.
Then let $a = (a_i)_{i \in \Z} \in I$. It follows that $a$ may be written as a
$S$-linear combination of the generators
\[
	a
	=
	\sum_{i \in J} b_i g_i
\]
with only finitely many $b_i$ non-zero. Furthermore, for each $b_i$, let
$(b_i)_{d}$ denote the degree $d$ part of $b_i$. Then, as $S$ is a direct sum
of the $S_i$, we may decompose $a$ according to
\[
	a_d
	=
	\sum_{i \in J}
	(b_i)^{d - d_i}g_i,
\]
and as each $g_i \in I$, this sum, and therefore $a_d$, lies in $I$ as well. \\

For the other direction, if $I$ is generated by some elements $g_i, i \in I$,
then $I$ is generated by their homogeneous components as well.

\subsubsection*{(b)}

Let $I, I'$ be homogeneous ideals generated by forms $g_i, i \in J$ and $g_i',
	i \in J'$. Then $I + I'$ is generated by the union of the two generating sets,
hence is homogeneous, and $II'$ is generated by the product set, hence also
homogeneous. If $a \in I \cap I'$ then all the homogeneous components of $a$
are in both $I$ and $I'$, hence in $I \cap I'$ and $I \cap I'$ is homogeneous. \\

Finally, if $a \in \sqrt{I}$, then $a^n \in I$ for some $n \in \N$. Let $i \in
	\Z$ be the maximal index such that $a_i$ is non-zero. Then $(a^n)_{ni} =
	a_i^n$, and as $I$ contains all its homogeneous components, it contains
$a_i^n$. It follows that $a_i \in \sqrt{I}$, hence $a - a_i \in \sqrt{I}$ and
has a lower highest degree than $a$. Repeating this procedure inductively with
$a - a_i$ shows that every homogeneous component of $a$ lies in $\sqrt{I}$.

\subsubsection*{(c)}

Suppose that $I$ is an ideal with the described property, and let $ab \in I$.
Let $a_n, b_m$ be the non-zero homogeneous components of greatest degree in $a,
	b$. Then $(ab)_{n + m} = a_nb_m$ lies in $I$ as well, and $a_n$ or $b_m$ lies
in $I$ by hypothesis. Suppose $a_n \in I$, then $a_nb \in I$ and  $ab - a_nb =
	(a - a_n)b \in I$. Repeat this process with $a' = a - a_n$ and $b' = b$. At
each step, the degree of the product $a'b'$ lowers, until one of the factors is
$0$, showing that $a$ or $b$ lies in $I$ and $I$ is prime.


\subsection*{Ex 4.5.G}
\subsubsection*{(a)}

Suppose that $S$ is finitely generated as an $A$-algebra by the generators
$g_i, i \in [1..m]$. We assume that all algebras are unital, hence we may
assume that none of the generators are in $S_0$. Any element in $S$ can be
written as a polynomial in the $g_i$ over $S_0$. Now suppose that $a \in S^+$ and that $a
	= f(g_1, g_2, \ldots, g_m)$. Then as $a$ doesn't have a component in $S_0$, $f$
has no constant. Hence $a$ can be written as a $S$-linear combination in
the $g_i$, and the $g_i$ generate $S^{+}$. \\

For the other direction, suppose that $g_i, i \in [1..m]$ is a homogeneous
generating set of $S^{+}$, and that $a \in S_d$. We show that $a \in
	S_{0}[g_{1}, \ldots, g_m]$ by induction on $d$. The $d = 0$ case is immediate,
so suppose $d > 0$. Then $a \in S^{+}$ and $a$ can be written as $S$-linear
combination of the $g_i$. As each $g_i$ is homogeneous of positive degree, we
can write $a$ as a $\bigoplus_{i = 0}^{d - 1} S_i$-linear combination of the
$g_i$, and the statement follows by the inductive hypothesis.

\subsubsection*{(b)}

Suppose that $S$ is Noetherian. Then $S^{+}$ is finitely generated and $S$ is
finitely generated as an $A$-algebra by part (a). To see that $A$ must be
Noetherian as well, let $I$ be an ideal in $A$. Then then the ideal $IS$ in $S$
is finitely generated by say $g_1, \ldots, g_m$. So, for any $a \in A = S_{0}$,
we may write $a$ as an $S$-linear combination of the $g_i$ according to
\[
	a = \sum_{i = 1}^{m} b_i g_i.
\]
But as $\deg(a) = 0$, we have that all terms of positive degree in this sum must
cancel and we can write $a$ as the sum of degree $0$ components
\[
	a = \sum_{i = 1}^{m} (b_i)_0 (g_i)_0.
\]
It follows that $(g_1)_0, \ldots, (g_m)_{0}$ is a generating set for $I$, hence
$S_0$ is Noetherian. \\

Now suppose that $A = S_0$ is Noetherian and $S$ is a finitely generated
$A$-algebra. Then $S$ is Noetherian by the Hilbert Basis Theorem, and the fact
that quotients of Noetherian rings are Noetherian.

\subsection*{Ex 4.5.H}
\subsubsection*{(a)}

We use the notation suggested in the exercise. Let $\iota : A_0 \to A$ be the
canonical injection. Suppose that $P \subset A$ is a homogeneous prime ideal.
Then $P_0 = \iota^{-1}(P)$ is a prime ideal of $A_0$. \\

We give two solutions of the second part, one without the hint first (kind of)
and then one using the hint. Let $P$ be the radical of the ideal in $A$
generated by $P_0 \in \Spec(A_0)$. \\

We first claim that the degree $0$ component of $P$, which we temporarily write
$(P)_{0}$, is equal to $P_{0}$. Indeed, if $g \in (P)_{0}$, then $g^{n} \in
	P_{0}A$, and as $g$ has degree $0$, so does $g^{n}$ so $g^{n} \in P_{0}$ after
which $g \in P_{0}$ by primality. \\

Now, by Exercise 4.5.F.(c) it's enough to show
primality for homogeneous elements, so suppose that $a, b \in A$ are
homogeneous elements such that $ab \in P$. Then
\[
	(ab)^{\deg(f)}/f^{\deg(a) + \deg(b)} \in P_{0}
\]
It follows that either $a^{\deg(f)}/f^{\deg(a)}$ or $b^{\deg(f)}/f^{\deg(b)}$
lie in $P_{0}$, whence $a^{\deg(f)} \in P$ and $a \in P$ since we took $P$ to
be a radical ideal. \\

Now we solve the exercise using the hint. Suppose that $P_0$ is a prime ideal
of $A_0$, and define
\[
	P = \bigoplus_{i \in \Z} Q_i
\]
where $a_i \in Q_i$ whenever $a_i^{\deg(f)}/f^i \in Q_0$. We will now
show that $P$ is a homogeneous ideal. \\

Let $a_i \in A_i$. Then $a_i \in Q_i$ if and only if $a_i^{\deg(f)/f^i \in
	Q_0}$ if and only if $(a_i^{\deg(f)}/f^i)^2 = (a_i^{2})^{\deg(f)}/f^{2i} \in
	Q_0$ (as $Q_0$ is prime, hence radical) if and only if $a_i^{2} \in Q_{2i}$.
Now suppose that $a_i, b_i \in Q_i$. Then $a_i^{\deg(f)}/f^{i} \in Q_0$ and
$b_i^{\deg(f)}/f^{i} \in Q_0$ hence $(a_ib_i)^{\deg(f)}/f^{2i} \in Q_0$ and
$a_ib_i \in Q_{2i}$. Moreover, $a_i^{2}, b_i^{2} \in Q_{2i}$, hence $(a_i +
	b_i)^{2} \in Q_{2i}$ so $a_i + b_i \in Q_i$. Finally, suppose $a_i \in Q_i$ and
$b_j \in A_j$. Then $a_i^{\deg(f)}/f^i \in Q_0$ and so
\[
	\left(b_j^{\deg(f)}/f^j\right)
	\left(a_i^{\deg(f)}/f^i\right)
	=
	(b_j a_i)^{\deg(f)}/f^{j + i}
	\in Q_0
\]
and $b_ja_i \in Q_{i + j}$. Thus for any $b \in A$, we have $ba_i \in P$. We've
shown that $P$ is an ideal in $S$ (radical ideal even), and it's homogeneous by
construction. It remains to show that $P$ is primality. \\

By Exercise 4.5.F.(c), it will suffice to show primality on graded components.
Suppose that $a_ib_j \in Q_{i + j}$. Then
\[
	(b_j a_i)^{\deg(f)}/f^{j + i}
	=
	\left(b_j^{\deg(f)}/f^j\right)
	\left(a_i^{\deg(f)}/f^i\right)
	\in Q_0,
\]
and by primality of $Q_0$, we may assume that
\[
	a_i^{\deg(f)}/f^i
	\in Q_0
\]
whence $a_i \in Q_i$. \\

As $P_0 = Q_0$, these two constructions are inverse each other, and we've found
the desired bijection.

\subsubsection*{(b)}

The homogeneous prime ideals in the localization $S_{f}$ are precisely those in
$S$ which do not meet $f$. As $f \in S^{+}$, these prime ideals do not contain
the irrelevant ideal, and are elements of $\Proj(S)$. Hence the prime ideals of
$(S_{f})_0$ are in bijective correspondence with the subset of prime ideals in
$\Proj(S)$ which do not contain $f$ (I.e "$D(f)$" in some sense).

\subsection*{Ex 4.5.I}

Solved in Exercise 4.5.H, part (b) in particular.

\subsection*{Ex 4.5.J}

First of all, if $S = S_0$, then every ideal of $S$ contains the irrelevant
ideal and we're in a totally degenerate scenario so we ignore this case. \\

Let $U = \Proj(S) \setminus V(I)$ be a non-trivial open set in $\Proj(S)$ and
$[\mathfrak{p}] \in U$. Then we claim that there is some homogeneous element of
positive degree $f \in I$ such that $f \not \in \mathfrak{p}$. Suppose towards a
contradiction that all elements in $a_0 \in I \setminus \mathfrak{p}$ have
degree $\deg(a_0) = 0$. Then for any $b \in S_{+}$, we have $a_0b \in I$ so
$a_0b \in \mathfrak{p}$ as $\deg(a_0b) \not = 0$, and as $a_0 \not \in
	\mathfrak{p}$, we have $b \in \mathfrak{p}$, which leads to the contradiction
$S_{+} \subset \mathfrak{p}$ (as elements of $\Proj(S)$ are not allowed to
contain the irrelevant ideal). It follows that $I \setminus \mathfrak{p}$
contains an element of positive degree, and as $I$ is homogeneous it contains
it's components, at least one of which have positive degree and doesn't lie in
$\mathfrak{p}$. \\

So, for each $[\mathfrak{p}] \in U$, pick $f_{[\mathfrak{p}]} \in I$
homogeneous of positive degree such that $f_{[\mathfrak{p}]} \not \in
	\mathfrak{p}$. Then $D_{+}(f_{[\mathfrak{p}]})$ is an open set containing
$[\mathfrak{p}]$ which lies in $D_{+}(f_{[\mathfrak{p}]}) \subset U$. It
follows that $U$ can be written as a union of distinguished open sets according
to
\[
	U = \bigcup_{[\mathfrak{p}] \in U} D_{+}(f_{[\mathfrak{p}]}).
\]

\subsection*{Ex 4.5.K}
\subsubsection*{(a)}


A prime ideal contains an ideal $I$ if and only if it contains
radical of that ideal $\sqrt{I}$. Hence $V(I) = V(\sqrt{I}) \subset V(f)$ if
and only if $\{f\} \subseteq \sqrt{I}$.

\subsubsection*{(b)}

Let
\[
	I(Z)
	=
	\{a \in S : a \in \mathfrak{p}, [\mathfrak{p}] \in Z\}
	=
	\bigcap_{[\mathfrak{p} \in Z]} \mathfrak{p}.
\]
Then $I(Z)$ is homogeneous since the intersection of (an arbitrary amount of)
homogeneous ideals is again a homogeneous ideal. It's clear that $I(Z_1 \cup
	Z_2) = I(Z_1) \cap I(Z_2)$ by the same set theoretic rules that governed the
affine case.

\subsubsection*{(c)}

First of all, $V(I(Z))$ is a closed set, and it's clear that it contains $Z$.
Hence $\overline{Z} \subseteq V(I(Z))$. \\

For the other inclusion, let $V(J)$ be a closed set containing $Z$, and
$[\mathfrak{p}] \in V(I(Z))$. Then $I(Z)$ is contained in $\mathfrak{p}$,
hence
\[
	\bigcap_{[\mathfrak{q}] \in Z} \mathfrak{q}
	\subseteq
	\mathfrak{p}.
\]
As $Z \subseteq V(J)$, any prime ideal in $Z$ contains $J$, hence
\[
	J
	\subseteq
	\bigcap_{[\mathfrak{q}] \in Z} \mathfrak{q},
\]
and combining these inclusions we see that $J \subseteq \mathfrak{p}$ whence
$[\mathfrak{p}] \in V(J)$ and $V(I(Z)) \subseteq V(J)$. We've shown that
$V(I(Z))$ is contained in any closed set containing $Z$, hence $V(I(Z))
	\subseteq \overline{Z}$ and we are done.

\subsection*{Ex 4.5.L}

\textbf{(a) $\Rightarrow$ (b)}. Suppose $V(I) = \emptyset$, and that $I = (f_i,
	i \in I) \subseteq S_{+}$. Then no ideal in $\Proj(S)$ contains all $f_i$. In
other words, for every $[\mathfrak{p}] \in \Proj(S)$, there is some $f_i$ such
that $[\mathfrak{p}] \in D_{+}(f_i)$ (note that $D_{+}(f_i)$ is well-defined as
$f_i \in I \subseteq S_{+}$ has positive degree). It follows that
\[
	\Proj(S) = \bigcup_{i \in I}D_{+}(f_i).
\]

\textbf{(b) $\Rightarrow$ (c)}. From
\[
	\Proj(S) = \bigcup_{i \in I}D_{+}(f_i).
\]
it follows that no homogeneous prime ideal not containing $S_{+}$ contains all
$f_i, i \in I$, hence $I$. Since $\sqrt{I}$ is the intersection of all minimal
prime ideals of $I$, our desired result would follow if we could show that all
minimal primes of $I$ are homogeneous, and hence would have to contain $S_{+}$.
This is equivalent to showing that all minimal primes of $S/I$ are homogeneous,
which follows from the following result.

\begin{lemma}
	Let $S$ be a graded ring and $\mathfrak{p}$	a prime ideal in $S$.
	Let $\mathfrak{p}^{h} \subseteq \mathfrak{p}$ be the ideal generated
	by all homogeneous elements of $\mathfrak{p}$. Then $\mathfrak{p}^{h}$
	is prime.
\end{lemma}
\begin{proof}
	$\mathfrak{p}^{h}$ is a homogeneous ideal by construction, and primality
	can be checked at homogeneous components. Let $a_i b_j \in
		\mathfrak{p}^{h}$. Then $a_i b_j \in \mathfrak{p}$, and we can assume that
	$a_i \in \mathfrak{p}$. As $a_i$ is homogeneous, $a_i \in \mathfrak{p}^{h}$
	as well.
\end{proof}

\textbf{(c) $\Rightarrow$ (a)}. Since all prime ideals containing $I$ contains
it's radical, it follows from $\sqrt{I} \supset S_{+}$ that all prime ideals
containing $I$ contain $S_{+}$, hence are disqualified from $\Proj(S)$, and
$V(I) = \emptyset$.

\subsection*{Ex 4.5.M}

We've already shown that $\iota : \Spec((S_f)_0) \to \Proj(S)$ is an inclusion,
and it only remains to show that it is a continuous map. Let $D_{+}(g)$ be an
open set in $\Proj(S)$. Then $\iota^{-1}(D_{+}(g))$ is given by
\begin{align*}
	\iota^{-1}(D_{+}(g))
	 & =
	\{
	(\mathfrak{p}_f)_{0}
	:
	\mathfrak{p} \in \Proj(S),
	g \not \in \mathfrak{p}
	\}.
\end{align*}
Now, $g \not \in \mathfrak{p}$ if and only if $g^{\deg(f)}/f^{\deg(g)} \not \in
	(\mathfrak{p}_f)_0$ by the construction from Exercise 4.5.H, hence
\[
	\iota^{-1}(D_{+}(g))
	=
	D_{+}(g^{\deg(f)}/f^{\deg(g)})
\]
is a distinguished open set in $\Spec((S_f)_0)$ and we are done.

\subsection*{Ex 4.5.N}

We will show that the rings of global sections are isomorphic, after which it
will follow from Exercise 4.3.A that the affine schemes are isomorphic. We
will use the following lemma.

\begin{lemma}
	Let $S$ be a graded ring, and $f \in S_{d_f}, g \in S_{d_g}$. Then
	\[
		((S_{f})_0)_{g_{d_f}/f^{d_g}}
		\cong
		(S_{fg})_0
	\]
\end{lemma}
\begin{proof}
	An arbitrary element in $(S_f)_0$ may be written as $a/f^{k}$, where $a \in
		S_{k d_f}$, and it follows that an arbitrary element in
	$((S_{f})_0)_{g_{d_f}/f^{d_g}}$ can be written as $\frac{a/f^k}{g^{r d_f} /
			f^{r d_g}}$ for $a, k$ like above and $r \in \Z$. This can then be mapped
	to $(S_{fg})_0$ according to
	\[
		\frac{a/f^k}{g^{r d_f} / f^{r d_g}}
		\mapsto
		\frac{a f^{r d_g + r d_f} g^k}{(gf)^{k + r d_f}}
	\]
	An arbitrary element in $(S_{fg})_0$ can be written as
	$a/(fg)^{k}$ where $a \in S_{k (d_f + d_g)}$. We can map
	this according to
	\begin{align*}
		a/(fg)^{k}
		\mapsto
		\frac{a g^{kd_f - k}/f^{k + k d_g}}{g^{k d_f} / f^{k d_g}}.
	\end{align*}

	The maps are well-defined and homomorphisms as they are just constructed by
	doing algebraic manipulations (we don't show this). The maps are inverse
	each other as
	\begin{align*}
		\frac{a g^{kd_f - k}/f^{k + k d_g}}{g^{k d_f} / f^{k d_g}}
		 & \mapsto
		\frac{
			a g^{kd_f - k} f^{k d_g + d_f} g^{k + kd_g}
		}{
			(gf)^{k + kd_g + kd_f}
		}          \\
		 & =
		\frac{
			a (gf)^{k d_g + d_f}
		}{
			(gf)^{k + kd_g + kd_f}
		}          \\
		 & =
		\frac{
			a
		}{
			(gf)^{k}
		}.
	\end{align*}

\end{proof}


Now, open distinguished sets induce affine subschemes, and
$\osp{(S_f)_0}(D(g^{d_f}/f^{d_g}))$ is the ring of global sections of
the affine subscheme $\restr{\osp{(S_f)_0}}{D(g^{d_f}/f^{d_g})}$, so by
using the lemma, we get the following isomorphism of rings of global sections
of affine schemes
\begin{align*}
	\osp{(S_f)_0}(D(g^{d_f}/f^{d_g}))
	 & =
	((S_f)_0)_{g^{d_f}/f^{d_g}} \\
	 & \cong
	(S_{fg})_0                  \\
	 & =
	\osp{(S_{fg})_0}(\Spec(S_{fg})_0),
\end{align*}
and we are done.

\subsection*{Ex 4.5.O}

We begin by describing the triple overlaps in each patch. The subset
$D_{+}(hg)$ of $\Spec(S_f)_0$ corresponds to the subset $D_{+}(hgf)$ of
$\Spec(S)$, which again corresponds to the subset $D_{+}(fh)$ of
$\Spec(S_{f})_0$ and $D_{+}(fg)$ of $\Spec(S_h)_0$. The ring of sections on
these patches are all given by
\begin{align*}
	\osp{(S_f)_0}(D_{+}(gh)) & = ((S_f)_0)_{(gh)^{d_f} / f^{d_g + d_h}} \cong (S_{fgh})_0  \\
	\osp{(S_g)_0}(D_{+}(fh)) & = ((S_g)_0)_{(fh)^{d_g} / g^{d_f + d_h}} \cong (S_{fgh})_0  \\
	\osp{(S_h)_0}(D_{+}(fg)) & = ((S_h)_0)_{(fg)^{d_h} / h^{d_f + d_g}} \cong (S_{fgh})_0.
\end{align*}

Now, in Exercise 4.5.N we constructed isomorphisms
\[
	\psi_{f, fg}
	:
	((S_f)_0)_{g^{d_f}/f^{d_g}}
	\to
	(S_{fg})_0
\]
for all $f, g \in S$, and the overlap isomorphisms are given by $\phi_{f, g} =
	\psi_{g, gf}^{-1} \circ \psi_{f, fg}$. This composition is given as follows (by
Exercise 4.5.N)
\[
	\phi_{f, g}
	:
	\frac{a/f^k}{g^{r d_f} / f^{r d_g}}
	\mapsto
	\frac{a f^{r d_g + r d_f} g^k}{(gf)^{k + r d_f}}
	\frac{a f^{r d_g + r d_f} g^k f}{}
	\frac{a f^{r d_g + r d_f} g^k}{(gf)^{k + r d_f}}
\]

\[
	\restr{\phi_{g, h}}{D_{+}(fh)}
	\circ
	\restr{\phi_{f, g}}{D_{+}(gh)}
	=
	\restr{\psi_{h, gh}^{-1}}{D_{+}(f)} \circ \restr{\psi_{g, gh}}{D_{+}(fh)}
	\circ
	\restr{\psi_{g, gf}^{-1}}{D_{+}(h)} \circ \restr{\psi_{f, fg}}{D_{+}(gh)}
\]

This leads to the following diagram
\[
	\begin{tikzcd}[row sep=large, column sep = large]
		\osp{\Spec(S_f)_0}(D_+(g))
		\arrow[hook, two heads, r, "\psi_{f, fg}"]
		\arrow[d, "\restr{\text{res}}{D_{+}(gh)}"]
		&
		\osp{\Spec(S_{fg})_0}
		\arrow[d, "\restr{\text{res}}{D_{+}(h)}"]
		&
		\osp{\Spec(S_g)_0}(D_+(f))
		\arrow[hook, two heads, l, "\psi_{g, fg}"]
		\arrow[d, "\restr{\text{res}}{D_{+}(fh)}"]
		&
		\\
		\osp{\Spec(S_f)_0}(D_+(gh))
		\arrow[hook, two heads, r, "\restr{\psi_{f, fg}}{D_{+}(gh)}"]
		&
		\osp{\Spec(S_{fg})_0}(D_{+}(h))
		&
		\osp{\Spec(S_g)_0}(D_+(fh))
		\arrow[hook, two heads, l, "\restr{\psi_{g, fg}}{D_{+}(fh)}"]
		&
	\end{tikzcd}
\]

TODO: Finnish!

\subsection*{Ex 4.5.P}

\subsection*{Ex 4.5.Q}

First of all, the $D_{+}(x_i)$ cover $\P^{n}_A$ by Exercise 4.5.L as $(x_0,
	\ldots, x_n)$ generates the irrelevant ideal. The subschemes from §4.5.9 are
precisely the $(S_{x_i})_{0}$, indeed the rings
\[
	A[x_{0/i}, \ldots, x_{n/i}]/(x_{i/i} - 1)
\]
and
\[
	(A[x_0, \ldots, x_n]_{x_i})_{0}
\]
are isomorphic via
\[
	x_{j/i} \mapsto x_{j}/x_{i}.
\]

\subsection*{Ex 4.5.R}

Suppose the point $a = [1, a_1, \ldots, a_n] \in \P^{n}_{k}$ is given. In
Exercise 4.4.F, we showed how this point corresponds to the ideal $(x_{0/i} -
	1, x_{1/i} - a_1, \ldots, x_{n/i} - a_n)$ of $A[x_{0/i}, \ldots,
			x_{n/i}]/(x_{i/i} - 1)$, and using the isomorphism of Exercise 4.5.Q, this
corresponds to the maximal ideal $(x_0/x_i - 1, x_1/x_i - a_1, \ldots, x_n/x_i
	- a_n)$ of $(A[x_0, \ldots, x_n]_{x_i})_{0}$, which in turn via the isomorphism
of Exercise 4.5.H corresponds to the homogeneous prime ideal $(x_0 - x_i, x_1 -
	x_i a_1, \ldots, x_n - x_i a_n)$ of $A[x_{0}, \ldots, x_n]_{x_i}$.

\subsection*{Ex 4.5.S}

We define the closed subscheme $V(f)$ as $\Proj(S/(f))$. To justify this, we show
that the closed set $V(f) \subset \Proj(S)$ is homeomorphic to $\Proj(S/(f))$. \\

Prime ideals in $S/(f)$ correspond to prime ideals in $S$ which contain $f$. \\

We will now show that ideals in $S/(f)$ are homogeneous if and only if their
inverse images in $S$ are homogeneous as well. Clearly $I + (f)$ is homogeneous
when $I$ is homogeneous, since any homogeneous generating set of $I$ is a
homogeneous generating set of $I + (f)$. Now suppose that $I + (f)$ is
homogeneous, and that $\{a_i + (f)\}_{i \in I}$ is a homogeneous generating set
for $I + (f)$. Then $\{f\} \cup \{a_i\}_{i \in I}$ is a homogeneous generating
set for $I$. \\

Finally, we show that ideals $I + (f)$ contain $(S/(f))_{+}$ if and only if $I$
contains $S_{+}$. Suppose that $I$ contains $S_{+}$. Then $I$ contains a
generating set of $S_{+}$ whence $I + (f)$ contains a generating set of $S_{+}
	+ (f) = (S/(f))_{+}$. Now suppose that $I + (f)$ contains $S_{+} + (f)$. Then
as $I$ contains $(f)$, $I$ also contains $S_{+}$.

\subsection*{Ex 5.1.A}

We prove a slightly more general statement. Let $X$ be a topological space which
can be covered by open irreducible subsets  $U_i, i \in I$ which all
have non-empty pairwise intersections. We will show that $X$ is irreducible. \\

A topological space is irreducible if and only if all non-empty open sets
intersect, so let $V_1, V_2$ be open in $X$. Then suppose that $i_1, i_2 \in I$
are such that $V_1 \cap U_{i_1} \not = \emptyset$, and $V_2 \cap U_{i_2} \not =
	\emptyset$. Then $W = U_{i_1} \cap U_{i_2}$ is a non-empty open set in both
$U_{i_1}$ and $U_{i_2}$, hence it must intersect $V_1$ and $V_2$. But $W$ is
irreducible as well, since it's an open subset of an irreducible space, and so
$V_1, V_2$ intersect in $W$, whence they also intersect in $X$.

\subsection*{Ex 5.1.B}

The closure of a point is irreducible in any topological space. Indeed, if
$\overline{x} = U \cup V$, with $U, V$ closed, then either $x \in U$ or $x \in
	V$. If $x \in U$, then $\overline{x} \subseteq U$ since the closure of a set is
the smallest closed set containing that set. It remains to show that all
irreducible sets of a scheme arise this way. \\

Now suppose that $X$ is a scheme and $U$ an irreducible closed subscheme Then
the closure of any point $p \in U$ in $U$ is the same as the closure of that
point in $X$, since $U$ is closed. It follows that it's enough to check that if
$X$ is irreducible, then $X = \overline{\{p\}}$ for some $p \in X$. \\

So, suppose that $X$ is irreducible and let $\Spec(A)$ be an affine open
subscheme. Then $\Spec(A)$ is irreducible, and it follows from Exercise 3.7.F
that there exist $[\mathfrak{p}] \in \Spec(A)$ such that
$\overline{[\mathfrak{p}]}_{\Spec(A)} = \Spec(A)$ where the subscript means the
closure is taken in $\Spec(A)$. Then $V = X \setminus \Spec(A)$ is closed, and
as $\overline{[\mathfrak{p}]}_X \cup V \supset
	\overline{[\mathfrak{p}]}_{\Spec(A)} \cup V = X$ is a decomposition of $X$ into
closed subsets, we must have $\overline{[\mathfrak{p}]}_X = X$, and we are
done.

\subsection*{Ex 5.1.C}

Let $X = U \cup V$ with $U, V$ open subsets that are Noetherian topological
spaces. Then any descending chain of closed sets in $X$ is a chain of open sets
in $U$ and $V$, hence must stabilize, and as the union of the chains in $U, V$
is the original chain in $X$, it to stabilizes. This argument may be applied to
any space that has a finite cover of Noetherian spaces.

\subsection*{Ex 5.1.D}

Let $X, \mathcal{O}_X$ be a scheme and $U_i, i \in I$ be an open cover of $X$.
If $X$ admits a finite affine cover $\Spec(A_i), i \in [1..m]$, then each
$\Spec(A_i)$ quasicompact and can be covered by finitely many $U_i$, and the
union of all such $U_i$ for all $\Spec(A_i)$ is a finite subcover of $U_i,i \in
	I$ of $X$. \\

Now suppose that $X$ is quasicompact, and let $\Spec(A_i), i \in I$ be an
affine open cover of $X$. It follows immediately from the definition of
quasicompactness that some finite subcover of the $\Spec(A_i)$ cover $X$.

\subsection*{Ex 5.1.E}

First of, we note that generizations and specializations of points induce a
transitive relation. Indeed, let $x, y, z$ be points in a topological space
such that $x \in \overline{y}$ and $y \in \overline{z}$, then any closed set
containing $y$ contains $\overline{y}$ hence $x$, and in particular, $x \in
	\overline{z}$. We will use the notation $x \prec y$ to denote that $y$ is a
generization of $x$ and $x \in \overline{y}$.\\

Now, let $X, \mathcal{O}_X$ be a quasicompact scheme. Then it has a finite open
affine cover $\Spec(A_i), i \in [1.m]$. Let $[\mathfrak{p}_0] \in X$ be an
arbitrary point. Then let $i_0 \in [1..m]$ be some index such that
$\Spec(A_{i_0})$ contains $[\mathfrak{p}_0]$. We can find a maximal ideal
$\mathfrak{m}_0$ of $A_{i_0}$ which contains $\mathfrak{p}_0$. Then
$[\mathfrak{m}]_0 \prec [\mathfrak{p}]_0$. Now consider the closure of
$[\mathfrak{m}_0]$ in $X$. If
\[
	\overline{[\mathfrak{m}_0]} \not = [\mathfrak{m}_0],
\]
let $[\mathfrak{p}_1] \in \overline{[\mathfrak{m}_0]} \setminus
	[\mathfrak{m}_0]$, and $[\mathfrak{m}_1]$ be a maximal ideal containing
$\mathfrak{p}_1$ in some affine open set $A_{i_1}$ which contains
$[\mathfrak{p}_1]$. Since generizations are transitive, we have
\[
	[\mathfrak{m}_1] \prec [\mathfrak{p}]_1 \prec [\mathfrak{m}]_0 \prec [\mathfrak{p}]_0,
\]
and as $\mathfrak{m}_0$ is maximal in $A_{i_0}$, we can't have
$[\mathfrak{m}_1] \in \Spec(A_{i_0})$ so $i_0 \not = i_1$. Continuing this way
yields a chain of points $[\mathfrak{m}_{j}]$ which are maximal ideals in rings
$A_{i_j}$, but not contained in any $\Spec(A_{i_{j'}})$ for $j' \le j$. Since
there is a finite amount of $A_{i_j}$, this sequence must terminate, and the
last element of the sequence yields a closed point in $X$. \\

The last two statements follow trivially from the first.

\subsection*{Ex 5.1.F}

Let $X, \mathcal{O}_X$ be a quasiseparated scheme, and $U, V \subset X$ be two
affine open subsets. Then $U, V$ are both quasicompact by Exercise 5.1.D, hence
their intersection is quasicompact, and again by Exercise 5.1.D, can be written
as a finite union of affine subschemes. \\

Now, let $X, \oo_{X}$ be a scheme that exhibits the described property, and $U,
	V \subset X$ be two quasicompact subschemes. Then $U, V$ can be written as
finite unions of affine open subschemes,
\[
	U = \bigcup_{i=0}^{n} \Spec(A_i),\,
	V = \bigcup_{i=0}^{m} \Spec(B_i),
\]
and their intersection is given by
\[
	U \cap V
	=
	\left(\bigcup_{i=0}^{n} \Spec(A_i)\right)
	\cap
	\left(\bigcup_{i=0}^{m} \Spec(B_i)\right)
	=
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{m}
	\Spec(A_i) \cap \Spec(B_j)
\]
and by assumption we can write each $\Spec(A_i) \cap \Spec(B_j)$ a finite union
of open affine subschemes, which are quasicompact in particular. It follows by
Exercise 5.1.D that $U \cap V$ is quasicompact as well.

\subsection*{Ex 5.1.G}

Let $\Spec(B), \Spec(C) \subset \Spec(A)$ be two affine open subschemes, and
let $D(f_i), i \in [1..n]$ and $D(g_i), i \in [1..m]$ be finite open covers of
the two respective schemes by distinguished open sets in $\Spec(A)$. Such
covers exist as distinguished open sets form a basis of $\Spec(A)$, and we can
take them to be finite as $\Spec(B), \Spec(C)$ are affine hence quasicompact.
Then
\[
	\Spec(B) \cap \Spec(C)
	=
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{m}
	D(f_i) \cap D(g_j)
	=
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{m}
	D(f_ig_j)
\]
is a decomposition of $\Spec(B) \cap \Spec(C)$ into a union of finitely many
affine subschemes. It now follows from Exercise 5.1.F that $\Spec(A)$ is
quasiseparated.

\subsection*{Ex 5.1.H}

The condition that there exist some affine open cover where pairwise
intersections are finitely affine covered is weaker then the condition that the
intersection of any two affine subsets is finitely affine covered. Hence
Exercise 5.1.F implies one of the directions. \\

For the other direction, suppose that $X$ is a scheme and $X = \bigcap_{i =
		1}^{n} \Spec(A_i)$ a finite affine open cover of $X$ such that the intersection
of any two $\Spec(A_i), \Spec(A_j)$ can be covered by a finite union of open
subschemes
\[
	\Spec(A_i) \cap \Spec(A_j)
	=
	\bigcup_{r = 1}^{n_{i,j}} \Spec(B_{r}^{i, j}).
\]

Let $\Spec(C) \subset X$ be an open affine subscheme. Our first claim is that
$\Spec(C) \cap \Spec(A_i)$ can be written as a finite union of open affine
subschemes. For each $\Spec(A_i)$, let $D(f_j^i), j \in J^{i}$ be an open cover
of $\Spec(C) \cap \Spec(A_i)$ by distinguished open sets for $f_{j}^{i} \in C$.
Then as the $\bigcup_{i = 1}^{n}\bigcup_{j \in J^i} D(f_j^i)$ cover $\Spec(C)$,
a finite subset of them do, hence we can relabel the indices so that $D(f_j^i),
	j \in [1.. n_i], i \in [1..n]$ is a finite open affine cover of $\Spec(C)$. Now
it may be the case that $D(f_j^i), j \in [1.. n_i]$ is not a cover of $\Spec(C)
	\cap \Spec(A_i)$ since $\Spec(C) \cap \Spec(A_i) \cap \Spec(A_j)$ may have been
covered by sets from the cover of $\Spec(C) \cap \Spec(A_j)$. We will remedy
this in the next paragraph. \\

To reiterate, we have
\[
	\Spec(C)
	=
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{n_i}
	D(f_j^{i})
\]
with $f_j^{i} \in C$. Intersecting with $\Spec(A_k)$ gives
\begin{align*}
	\Spec(C) \cap \Spec(A_k)
	 & =
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{n_i}
	\Spec(A_k) \cap D(f_j^{i})                 \\
	 & =
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{n_i}
	\Spec(A_i) \cap \Spec(A_k) \cap D(f_j^{i}) \\
	 & =
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{n_i}
	\bigcup_{r = 1}^{n_{i, j}}
	\Spec(W^{i, k}_{r}) \cap D(f_j^{i}),
\end{align*}
and as both $\Spec(W^{i, k}_{r}), D(f_j^{i})$ are affine open subschemes of
$\Spec(A_i)$, their intersection can be written as a finite union of affine
open subschemes. It follows that $\Spec(C) \cap \Spec(A_k)$ can be written as a
finite union of open affine subschemes. \\


Now, let $\Spec(C), \Spec(C') \subset X$ be affine open subschemes and
\[
	\Spec(C) \cap \Spec(A_i) = \bigcup_{j = 1}^{n_i} \Spec(D_j), \,
	\Spec(C') \cap \Spec(A_i) = \bigcup_{j = 1}^{n_i'} \Spec(D'_j)
\]
be finite covers by affine open subschemes, the existence of which was proven
in the previous paragraph. Then
\begin{align*}
	\Spec(C) \cap \Spec(C')
	 & =
	\bigcup_{i = 1}^{n}
	\left(\Spec(C) \cap \Spec(A_i)\right)
	\cap
	\left(\Spec(C') \cap \Spec(A_i)\right) \\
	 & =
	\bigcup_{i = 1}^{n}
	\left(
	\bigcup_{j = 1}^{n_i} \Spec(D_j)
	\right)
	\cap
	\left(
	\bigcup_{j = 1}^{n'_i} \Spec(D'_j)
	\right)                                \\
	 & =
	\bigcup_{i = 1}^{n}
	\bigcup_{j = 1}^{n_i}
	\bigcup_{j' = 1}^{n'_i}
	\Spec(D_j)
	\cap
	\Spec(D'_{j'}),
\end{align*}
and as both $\Spec(D_j), \Spec(D'_{j'})$ lie in the quasiseparated scheme
$\Spec(A_i)$, and are affine open subschemes, their intersection can be written
as a finite union of affine open subschemes by Exercise 5.1.F. It follows that
$\Spec(C) \cap \Spec(C')$ can be written as a finite union of affine open
subschemes as well.


\subsection*{Ex 5.1.I}

Let $X$ be a qcqs scheme. Then there exist some cover $\Spec(A_i), i \in I$ of
$X$ where pairwise intersections can be finitely affine covered, and as $X$ is
quasicompact, we have such a subcover with $I$ finite. \\

Now suppose that $X$ is a scheme that can be covered by finitely many affine
open sets $\Spec(A_i), i \in [1..n]$ that have pairwise intersections which can
be finitely affine covered. Then $X$ is quasicompact by Exercise 5.1.D, and
quasiseparated by Exercise 5.1.H.

\subsection*{Ex 5.1.J}

Let $f_1, \ldots, f_m$ be a generating set for the graded ring $S$. We can
furthermore suppose that the $f_i$ are homogeneous, since otherwise we can just
pick all the homogeneous components of each $f_i$. After relabeling, let $f_1,
	\ldots, f_k$ be the subset of homogeneous generators of positive degree. Then
$S_{+} \subseteq (f_1, \ldots, f_k)$, and the affine open sets $D_{+}(f_i), i
	\in [1..k]$ cover $\Proj(S)$ by Exercise 4.5.L, and any intersection
$D_{+}(f_i) \cap D_{+}(f_j) = D_{+}(f_i f_j)$ is also affine open. Hence
$\Proj(S)$ qualify for the conditions of Exercise 5.1.H and is therefore qsqc.

\subsection*{Ex 5.1.K}

Let $Y = \Spec(\K[x_1,x_2,\ldots])$, and $X$ be two copies of $Y$ glued along
$U = Y \setminus [(x_1, x_2, \ldots)]$. Then each copy of $Y$ is affine hence
quasicompact, but their intersection is $U$, which isn't quasicompact by
Exercise 3.6.G.(b), and so $X$ is not quasiseparated.


\subsection*{Ex 5.2.A}

We begin by showing an affine scheme is reduced if and only if the ring of
global sections is reduced. For the first direction, assume that $A$ isn't
reduced and let $x$ be a non-zero nilpotent in $A$. Then let $I = (0 : x)$ be
the ideal of zero-divisors of $x$. As $x \not = 0$, we have $I \not = A$. Then
there exists some maximal ideal $\mathfrak{m}$ containing $I$. It follows that
$x$ is non-zero in $A_{\mathfrak{m}}$ since the kernel of a localization by a
multiplicative set $S$ is all the elements which have a zero divisor in $S$. As
$x$ is still a nilpotent in $A_{\mathfrak{m}}$, it follows that $\Spec(A)$ is
not reduced. For the other direction, suppose that $A$ is reduced. Then every
stalk of $\Spec(A)$ is a localization of $A$, hence reduced ($sa^n = 0
	\Rightarrow (sa)^n = 0$), and so $\Spec(A)$ is reduced. \\

Let $\Spec(A_i), i \in I$ be an affine cover of $X$. Then each
$\oo_X(\Spec(A_i))$ is reduced, and as $\restr{(f - g)}{\Spec(A_i)} \in
	\mathfrak{p}$ for all $[\mathfrak{p}] \in \Spec(A_i)$, and
$\bigcap_{[\mathfrak{p}] \in A_i} \mathfrak{p} = 0$, it follows that $f = g$ in
every $\Spec(A_i)$. It then follows from the identity axiom that $f = g$ in
$X$. \\

\subsection*{Ex 5.2.B}

See Exercise 5.2.A to see that rings are reduced if and only if their spectra
are. We use this to show that a scheme $X$ is reduced if and only if the rings
$\mathcal{O}_X(U)$ are reduced for all open $U$ in $X$. \\

Suppose that $X$ is reduced, and let $f \in \mathcal{O}_X(U)$ be such that $f^k
	= 0$. Let $\Spec(A_i), i \in I$ be an affine open cover of $U$. Then all of the
$\Spec(A_i)$ are reduced schemes as reducedness is stalk-local, hence the $A_i$
are reduced rings. Moreover, $\restr{f}{\Spec(A_i)}^k = 0$, and it follows that
$\restr{f}{\Spec(A_i)} = 0$, whence $f = 0$ by the identity axiom. \\

For the other direction, let $\Spec(A_i)$ be an affine cover. Then
$\mathcal{O}_X(\Spec(A_i)) = A_i$ are all reduced rings by assumption. Hence
the $\Spec(A_i)$ are reduced schemes, and $X$ is a reduced scheme by
reducedness being stalk-local.

\subsection*{Ex 5.2.C}

First of all, since being reduced is a stalk local property, it follows that any
scheme that can be covered by reduced schemes is itself reduced. \\

$\A_{k}^{n}$ is reduced as $k[x_1,\ldots,x_n]$ is a UFD, and $\P_{k}^{n}$ is
reduced as it's covered by $n + 1$ reduced schemes $\A_{k}^{n}$.

\subsection*{Ex 5.2.D}

From Exercise 3.2.L we know that $(k[x, y]/(yx))_x \cong k[x]_x$, and it's easy
to see using similar arguments as in our solution to that exercise that $(k[x,
			y]/(y^2, yx))_x \cong (k[x, y]/(yx))_x$, hence $(k[x, y]/(y^2, yx))_x$ is a
domain since $k[x]_x$ is. \\

Since $(k[x, y]/(y^2, yx))_x = \mathcal{O}_{k[x, y]/(y^2, xy)}(D(x))$ is the
ring of sections on $D(x)$, it follows that the subscheme on $D(x)$ is reduced
(as it's the spectrum of a reduced ring), and the only possibly non-reduced
stalks are those which correspond to points in $V(x)$. But the only point in
$V(x)$ is $[(x, y)]$ (it corresponds to the only prime ideal of $k[x, y]$
containing $(y^2, yx)$ and $(x)$), and since we know that $k[x, y]/(y^2, yx)$
isn't reduced, it follows that the stalk at $[(x, y)]$ isn't reduced, and is
the only such point.

\subsection*{Ex 5.2.E}

We begin by proving a useful lemma that cements the idea in the paragraph after
Exercise 5.1.I in the text.

\begin{lemma}
	Let $X$ be a scheme and $[\mathfrak{p}] \in X$ be a point, and suppose that
	there exist some point $[\mathfrak{m}] \in \overline{[\mathfrak{p}]}$. Then
	any open neighbourhood $U_{[\mathfrak{m}]}$ of $[\mathfrak{m}]$ conatins
	$\mathfrak{p}$.
\end{lemma}
\begin{proof}
	Suppose towards a contradiction that we had some $U_{[\mathfrak{m}]}$ not
	containing $[\mathfrak{p}]$. Then $X \setminus U_{[\mathfrak{m}]}$ is a
	closed set containing $[\mathfrak{p}]$, whence it also contains
	$\overline{[\mathfrak{p}]}$. Hence $U_{[\mathfrak{m}]}$ doesn't intersect
	$\overline{[\mathfrak{p}]}$, which contradicts $[\mathfrak{m}] \in
		\overline{[\mathfrak{p}]}$.
\end{proof}

It follows that when $X$ is quasicompact, then checking that a local property (
a property $P$ such that when $P$ holds for $[\mathfrak{p}]$, then $P$ holds
for a neighbourhood of $[\mathfrak{p}]$) holds on closed points suffices to
check it on all $[\mathfrak{p}] \in X$, since every $[\mathfrak{p}]$ in a
quasicompact scheme has closed points in its closure by Exercise 5.1.E. \\

We don't do this though, as Remark 5.2.2 shows that reducedness isn't an open
condition. We follow the hint instead. \\

Suppose that $[\mathfrak{p}]$ is a non-reduced point. It follows from Exercise
5.1.E that there exist a closed point $[\mathfrak{m}]$ in the closure of
$[\mathfrak{p}]$. It follows from the lemma above that any affine open
subscheme containing $[\mathfrak{m}]$ also contains $[\mathfrak{p}]$, hence we
can suppose that they both lie in some $\Spec(A)$ where $[\mathfrak{m}]$ is a
maximal ideal. \\

Since the stalk at $[\mathfrak{p}]$ is non-reduced, we have
$A_{[\mathfrak{p}]}$ non-reduced. As $A_{[\mathfrak{p}]}$ is a further
localization of $A_{[\mathfrak{m}]}$, it is a stalk of the affine scheme
$\Spec(A_{[\mathfrak{m}]})$. Thus it follows from Exercise 5.2.B that
$A_{[\mathfrak{m}]}$ can't be reduced.

\subsection*{Ex 5.2.F}

Let $\Spec(A_i), i \in [1..m]$ be a finite open affine cover of $X$, and
suppose that $f \in \oo_{X}$ is such that $f([\mathfrak{p}]) = 0$ for all
$[\mathfrak{p}] \in X$. Then $f$ is nilpotent in every $\Spec(A_i)$ with
$f^{n_i} = 0$ in $\osp{A_i}$. Letting $n = \max_{i \in [1..m]}(n_i)$, we have
that $f^n$ is zero in $\oo_{X}$ by the identity axiom. \\

For the other direction, let
\[
	X
	=
	\bigcup_{i \in \N} \Spec(A_i)
\]
with $A = k[x_i]/x_i^i$. Then by the gluing axiom of sheaves, we have an
element $\overline{x} \in \oo_{X}$ which restricts to $x_i$ on each patch
$\Spec(A_i)$. This element is nilpotent on each patch and hence is contained in
every prime ideal of every affine patch, but $\overline{x}^n \not = 0$ for any
$n \in \N$ since $x_N^{n} \not = 0$ when $N > n$.

\subsection*{Ex 5.2.G}

Suppose that $X$ is an integral scheme. Then in particular, every affine open
subscheme of $X$ is integral, and these schemes are clearly reduced since they
stem from integral domains. It follows that $X$ is reduced as this is a
stalk-local property. Now suppose towards a contradiction that $X$ is
reducible. Then there exist open subsets $U, V \subset X$ which are disjoint,
so we can glue sections from these sets without any restriction and
\[
	\oo_{X}(U)
	\times
	\oo_{X}(V)
	\subset
	\oo_{X}(U \cup V).
\]
As the product of two rings isn't an integral domain, this is a contradiction
to $X$ being and integral scheme. \\

Now suppose that $X$ is a reduced irreducible scheme, that $U$ is open in $X$,
and that $f, g \in \mathcal{O}_X(U)$ are such that $fg = 0$. Then let
$\Spec(A_i), i \in I$ be an open affine cover of $U$. Each $\Spec(A_i)$ is
reduced and irreducible as they are open subschemes of $X$, and it follows from
our lemma in the solution to Exercise 3.7.F that $A_i$ is an integral domain
for every $i \in I$. It follows that every stalk $\mathcal{O}_{X,
	\mathfrak{p}}$ is an integral domain for every $[\mathfrak{p}] \in U$, as each
such stalk is a localization of some $A_i$. Now, the germs
$(fg)_{[\mathfrak{p}]}$ are all $0$ for all $[\mathfrak{p}] \in U$, hence $U =
	V(f) \cup V(g)$. But $V(f)$ and $V(g)$ are both closed, and $U$ is irreducible
as $X$ is. Hence either $U = V(f)$ or $U = V(g)$. By Exercise 5.2.A, this is
equivalent to $f = 0$ or $g = 0$, and $\mathcal{O}_X(U)$ is a domain.

\subsection*{Ex 5.2.H}

If $\Spec(A)$ is integral, then it's ring of global sections $A$ is integral. \\

Now suppose that $A$ is integral. Then $A$ is reduced, and $\Spec(A)$ is
reduced by Exercise 5.2.B. Furthermore, $\Spec(A)$ is irreducible by Exercise
3.6.A, whence $\Spec(A)$ is integral by Exercise 5.2.G.

\subsection*{Ex 5.2.I}

First of all, $\eta \in \Spec(A)$, since otherwise $X \setminus \Spec(A)$ would
be a closed set containing $\eta$, contradicting $\overline{\eta} = X$. We have
$\Spec(A)$ integral whence $A$ is an integral domain. Now, any spectrum of an
integral domain has a generic point $[0]$, but Exercise 5.1.B gives a bijection
between points and irreducible subsets, and since both $[0]$ and $\eta$
correspond to $\Spec(A)$ under this bijection, it follows that $\eta = [0]$.
Hence
\[
	\oo_{X, \eta}
	=
	A_{(0)}
	=
	K(A).
\]

\subsection*{Ex 5.2.J}

Suppose that $f, g \in \ox(U)$ are such that $\restr{f}{V} = \restr{g}{V}$.
Then $f - g$ vanishes on $V$. We know from Exercise 4.3.F that the vanishing
subset $V(f - g)$ is closed, but as $X$ is irreducible, so is $U$, and since
all open sets are dense in $U$, it then follows that $V(f - g) = U$ (since $V(f
	- g)$ must contain the non-empty open set $V$, and thus its closure which is
$U$). It now follows from Exercise 5.2.A that $f = g$. \\

Now suppose that $f, g \in \ox(U)$ are such that $f = g$ in $\oo_{X, \eta}$.
Since $\oo_{X, \eta} = K(A)$, and $A$ is a domain (and thus injects into its
fraction field), this happens if and only if $\restr{f}{\Spec(A) \cap U} =
	\restr{g}{\Spec(A) \cap U}$, or in other words $\Spec(A) \subset V(f - g)$. But
we showed above that this implies that $f = g$ in $\ox(U)$.

\subsection*{Sections of Integral Schemes Glue iff They Have the Same Image in $K(X)$}

It's remarked after Exercise 5.2.J that sections of integrals schemes glue if
and only if they are the same as elements in $K(X)$. We prove this. \\

Let $X$ be an integral scheme, $\Spec(A)$ an affine open subscheme, $U_i, i \in
	I$ an open cover, and $f_i \in \ox(U_i)$ for each $i \in I$. \\

Suppose that the $f_i$ all map to the same element in $K(X) = K(A)$. Then there
is some open neighbourhood $V_{i,j}$ of $\eta$ where $f_i$ and $f_j$ agree, and
as the inclusion from $\ox(U_i \cap U_j) \to \ox(V_{i, j})$ is an injection, it
follows that $f_i$ and $f_j$ agree on $U_i \cap U_j$. \\

Now suppose that the $f_i$ all agree on intersections $U_i \cap U_j$. Then they
agree in the stalk of $\eta$ by definition.

\subsection*{Ex 5.3.A}

Let $X$ be a locally Noetherian scheme, and $\Spec(A), \Spec(B)$ be affine open
subschemes. Then $\Spec(A), \Spec(B)$ are both locally Noetherian by
Proposition 5.3.3, and the Affine Communication Lemma. Now let $\Spec(A_i), \in
	I,\, \Spec(B_j), j \in J$ be open affine covers of $\Spec(A)$ and $\Spec(B)$ by
Noetherian schemes. As $\Spec(A)$ and $\Spec(B)$, are quasicompact, there are
finite subcovers $\Spec(A_i), i \in [1..n], \Spec(B_j), j \in [1..m]$. Now
define the subscheme
\[
	Y
	=
	\left(
	\bigcup_{i = 1}^{n} \Spec(A_i)
	\right)
	\cup
	\left(
	\bigcup_{i = 1}^{m} \Spec(B_i)
	\right).
\]
We have that $Y$ is Noetherian, hence the open subscheme $\Spec(A) \cap
	\Spec(B)$ of $Y$ is quasicompact by Exercise 3.6.U, and thus a finite union of
affine open schemes by Exercise 5.1.D. It follows that $X$ is quasiseparated by
Exercise 5.1.F.

\subsection*{Ex 5.3.B}

As Noetherian schemes have underlying topological spaces which are Noetherian,
This is just proposition 3.6.15. \\

Suppose that $U_i, i \in I$ are the connected components of $X$. Then in
particular, $U_i, i \in I$ is a cover of $X$ which doesn't admit strict
subcover, on account of the $U_i$ being disjoint. As $X$ is Noetherian, it's
quasicompact, and the $U_i$ must admit a finite subcover. I.e $I$ is finite
from the beginning. As $X$ is Noetherian, so are the $U_i$, and they can be
written as finite unions of irreducible components by the previous part of the
exercise.


\subsection*{Ex 5.3.C}

We begin with the easier direction. Suppose that $X$ is a Noetherian integral
scheme. Then $X$ is irreducible, hence connected. Moreover, all stalks of $X$
are integral domains as they are localizations of integral domains. \\

Before we prove the other direction, we give some examples that show how and
why some assumptions are needed. \\

The following example shows that being integral is not a stalk local property,
and that we indeed need the connectedness requirement. Let $A$ be an integral
domain. Then $\Spec(A \times A) = \Spec(A) \sqcup \Spec(A)$ is stalk locally
integral, as each $\Spec(A)$ is integral and the stalks within are integral,
but $A \times A$ is not an integral domain. \\

The next example shows that we need to use integrality of stalks, and not just
reducedness. Let $A = k[x, y]/xy$. Then $A$ is reduced, and so $\Spec(A)$ is
reduced. Moreover, $\Spec(A)$ is Noetherian as $A$ is, and it's connected as
$A$ contains no idempotents. But $A$ is not integral, and the stalk at the
origin $[(x, y)]$ is not integral. We will dig a little bit deeper into this
example. Note that $[(x, y)]$ is a point that lies in both irreducible
components $V(x) = \overline{[(x)]}, V(y) = \overline{[(y)]}$. It follows that
every open neighbourhood of $[(x, y)]$ contains both $[(x)]$ and $[(y)]$. Thus
all neighbourhoods $U$ of $[(x, y)]$ have non-zero sections $x, y \in \oo(U)$
which multiply to zero. We generalize this fact in the following lemma.

\begin{lemma}
	Let $X$ be a scheme, and $[\mathfrak{p}] \in X$ be a point which lies in
	more than one irreducible components. Then the stalk at $[\mathfrak{p}]$ is
	not an integral domain.
\end{lemma}
\begin{proof}
	Suppose that $X_1, X_2$ are the only two irreducible components which
	contain $[\mathfrak{p}]$. It follows from Exercise 5.1.B that we can write
	$X_1 = \overline{[\mathfrak{q}_1]}, X_2 = \overline{[\mathfrak{q}_2]}$, and
	from our solution to Exercise 5.1.E, that every open set containing
	$[\mathfrak{p}]$ also contains $[\mathfrak{q}_1]$ and $[\mathfrak{q}_2]$.
	Let $\Spec(A)$ be some affine neighbourhood of $[\mathfrak{p}]$. Then $X_1$
	and $X_2$ are irreducible in $\Spec(A)$ as well, since any open sets in
	$X_i \cap \Spec(A)$ are open in $X_i$ as well and hence intersect. It
	follows that $\mathfrak{q}_1, \mathfrak{q}_2$ are minimal ideals of $A$,
	and they are different as they corresponds to different points in the
	spectrum. As $[\mathfrak{p}] \in \overline{[\mathfrak{q}_i]}$, it follows
	that $\mathfrak{q}_i \subset \mathfrak{p}$ for both $i = 1,2$. Hence
	$\mathfrak{q}_1, \mathfrak{q}_2$ are two different minimal prime ideals of
	$A_{\mathfrak{p}} = \oo_{X, [\mathfrak{p}]}$, and $\oo_{X, [\mathfrak{p}]}$
	is not an integral domain (since the only minimal prime of an integral
	domain is $(0)$).
\end{proof}

With this fact in hand, our proof now follows easily. Suppose that $X$ is a
non-empty connected Noetherian scheme with integral stalks. First of, $X$
admits a finite decomposition into irreducible subsets,
\[
	X = X_1 \cup \ldots \cup X_r.
\]
As $X$ is connected, the irreducible components all intersect (otherwise, two
sets of disjoint components would form a non-trivial open disjoint
decomposition of $X$).But every stalk of $X$ is integral, and can thus only lie
in one irreducible component each. It follows that $X = X_1$, and $X$ is
integral by Exercise 5.2.G. \\

Note that we need the Noetherian assumption. Suppose that $X$ is just a
connected scheme with integral stalks, but not necessarily Noetherian. Then we
can conclude like above that all irreducible components are disjoint. But if
there are infinitely many irreducible components $X_i, i \in I$, the union of
all irreducible components but $X_i$ for a specific $i$ is not necessarily
closed, whence $X_i$ is not necessarily open, and we can't use connectedness to
conclude that the $X_i$ must intersect each other.

\subsection*{Ex 5.3.D}

\subsubsection*{(a)}

Suppose that $X$ is a quasiprojective $A$-scheme. That is, there exist some
ring $S$, which is a finitely generated graded ring over $A$, and $X$ is a
quasicompact open subscheme of $\Proj(S)$. Remember that we say that a $S$ is a
finitely generated graded ring over $A$ if the irrelevant ideal $S^{+}$ is
finitely generated over $A$. So suppose that $S^{+} = A[f_1, \ldots, f_n]$.
Then $\oo_{\Proj(S)}(D_{+}(f_i)) = (S_{f_i})_0$ is finitely generated by
$f_j^{\deg(f_i)}/f_i^{\deg(f_j)} j \in [1..n]$. It follows from Exercise 4.5.L
that the $D_{+}(f_i)$ make up a finite cover of $\Proj(S)$. Hence $\Proj(S)$ is
of finite type. By the affine communication lemma, $X$ is locally of finite
type, and as it is assumed to be quasicompact, it is of finite type. \\

If $A$ is Noetherian, then so is $\oo_{\Proj(S)}(D_{+}(f_i))$ by the basis
theorem. It follows that $\Proj(S)$ is locally Noetherian, whence $X$ is, and
as it is quasicompact, it is Noetherian.

\subsubsection*{(b)}

Suppose that $U$ is an open subscheme of $\Proj(S)$ and $S = A[f_1, \ldots,
			f_n]$. We already saw in part (a) that $U$ is locally of finite type. Now
suppose that $A$ is Noetherian. Then each $(S_{f_i})_0$ is Noetherian as above,
and $D_{+}(f_i)$ is a Noetherian subscheme. It follows that $U \cap D_{+}(f_i)$
is quasicompact, whence $U$ is quasicompact as it has a finite quasicompact
cover. \\

For a counterexample to the case when $A$ isn't Noetherian, let $A = k[x_1,
			x_2, \ldots, ]$. Then $\Spec(A)$ is a projective $A$-scheme ($\Spec(A) =
	\P^{0}_{A}$). The subscheme
\[
	X = \bigcup_{i = 1}^{\infty}D(x_i)
\]
is not quasicompact, as no subset of the $D(x_i), i \in \N$ covers $X$. Indeed,
\[
	X' = \bigcup_{i = 2}^{\infty}D(x_i)
\]
does not contain $(x_2, x_3, \ldots)$.

\subsection*{Ex 5.3.E}

\subsubsection*{(a)}

The ring finitely generated by construction, and it is reduced if and only if
$I$ is radical. The statement now follows as affine schemes are reduced if and
only if their corresponding rings are reduced.

\subsubsection*{(b)}

The ring $A = k[x_1, \ldots, x_n]/I$ is finitely generated over $k$, hence the
scheme is $k$-projective. If  $I$ is radical, then $A$ is reduced. It follows
that $A_{x_1}$ and $(A_{x_1})_0$ are both reduced as well, so $\Proj(A)$ is
reduced as it has a cover by reduced open subschemes. Hence $\Proj(A)$ is a
projective variety.

\subsection*{Ex 5.3.F}

Let $[\mathfrak{m}] \in X$, and $A = k[f_1, \ldots, f_n]$ be a finitely
generated $k$-algebra such that $\Spec(A)$ is an affine neighbourhood of
$[\mathfrak{m}]$ in $X$. \\

Suppose that $[\mathfrak{m}]$ is a closed point. Then $\mathfrak{m}$ is
a maximal ideal of $A$, and
\[
	\kappa(\mathfrak{m})
	=
	A_{[\mathfrak{m}]}/\mathfrak{m}_{[\mathfrak{m}]}
	=
	K(A/\mathfrak{m})
	=
	A/\mathfrak{m}.
\]
Our result now follows from $A/\mathfrak{m}$ being a finite dimensional
$k$-space by the Nullstellensatz. \\

For the other direction, suppose that $\kappa(\mathfrak{m}) =
	K(A/\mathfrak{m})$ is a finite dimensional $k$-space. Then as $\mathfrak{m}$ is
prime, $A/\mathfrak{m}$ is an integral domain, and $A/\mathfrak{m}$ injects
into $K(A/\mathfrak{m})$ so $A/\mathfrak{m}$ is finite dimensional as well. It
then follows from Exercise 3.2.G that $\mathfrak{m}$ is maximal. As $\Spec(A)$
is any open neighbourhood of $[\mathfrak{m}]$, it follows that $[\mathfrak{m}]$
is closed. \\

Note that it follows that if a point $\mathfrak{m}$ in a locally finite
$k$-schemes has \emph{any} affine neighbourhood where it corresponds to a
maximal ideal, then it has a finite dimensional residue field over $k$ and is a
closed point. I.e the closed points of locally finite $k$-schemes are precisely
those which correspond to maximal ideals in any affine open subscheme. Contrast
this to Exercise 5.1.E, and Exercise 15.2.P. \\

For the second part of the problem, Exercise 3.6.J tells us that closed points
are dense in affine $k$-schemes. As locally finite $k$-schemes can be covered
by affine $k$-schemes, it follows that closed points are dense in these as
well.


\subsection*{Ex 5.3.G}

We follow the hint. Let $M = I_{j} / I_{j - 1}$. Then as localization commutes with quotients,
\begin{equation*}
	(I_{J})_{f_n} / (I_{j - 1})_{f_n}
	=
	(I_{J} / I_{j - 1})_{f_n}
	=
	M_{f_n}.
\end{equation*}
If $M \not = 0$, then as $M$ injects into $M_{f_1} \times \ldots \times
	M_{f_n}$, one of the $M_{f_i} \not = 0$. In particular, if the $I_j$ form a
strictly increasing chain, then one of the $I_{i, j}$ chains have to be
strictly increasing as well, since there only are finitely many $i \in [1..n]$.

\subsection*{Ex 5.3.H}

We use the notation given in the prelude. Let $r \in A$.
Then in each $A_{f_i}$, we can write
\[
	r
	=
	\sum_{j = 1}^{m_i} a_j r_{i, j}/f_{i}^{k_{i, j}}.
\]
Let $K_i = \max_{j \in [1..m_i]}(k_{i, j})$. Then for each $i$,
\[
	f_i^{K_i} r
	=
	\sum_{j = 1}^{m_i} a_j r_{i, j} f_i^{K_i - k_{i, j}}
	\in
	A.
\]
Now let $K = \max(K_i)$. Then as $(f_1, \ldots, f_n) = (1)$ we have $(f_1,
	\ldots, f_n)^{nK} = (1)^{nK} = (1)$. But any product of $nK$ factors of $f_1,
	\ldots, f_n$, must have at least $K$ factors of some of the $f_i$ by the
pigeonhole principle. Hence $(f_1^K, \ldots, f_n^K) = (1)$. Thus there exists
some partition of unity $1 = \sum_{i = 1}^{n} c_i f_i^K$ in $A$. Finally,
\begin{align*}
	r
	=
	\left(
	\sum_{i = 1}^{m}
	c_i f_i^K
	\right)
	r
	=
	\sum_{i = 1}^{m}
	\sum_{j = 1}^{m_i} a_j c_i r_{i, j} f_i^{K + K_i - k_{i, j}},
\end{align*}
and $A$ is generated by the $c_i, r_{i, j},$ and $f_i$.

\subsection*{Ex 5.4.A}

Let $A$ be an integrally closed domain, and $S \subset A$ a multiplicative set.
Suppose that $a/b \in K(S^{-1}A)) = K(S)$ is a root of the monic polynomial
\[
	x^n + \frac{a_{n-1}}{s_{n-1}} x^{n-1} + \ldots + \frac{a_0}{s_0}
\]
with coefficients in $S^{-1}A$. Then let $s = s_0s_1\ldots s_n$,
and note that $a/(bs)$ is a root of the monic polynomial
\[
	x^n + s'_{n-1} a_{n-1} x^{n-1} + \ldots + a_0s'_0,
\]
where
\[
	s'_i
	=
	s^n/s_i.
\]
It follows that $S^{-1}A$ is integrally closed whenever $A$ is.


\subsection*{Normality Can be Checked at Closed Points of Quasicompact Schemes}

Let $X$ be a quasicompact scheme, $[\mathfrak{p}] \in X$, and $[\mathfrak{m}]
	\in \overline{[\mathfrak{p}]}$ be a closed point. Then there is some open
affine neighbourhood $\Spec(A)$ of $[\mathfrak{p}]$ where $\mathfrak{m}$ is a
maximal ideal containing $\mathfrak{p}$. It follows that $\oo_{X,
		[\mathfrak{p}]} = A_{\mathfrak{p}}$ is a localization of $\oo_{X,
		[\mathfrak{m}]} = A_{\mathfrak{m}}$. Hence $\oo_{X, [\mathfrak{p}]}$ is an
integrally closed integral domain whenever $\oo_{X, [\mathfrak{m}]}$ is, and it
is enough to check normality at closed stalks of quasicompact schemes.


\subsection*{Ex 5.4.B}

Let $X$ be a Noetherian normal scheme and $X = X_1 \cup \ldots \cup X_r$ be a
decomposition into irreducible components, which exists by Exercise 5.3.B. Then
as all stalks are integral, it follows from our lemma in the solution to
Exercise 5.3.C than any point $[\mathfrak{p}] \in X$ only lies in a single
irreducible component $X_i$. I.e all $X_i$ are disjoint. It follows again from
Exercise 5.3.C that each $X_i$ is an integral scheme, and from affine locality
of normality and Noetherianness that each $X_i$ is Noetherian normal. \\

Now suppose that $X$ is Noetherian, and that $X = X_1 \cup \ldots \cup X_r$ is
a decomposition of $X$ into disjoint normal integral Noetherian schemes. As
normality is stalk-local, it follows that $X$ is normal as well.

\subsection*{Ex 5.4.C}

Let $s \in \cap A_{\mathfrak{m}}$. Then let $I$ be the ideal of denominators of
$s$. Suppose towards a contradiction that $I \not = A$. Then there exists some
maximal ideal $\mathfrak{m}'$ containing $I$. But then $s \not \in
	A_{\mathfrak{m}'}$, contradicting $s \in \cap A_{\mathfrak{m}}$.

\subsection*{Ex 5.4.D}

Let $I$ be the ideal of denominators of $w/y = x/z$. Then clearly $y, z \in I$.
Now suppose that $a \in I$. Then $aw/y = b$ for some $b \in A$. Since $A$ is a
domain, it follows that $aw = yb$. Now consider $A/(y, z) \cong k[w, x]$. This
is an integral domain, and as $aw = 0,\, w \not = 0$ in $A/(y,z)$, we have $a
	\in (y, z)$. \\

Finally, to see that $I = (y, z)$ isn't a principal ideal, suppose towards a
contradiction that $(f) = (y, z)$. Then identify $f$ with a representative in
$k[w,x,y,z]$. Here we have
\[
	k[w,x,y,z]/(wz-xy, f)
	=
	A/I
	=
	k[w, x]
	=
	k[w, x, y, z]/(y, z),
\]
and so we have $(wz - xy, f) = (y, z)$ as ideals in $k[w,x,y,z]$. As $wz - xy$
is homogeneous of degree $2$, the only degree $1$ polynomials we could possibly
hope to obtain from $(wz - xy, f)$ are scalar multiples of the degree $1$
component of $f$. Either way, we can't obtain both $y$ and $z$, a contradiction.

\subsection*{Ex 5.4.E}

We state and prove Kaplansky's characterization of UFD's, which will make
solving this problem easier. To prove Kaplansky's Theorem, we'll make use of a
saturated multiplicative set which we define now.

\begin{definition}
	Let $A$ be an integral domain, and define
	\[
		T(A)
		=
		\{
		r \in A :
		r \text{ is a unit. }
		\}
		\cup
		\{
		p_1p_2 \ldots p_k \in A :
		\text{ every }
		p_i
		\text{ is prime. }
		\}.
	\]
\end{definition}

\begin{lemma}
	Let $A$ be an integral domain. Then $T(A)$ is a saturated multiplicative
	set.
\end{lemma}
\begin{proof}
	First suppose that $a, b \in T(A)$. Then clearly $ab \in T(A)$ so $T(A)$
	is multiplicative. \\

	Now suppose that $ab \in T(A)$. If $ab$ is a unit, then $a, b$ are units
	with inverses $b(ab)^{-1}, a(ab)^{-1}$, so suppose that
	\[
		ab = p_1p_2 \ldots p_k,
	\]
	with each $p_i$ prime. Then $p_1$ divides either $a$ and/or $b$.
	Say $p_1 | a$. Then we can write $a = a_1 p_1$ and after cancelation
	we get
	\[
		a_1 b = p_2 p_3 \ldots p_k.
	\]
	Continuing this way, we see that we can relabel the $p_i$ such that
	\[
		a = A p_1 p_2 \ldots p_r, \,
		b = B p_{r + 1} p_{r + 2} \ldots p_k.
	\]
	As $ab = p_1 p_2 \ldots p_k$, we have $AB = 1$,
	hence $a, b \in T(A)$.
\end{proof}

Now we're ready to prove Kaplansky's Theorem.

\begin{theorem}
	An integral domain $A$ is a UFD if and only if every non-zero prime ideal
	$\mathfrak{p}$ of $A$ contains a prime element $p \in \mathfrak{p}$.
\end{theorem}
\begin{proof}
	If a $A$ is a UFD, and $a \in \mathfrak{p}$, then $\mathfrak{p}$ contains
	an irreducible factor $u$ of $a$ by primality, and $u$ is prime as $A$ is a
	UFD. \\

	Now suppose that $A$ is a domain such that every non-zero prime ideal of
	$\mathfrak{p}$ contains a prime element $p$. We are done if we can show
	that $T(A) = A \setminus \{0\}$, as this would mean that every element of
	$A$ has a decomposition into prime elements, which is necessarily unique.
	\\

	Suppose that $a \in A \setminus T(A)$. Then $(a) \cap T(A) = \emptyset$ as
	$ra \in T(A)$ would imply $a \in T(A)$ by saturation. Let $\mathfrak{p}$ be
	an ideal containing $(a)$ which is maximal with respect to the condition
	that $\mathfrak{p} \cap T(A) = \emptyset$. Then $\mathfrak{p}$ is prime,
	for if $bc \in \mathfrak{p}$, then one of $b$ or $c$ must not lie in
	$T(A)$, say $b$, whence $\mathfrak{p} + (b)$ is an ideal containing
	$(a)$ not meeting $T(A)$. It follows by our maximal choice that
	$\mathfrak{p} = \mathfrak{p} + (b)$ so $b \in \mathfrak{p}$ and
	$\mathfrak{p}$ is prime. As $\mathfrak{p} \cap T(A) = \emptyset$,
	$\mathfrak{p}$ does not contain any prime element, from which it follows
	from our assumption that $\mathfrak{p} = (0)$. Hence $a = 0$, and we are
	done.

\end{proof}

With Kaplansky's Theorem in hand, solving the exercise is now easy.

\begin{corollary}
	Let $A$ be a UFD, and $S \subset A$ a multiplicative subset.
	Then $S^{-1}A$ is a UFD.
\end{corollary}
\begin{proof}

	Let $\phi : A \to S^{-1}A$ be the canonical localization morphism. Then let
	$S^{-1}\mathfrak{p}$ be a non-zero prime ideal of $S^{-1}A$. Then
	$\mathfrak{p} = \phi^{-1}(S^{-1}\mathfrak{p})$ is a non-zero prime ideal of
	$A$, hence contains a prime element $p \in \mathfrak{p}$. Moreover, $p \not
		\in S$ as $\phi(\mathfrak{p}) \not = S^{-1}A$. We will show that $p/1$ is
	prime in $S^{-1}A$, after which we will be done. \\

	Suppose that $p/1 | (a/A) (b/B) = ab/(AB)$, and let $d/D \in S^{-1}A$ be
	such that $pd/D = ab/(AB)$. Then $pdAB = Dab$, and $p | Dab$ so by
	primality, $p | Da$ or $p | b$. If $p | Da$, then let $pc = Da$, whence
	$(c/DA)(p/1) = a/A$ and $p/1 | a/A$. If instead $p | b$, then let $pc = b$
	whence $(c/B)(p/1) = b/B$ and $p/1 | b/B$.

\end{proof}

\subsection*{Ex 5.4.F}

Let $A$ be a UFD, and $a/b \in K(A)$ be a root of the monic polynomial
\[
	x^n + a_{n - 1}x^{n-1} + \ldots + a_0 \in A[x].
\]
As $A$ is a UFD, we can suppose that $a/b$ is reduced, that no prime $p$
divides both $a$ and $b$. But then plugging $a/b$ into the polynomial and
rearranging yields
\begin{align*}
	a^n
	=
	-
	b a_{n - 1} a^{n - 1}
	-
	b^2 a_{n - 2} a^{n - 2}
	-
	\ldots
	-
	b^{n}a_0,
\end{align*}
from which we see that $b | a^n$. It follows that $b = 1$, $a/b \in A$ and $A$
is integrally closed.

\subsection*{Ex 5.4.G}

We will show that the schemes are factorial, from which normality follows by
Exercise 5.4.F. \\

We can use Kaplansky's Theorem to show that a polynomial ring over a UFD
is again a UFD.

\begin{lemma}
	Let $A$ be a UFD. Then $A[x]$ is a UFD.
\end{lemma}
\begin{proof}
	Let $i : A \to A[x]$ be the injection, and $\mathfrak{p}$ be a prime ideal
	in $A[x]$. Then $i^{-1}(\mathfrak{p})$ is prime in $A$ hence contains a
	prime element $p$. We claim that $p$ is prime in $\mathfrak{p}$ as well.
	Suppose that $p | f(x)g(x)$, and that $a, b$ are the leading coefficients
	of $f, g$. Then $p$ divides either $a$ or $b$, say $a$. But then if we let
	$f_1 = f(x) - ax^{\deg(f)}$, we have $p | f(x)g(x) - ax^{\deg(f)}g(x) =
		f_1(x)g(x)$. We can continue this way until either $f_i = 0$ or $g_i = 0$,
	showing that $p$ divides $f$ or $g$.
\end{proof}

It follows that $k[x_1, \ldots, x_n]$ is a UFD. \\

$\A^{n}_{k}$ and $\Spec(Z)$ are both affine schemes of UFD's, hence factorial
by Exercise 5.4.E. $\P^{n}_k$ can be covered by factorial schemes and is thus
factorial, as this is a stalk-local property.

\subsection*{Ex 5.4.H}

We use all notation given in the exercise text. First of, as $A$ is a UFD and
$z^2 - f$ is irreducible, $z^2 - f$ is a prime element and $I = (z^2 - f)$ is a
prime ideal. Hence $B = A[z]/I$ is a domain. It follows that $\Spec(B)$ is
integral hence irreducible. \\

Suppose that
\[
	F(T)
	=
	T^{n}
	+
	a_{n - 1}(z) T^{n - 1}
	+
	\ldots
	+
	a_0(z)
	\in B[X]
\]
is a monic polynomial with a root $\alpha \in K(B)$. First, note that as a
vector space we have $B = A \oplus z A$, and so we can write $F(T) = G(T) + z
	H(T)$ with $G(T), H(T) \in A[T]$. As $0 = F(\alpha) = G(\alpha) + z H(\alpha)$,
we have $H(a/b) = G(a/b) = 0$. Moreover, $G$ is clearly monic as $F$ is. Thus
any element in $K(B)$ which is integral over $B$ is also integral over $A$, and
as $A$ is integrally closed, we can thus assume that $\alpha \in K(B) \setminus
	K(A)$. \\

Furthermore, we also have $K(B) = K(A) \oplus z K(A)$ as vector spaces, since
if $\frac{a + b z}{c + d z} \in B$ we can write
\begin{align*}
	\frac{a + b z}{c + d z}
	 & =
	\frac{a + b z}{c + d z}
	\frac{c - d z}{c - d z}                     \\
	 & =
	\frac{ac - f bd + (bc - ad) z}{c^2 - f d^2} \\
	 & =
	\frac{ac - f bd}{c^2 - f d^2}
	+
	z \frac{bc - ad}{c^2 - f d^2}               \\
	 & \in K(A) \oplus z K(A).
\end{align*}
Hence we can write $\alpha = g + z h$ with $g, h \in K(A)$ and $h \not = 0$.
Now Let $Q(T) = T^2 - 2gT + (g^2 - h^2 f) \in K(A)[T]$. Then
\begin{align*}
	Q(g + z h)
	=
	g^2 + 2 z gh + h^2 f
	-
	2 g^2 - 2 z gh
	+ g^2 - h^2 f
	= 0,
\end{align*}
and so $G(T)$ factorizes to $P(T)Q(T)$ in $K(A)[T]$. As $G(T), Q(T)$ are monic,
so is $P(T)$. Clearing denominators of $P, Q$, we have $k_P P(T), k_Q Q(T) \in
	A[T]$. As $G(T)$ is monic, the content of $k_P P(T) k_Q Q(T) = k_P k_Q G(T)$
must be $k_P k_Q$. As $Q(T), P(T)$ are monic in $K(A)[T]$, the contents of $k_P
	P(T), k_Q Q(T)$ can at most be $k_P, k_Q$. If we combine these two facts, we
see that the contents of $k_P P(T), k_Q Q(T)$ are exactly $k_P, k_Q$. Hence
$Q(T) \in A[T]$. \\

So we have $2g \in A$ and $g^2 - h^2 f \in A$. As $2$ is invertible, we have $g \in A$,
whence $h^2 f \in A$. Let $h = a/b$ with $a, b$ not having any prime factors in common.
Then $f/b^2 \in A$

\subsubsection*{(a)}

If $f$ is square free, this implies that $b = 1$ and $g, h \in A$ whence
$\alpha = g + z h \in B$ so $B$ is integrally closed.

\subsubsection*{(b)}
If $f = b^2$ with $b$ a non-unit, then
\[
	Q(T)
	=
	T^2
	-
	1
\]
has $z / b$ as a root, which doesn't lie in $b$


\subsection*{Ex 5.4.I}

\subsubsection*{(a)}

Let $A = \Z$, and $B = \Z[z]/(z^2 - n)$, and $\alpha = g + z h \in K(B)$
be integral over $B$. Then we can proceed just like in Exercise 5.4.H
to conclude that $2g \in A$ and $g^2 - h^2 n \in \Z$. \\

Write $g = a/b$ and $h = c/d$ with $a,b,c,d \in \Z$ and $c, d \not = 0$. Then
we have $a^2d^2 - b^2c^2 n \in \Z$. It follows that either $b = 0$ or $n$ is a
square. But no square is $3$ (or $2$) modulo $4$, hence $b = 0$. But then as
$g^2 \in \Z$, we need $g \in \Z$ and so $\alpha \in \Z$.

\subsubsection*{(b)}

Let $A = k[x_2, \ldots, x_n]$, $f = -(x_2^2 + x_3^2 + \ldots + x_m^2) \in A$,
and
\[
	B
	=
	A[x_1]/(x_1^2 - f)
	=
	k[x_1, x_2, \ldots, x_n]/(x_1^2 + x_2^2 + \ldots + x_m^2).
\]
Then as $f$ is irreducible (remember $m \geq 3$), it's square free, and we may
apply Exercise 5.4.H to see that $B$ is normal.

\subsubsection*{(c)}

Using exercise 5.4.J, we see that $A$ is isomorphic to some ring of the form
given in part (b). Hence $\Spec(A)$ is normal.

\subsection*{Ex 5.4.J}

\subsubsection*{(a)}

We follow the hint. If $n = 1$, the only quadratic forms are of the form $c
	x_1^2$, and are already diagonal. Now suppose that all quadratic forms in $n -
	1$ variables are diagonal, and let $f \in k[x_1, \ldots, x_n]$ be a quadratic
form. Then by the induction hypothesis, we may perform some linear change of
basis and write

\begin{align*}
	f
	= &
	a_1 \hat{x}_1^{2}
	+
	a_2 \hat{x}_2^{2}
	+
	\ldots
	+
	a_{n - 1} \hat{x}_{n - 1}^{2}
	+
	b_1 \hat{x}_1 x_{n}
	+
	b_2 \hat{x}_2 x_n
	+
	\ldots
	+
	b_{n - 1} \hat{x}_{n - 1} x_n
	+
	b_{n} x_n^{2}                                                          \\
	= &
	a_1 \left(\hat{x}_1 + \frac{b_1}{2} x_n\right)^{2}
	+
	a_2 \left(\hat{x}_2 + \frac{b_2}{2} x_n\right)^{2}
	+
	\ldots
	+
	a_{n - 1} \left(\hat{x}_{n - 1} + \frac{b_{n-1}}{2} x_{n-1}\right)^{2} \\
	  & +
	\left(
	b_n
	-
	\frac{a_1 b_1^2}{4}
	-
	\frac{a_2 b_2^2}{4}
	-
	\ldots
	-
	\frac{a_{n-1} b_{n - 1}^2}{4}
	\right)
	x_n,
\end{align*}
from which we see that $f$ may be diagonalized by performing
yet another change of basis.

\subsubsection*{(b)}

First note that any bilinear form
\[
	f = \sum_{i \leq j} c_{i, j} x_i x_j
\]
can be written as
\[
	f
	=
	\begin{bmatrix}
		x_0 & x_1 & \ldots & x_n
	\end{bmatrix}
	A
	\begin{bmatrix}
		x_0    \\
		x_1    \\
		\vdots \\
		x_n    \\
	\end{bmatrix}
\]
where $A$ is a symmetric matrix with $A_{i,j} = A_{j, i} = c_{i,j}/2$ for $i
	\not = j$ and $A_{i, i} = c_{i, i}$. If we perform a change of basis such that
$C = P^{T} A_{j, i} P$ has no non-zero off-diagonal entries, then clearly the
number of non-zero entries on the diagonal will be equal to the rank of the
matrix. The statement now follows from the rank of a matrix being invariant to
changes of basis.

\subsection*{Ex 5.4.K}

We have that $A = \Z[\sqrt{-5}] \cong \Z[x]/(x^2 + 5)$. This aligns with Exercise
5.4.J with $n = -5$ which is congruent to $3$ modulo $4$. Hence $\Spec(A)$
is normal, and so $A$ is integrally closed by Exercise 5.4.2. \\

$A$ is not a UFD however, since
\[
	2 * 3 = 6 = 1 + 5^2 = (1 + \sqrt{-5})(1 - \sqrt{-5})
\]

\subsection*{Ex 5.4.L}

\subsubsection*{(a)}

In our solution to Exercise 5.4.I (ii) and (iii), we saw that $\Spec(A)$ is
isomorphic to an normal scheme, and so $A$ is integrally closed by Proposition
5.4.2.

\subsubsection*{(b)}

We show that $w,x,y,z$ are irreducible in $A = k[w,x,y,z]/(wy - xz)$. As $wy -
	xz$ is a homogeneous element in the graded ring $k[w,x,y,z]$, we have that $A$
inherits the grading of $k[w,x,y,z]$. \\

Now, $w,x,y,z$ are homogeneous elements degree $1$ in $A$. If $ab = w$, then
$ab \in A_1$. Let $a_m, b_n$ be the homogeneous components of highest degree in
$a$ and $b$ respectively. Then $a_m b_n$ is a homogeneous component of $ab$,
hence $a_m b_n = w$. But $w$ has degree $1$, so $m + n = 1$, whence either $a$
or $b$ must lie in $k$ and be a unit.

\subsection*{Ex 5.4.M}

We follow the hint. First of all $A$, must be an integral domain, since if $ab
	= 0$ in $A$, then $(a \otimes 1)(b \otimes 1) = ab \otimes 1 = 0$. As $A
	\otimes l$ is a domain, either $a \otimes 1 = 0$ or $b \otimes 1 = 0$, so $a =
	0$ or $b = 0$ in $A$. \\

Let $1 = b_1, b_2, \ldots, b_m$ be a $k$-basis for $l$. We will show that $1
	\otimes b_i$ forms a free $A$-basis for $A \otimes_{k} l$. Let $a \otimes l \in
	A \otimes_{k} l$, and suppose that $l = \sum_{i = 1}^{m} k_i b_i$ with $k_i \in
	k$. Then
\[
	a \otimes l
	=
	a \otimes \left(\sum_{i = 1}^{m} k_i b_i\right)
	=
	\sum_{i = 1}^{m} a \otimes k_i b_i
	=
	\sum_{i = 1}^{m} a k_i (1 \otimes b_i),
\]
and so the $1 \otimes b_i$ generate $A \otimes_{k} l$ as an $A$-module. For linear
independence we shall make use of the following lemma.

\begin{lemma}
	Let $V, W$ be $k$-spaces with bases $v_i, i \in I$ and $w_j, j \in J$
	respectively. Then $v_i \otimes w_j, (i, j) \in I \times J$ is a basis for
	$V \otimes W$.
\end{lemma}
\begin{proof}
	Let $v \otimes w$ be a pure tensor in $V \otimes W$. We can decompose $v,
		w$ according to $v = \sum_{i \in I'} a_i v_i, w = \sum_{j \in J'} b_j w_j$
	with $I', J'$ finite. We then have
	\[
		v \otimes w
		=
		\left(
		\sum_{i \in I'} a_i v_i
		\right)
		\otimes
		\left(
		\sum_{j \in J'} b_j w_j
		\right)
		=
		\sum_{(i, j) \in I' \times J'}
		a_i b_j
		(v_i \otimes w_j).
	\]
	As $V \otimes W$ is the span of all pure tensors, it follows that $v_i
		\otimes w_j, (i, j) \in I \times J$ generates $V \otimes W$. \\

	For linear independence, consider the projection $\pi_r : V \otimes W \to V
		\otimes w_r$ defined on pure tensors as $\pi_r : v \otimes w \mapsto b_r v$
	where $b_rw_r$ is the $w_r$ component of $w$. Then $\pi_r$ is clearly linear
	in the first coordinate. Moreover,
	\[
		\pi_r(v, w + w')
		=
		(b_r + b_r') v
		=
		b_r v + b_r' v
		=
		\pi_r(v, w)
		=
		\pi_r(v, w')
	\]
	and
	\[
		\pi_r(v, B w)
		=
		B b_r v
		=
		B \pi_r(v, w),
	\]
	so $\pi_r$ is bilinear, hence factors through $\otimes$.
	Suppose now that
	\[
		0 = \sum_{i, j \in I \times J} c_{i, j} (v_i \otimes w_j)
	\]
	is some linear dependence (finitely many $c_{i, j} \not = 0$). Then let $\phi$
	be the unique map such that $\pi_{r}(v, w) = \phi(v \otimes w)$. Then
	we get
	\begin{align*}
		0
		 & =
		\phi(0)                                                                \\
		 & =
		\phi\left(\sum_{i, j \in I \times J} c_{i, j} (v_i \otimes w_j)\right) \\
		 & =
		\phi\left(\sum_{i \in I} c_{i, r} (v_i \otimes w_r)\right)             \\
		 & =
		\sum_{i \in I} c_{i, r} v_i,
	\end{align*}
	and so all $c_{i, r}, i \in I$ are $0$. The same procedure can be repeated
	for every coordinate $r \in J$ to show that $c_{i, j} = 0$ for all $i, j
		\in I, J$. Hence the $v_i \otimes w_j$ form a basis.
\end{proof}


Moreover, as the $1 \otimes b_i$ are linearly independent over $k$,

Now suppose that we have some $A$-linear dependence
\[
	0
	=
	\sum_{i = 1}^{m} a_i (1 \otimes b_i)
	=
	\sum_{i = 1}^{m} a_i \otimes b_i.
\]
Then

\section*{Chapter 6}
\subsection*{Ex 6.1.A}

We describe explicitly the isomorphism $\psi_i : M_{f_i} \to M_{i}$. It takes
an element $(m_{1}, m_{2}, \ldots, m_n) \otimes 1/f_i^{k} \in M_{f_i} =
	\ker(\gamma) \otimes A_{f_i}$ to
\[
	\left(\phi_{1,i}\left(m_1/f_i^{k}\right), \ldots, \phi_{n,i}\left(m_n/f_i^{k}\right)\right),
\]
where $m_j/f_i^{k} \in \left(M_j\right)_{f_i}$ and
$\phi_{j,i}\left(m_j/f_i^{k}\right) \in \left(M_i\right)_{f_j}$ and $M_i$ is
identified with the kernel of the exact sequence as in 6.1.2.4. \\

From this its easy to see that the triangle commutes as the $\phi_{i,j}$
satisfy the cocycle-condition and so
\begin{align*}
	\phi_{i, k} \left(\phi_{1,i}\left(m_1/f_i^{k}\right), \ldots,
	\phi_{n,i}\left(m_n/f_i^{k}\right)\right)
	 & =
	\left(\phi_{i, k} \circ \phi_{1,i}\left(m_1/f_i^{k}\right), \ldots,
	\phi_{i, k} \circ \phi_{n,i}\left(m_n/f_i^{k}\right)\right) \\
	 & =
	\left(\phi_{1,k}\left(m_1/f_i^{k}\right), \ldots,
	\phi_{n,k}\left(m_n/f_i^{k}\right)\right)                   \\
\end{align*}

\subsection*{Ex 6.1.B}
\subsubsection*{(a)}

As any localization of $k(x)$ as a $k[x]$ module is again $k(x)$ (indeed, every
element is already invertible in $k(x)$), it follows that the quasicoherent
sheaf $\widetilde{k(x)}$ has the same module of sections $k(x)$ assigned to
every open set $U \subset \Spec(k[x])$. Hence $\widetilde{k(x)}$ is not the
same as the skyscraper sheaf, which has the $0$-module assigned to any open set
not containing $[(x)]$.

\subsubsection*{(b)}
In the case with a skyscraper sheaf supported at $[(0)]$, we have that it
assigns every open proper subset the module of sections $k(x)$ since every open
subset contains $[(0)]$, and hence is equal to $\widetilde{k(x)}$ by the
arguments above.

\subsection*{Ex 6.2.A}

Let $\mathcal{F}^{b}$ be a sheaf on a distinguished affine base, and suppose
that $f, g \in \mathcal{F}^{b}(U)$ are two sections which agree on all stalks
$\mathcal{F}^{b}_{\mathfrak{p}}, \mathfrak{p} \in U$, and let $\Spec(A) \subset
	U$ be an affine open set. Then for any prime ideal $\mathfrak{p} \in \Spec(A)$,
there is an element $h \in A$ such that $\mathfrak{p} \in D_h$ and $f = g$ in
$A_{h}$. These $D_h$ cover $\mathcal{F}^{b}(\Spec(A))$, and $f = g$ in $A$ by
identity.


\subsection*{Ex 6.2.B}

As any scheme has an open cover by affine schemes, it follows from Exercise 2.5.C
that it's enough to show that morhpism of sheaves over an affine scheme

We show that a morhpism on any distinguished affine base induces a morhpism on
the corresponding sheaves, after which the equivalence will be evident. \\

Let $f : \mathcal{F}^{b} \to \mathcal{G}^{b}$ be a morphism of sheaves on a
distinguished affine base of $X$. Let $U$ be an open subset of $X$ and $U_i =
	\Spec(A_i), i \in I$ be an affine open cover of $U$. Then as we have morphisms
\[
	f_i
	:
	\mathcal{F}^{b}(U_i) = \mathcal{F}(U_i)
	\to
	\mathcal{G}^{b}(U_i) = \mathcal{G}(U_i)
\]
which agree on intersections, hence glue together to a map $f_U :
	\mathcal{F}(U) \to \mathcal{G}(B)$.

\subsection*{Ex 6.2.C}

\subsection*{Ex 6.2.D}

For each inclusion $\Spec(A_f) \hookrightarrow \Spec(A)$, we have a
commutative diagram
\[
	\begin{tikzcd}
		&
		\Gamma(\Spec(A), \mathcal{F})
		\ar[r, "\mathrm{id}"]
		\ar[d, "\otimes A_f"]
		&
		\Gamma(\Spec(A), \mathcal{F})
		\ar[d, "\phi"] \\
		&
		\Gamma(\Spec(A), \mathcal{F})_f
		\ar[r, "\alpha"]
		&
		\Gamma(\Spec(A_f), \mathcal{F})
	\end{tikzcd}.
\]
Let $M = \Gamma(\Spec(A), \mathcal{F})$.
As
\[
	\Gamma(\Spec(A_f), \widetilde{M})
	=
	M_f,
\]
we get a map of sheaves on a distinguished affine base of $X$
\[
	\alpha^{b}
	:
	\widetilde{M}^{b}
	\to
	\mathcal{F}^{b}
\]
which induces a map of sheaves on $X$
\[
	\alpha
	:
	\widetilde{M}
	\to
	\mathcal{F},
\]
and this map is an isomorphism if and only if each $\alpha$ is as isomorphisms
of sheaves are determined at the level of stalks.

\subsection*{Ex 6.2.E}

Elements of $\mathfrak{N}(A_f)$ are elements $a/f^{k} \in A_f$ which are
nilpotent. Unless $A_f = 0$, $1/f^{k}$ is a unit so $a$ is nilpotent and we see
that $\mathfrak{N}(A_f) = \mathfrak{N}(A)_f$. \\

Thus for any scheme $X$, we may define the sheaf of nilpotents
$\mathfrak{N}(X)$ by $\Gamma(U, \mathfrak{N}(X)) = \mathfrak{N}(\Gamma(U))$,
and this is a quasicoherent scheme by Exercise 6.1.D.

\subsection*{Ex 6.2.F}

The described data forms a quasicoherent module by Exercise 6.1.D, and it's
isomorphic to the tensor product of the two sheaves as it agrees with it on the
level of stalks.

\subsection*{Ex 6.2.G}

First note that the functor $\otimes_{\Gamma(X, \mathcal{O}_X)} \Gamma(X,
	\mathcal{O}_X)_f$ is exact as it is nothing but localization by the
multiplicative subset $\{f,f_{2},\ldots\}$in the category of $\Gamma(X,
	\mathcal{O}_X)$-modules. \\

Moreover, we know that the equalizer sequence is exact (taking the product of
the $U_i$ is the same thing as taking the coproduct as the cover is finite),
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \Gamma(X, \mathcal{F})
		\ar[r]{f}
		& \bigoplus \Gamma(U_i, \mathcal{F})
		\ar[r]{g}
		& \bigoplus \Gamma(U_i \cap U_j, \mathcal{F}),
	\end{tikzcd}
\]
and $\bigoplus \Gamma(U_i \cap U_j, \mathcal{F})$, injects into
$\bigoplus \Gamma(U_{ijk}, \mathcal{F})$ by the identity axiom of the sheaf on $U_i \cap U_j$,
hence the given sequence is exact,
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \Gamma(X, \mathcal{F})
		\ar[r]{f}
		& \bigoplus \Gamma(U_i, \mathcal{F})
		\ar[r]{g}
		& \bigoplus \Gamma(U_{ijk}, \mathcal{F}).
	\end{tikzcd}
\]
If we follow the hint and localize at $f$ we get
an exact sequence
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \Gamma(X, \mathcal{F})_f
		\ar[r]{f}
		& \bigoplus \Gamma(U_i, \mathcal{F})_f
		\ar[r]{g}
		& \bigoplus \Gamma(U_{ijk}, \mathcal{F})_f,
	\end{tikzcd}
\]
and as $\mathcal{F}$ is quasicoherent localization on affine open sets is the same as restriction,
and the sequence becomes
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \Gamma(X, \mathcal{F})_f
		\ar[r]{f}
		& \bigoplus \Gamma(U_i \cap X_f, \mathcal{F})
		\ar[r]{g}
		& \bigoplus \Gamma(U_{ijk} \cap X_f, \mathcal{F}).
	\end{tikzcd}
\]
But we also have that the following sequence is exact by the same arguments as above,
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \Gamma(X_f, \mathcal{F})
		\ar[r]{f}
		& \bigoplus \Gamma(U_i \cap X_f, \mathcal{F})
		\ar[r]{g}
		& \bigoplus \Gamma(U_{ijk} \cap X_f, \mathcal{F}),
	\end{tikzcd}
\]
hence we get a canonical isomorphism
\[
	\Gamma(X_f, \mathcal{F})
	\cong
	\Gamma(X, \mathcal{F})_f
\]
making the given diagram commute.

\subsection*{Ex 6.2.H}
Later todo TODO ToDo Todo

\subsection*{Ex 6.3.A}

By Exercise 2.6.D, exactness may be checked at the level of stalks, and it
follows that a sequence of quasicoherent sheaves on $X$ is exact if and only if
given any cover $U_i$, the restriction of the sequence to any $U_i$ is exact.
As the sheaves are quasicoherent, their restrictions to affine subsets $U_i$
may be represented by module sheaves
\[
	\begin{tikzcd}
		& \widetilde{M'}_i
		\ar[r]
		& \widetilde{M}_i
		\ar[r]
		& \widetilde{M''}_i.
	\end{tikzcd}
\]
A sequence of $A_i$-modules is exact if and only if it's exact on all prime
ideals of $A_i$, so the sequence of $\mathcal{O}_{\Spec A_i}$-modules above is
exact if and only the corresponding sequence of modules
\[
	\begin{tikzcd}
		& M'_i
		\ar[r]
		& M_i
		\ar[r]
		& M''_i
	\end{tikzcd}
\]
is exact.

\subsection*{Ex 6.4.A}

\subsubsection*{(a)}

As $A_f$-modules, $M_f \cong M \otimes_A A_f$, which is generated by tensors $g
	\otimes a$, where the $g$ generate $M$ and the $a$'s generate $A_f$ as
$A_f$-modules. As $A_f$ is generated by $1$, and any generating set of $M$ as
an $A$-module is a generating set of $M$ as an $A_f$-module, the statement
follows immediately.

\subsubsection*{(b)}

Suppose that $m_{ij}/f_i^{k_j}, j \in J_i$ generate $M_{f_i}$ as an $A_{f_i}$-module.
Our claim is that $m_{ij}, i \in I, j \in J_i$ generates $M$ as an $A$-module. To see
this, let $m \in M$. Then for each $i \in I$, we can write
\[
	m
	=
	\sum_{j \in J_i} a_{ij}/{f_i^{k_j''}} m_{ij}/f_i^{k_j}
	=
	\sum_{j \in J_i} a_{ij} m_{ij}/f_i^{k_j'}
\]
and
\[
	f_i^{k_j'} m
	=
	\sum_{j \in J_i} a_{ij} m_{ij}
\]
Taking $N \in \N$ larger than all $k_j'$, and a partition of unity
\[
	1
	=
	\sum_{i \in I} b_i f_i^{N},
\]
we get
\begin{align*}
	m
	 & =
	\sum_{i \in I} b_i f_i^{N}m \\
	 & =
	\sum_{i \in I} b_i f_i^{N - k_j'}
	\sum_{j \in J_i} a_{ij} m_{ij}.
\end{align*}
and we are done.

\subsection*{Ex 6.6.A}

By the definition of localization at a prime ideal, $m$ is $0$ in
$M_{\mathfrak{p}}$ if and only if there is some $a \in A \setminus
	\mathfrak{p}$ such that $am = 0$ in $A$. Such $a$ are precisely the elements of
$\ann\ m \setminus \mathfrak{p}$, hence $m$ is $0$ in $M_{\mathfrak{p}}$ if and
only if $\mathfrak{p} \not \supset \ann\ m$.

\subsection*{Ex 6.6.B}
\subsubsection*{(a)}

As localization is an exact functor, the sequence
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& M'_{\mathfrak{p}}
		\ar[r]
		& M_{\mathfrak{p}}
		\ar[r]
		& M_{\mathfrak{p}}''
		\ar[r]
		& 0
	\end{tikzcd}
\]
remains exact, and we see that $M_{\mathfrak{p}}$ is nonzero if and only at
least one of $M'_{\mathfrak{p}}, M''_{\mathfrak{p}}$ are nonzero

\subsubsection*{(b)}

We follow the hint and induct on the number of generators of $M$. The base case
is given in the passage following Exercise 6.6.A. Now suppose $M$ is generated
by $n$ elements and that the statement is true for modules generated by $n - 1$
elements. Let $m_{1}, \ldots, m_{n}$ be a generating set for $M$ and consider the exact
sequence
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& \bigoplus_{i = 1}^{n - 1} m_i A
		\ar[r]
		& M
		\ar[r]
		& m_n A
		\ar[r]
		& 0.
	\end{tikzcd}
\]
The left and right modules have closed supports by the inductive hypothesis,
and as the union of two closed subsets are closed, $\supp\ M$ is closed by part
(a) of this exercise.

\subsection*{Ex 6.6.C}

Let $m_{1}, \ldots, m_n$ be a generating set of $M$. Then $x$ vanishes at all
primes containing any $\ann\ m_i$. By prime avoidance, $x$ vanishes at all primes
containing $I = \bigcap \ann\ m_i$. Hence $x$ is nilpotent in $A/I$ and some power
of $x$ lies in $I$. But as $I$ annihilates all generators $m_i$, $I$
annihilates all of $M$, and $x \in \sqrt{\ann\ M}$.

\subsection*{Ex 6.6.D}

$(M/xM)_{\mathfrak{p}} \cong M_{\mathfrak{p}}/xM_{\mathfrak{p}}$ is nonzero if
and only if $M_{\mathfrak{p}}$ is nonzero and $xM_\mathfrak{p} \not =
	M_{\mathfrak{p}}$. By Nakayama's Lemma, the second condition is equivalent to
$x \in \mathfrak{p}$ and we are done.

\subsection*{Ex 6.6.E}

Every element has $0$ annihilator as there are non zerodivisors.

\subsection*{Ex 6.6.F}

Let $f = p_{1}p_{2} \ldots p_m$ be a factorization of $f$ into prime factors
and $g \in \Kx$. Then let $h \in (g:f)$. As $\Kx$ is a UFD, it follows that $h$
must be divisible by all prime factors $p_i$ which don't divide $g$, hence
$(g:f) = p_{i_{1}}p_{i_{2}} \ldots p_{i_k}$. As $(g:f)$ corresponds to $\ann\
	g$ in $\Kx/f$, we see that $\ann\ g$ is prime if and only if $\ann\ g = p_i$
for some $i$.

\subsection*{Ex 6.6.G}


\subsubsection*{(a)}

If $\mathfrak{p} = \ann\ m \in \Ass\ M'$, then as $m \in M$ $\mathfrak{p} \in
	\Ass\ M$ as well.

\subsubsection*{(b)}

If $\ann\ m = \mathfrak{p}$ is prime, $m$ is nonzero in $M_{\mathfrak{p}}$ by
the definition of localization of a module at a prime ideal.

\subsection*{Ex 6.6.H}

If such $y = y_{0}$, exist repeat for $m_{1} = m y_{0}$, and either we find
$y_{1}$ such that $y_{1}m_{1} \not = 0$ and $\ann\ y_{1}m_{1} \not = \ann\
	m_{1}$, or we yada yada, get an increasing chain of annihilator ideals, yada
yada Noetherian ring so chain terminates, take $x$ to be the product of all
elements until termination. \\

\subsection*{Ex 6.6.I}

We follow the hint: If the kernel $K$ is nonzero, there is some associated
prime $\mathfrak{p} = \ann\ m \in \Ass\ K \subseteq \Ass\ M$, and $m \not = 0$
in $M_{\mathfrak{p}} = M_{\ann\ m}$ since $\mathfrak{p} \in \sup\ m$.

\subsection*{Ex 6.6.J}

Let $\mathfrak{p}_{0} \in \Ass\ M$ and $M_{0} = A/\mathfrak{p}_{0}$. Then
$M_{0} \subset M$, and if $M/M_{0} \not = 0$, let $\mathfrak{p}_{1} \in \Ass\
	M/M_{0}$. Then $A/\mathfrak{p}_{1} \subset M/M_{0}$, and we let $M_{1}$ be the
corresponding preimage in $M$. Then we have a chain
\[
	M_{0} \subset M_{1} \subset M,
\]
and $M_{0} \cong A/\mathfrak{p}_{0}, M_{1}/M_{0} \cong A/\mathfrak{p}_{1}$ This
process can be repeated, and must terminate in a finite amount of steps as $A,
	M$ are Noetherian, after which we've obtained $n \in \N$ such that $M_n = M$.

\subsection*{Ex 6.6.K}

Suppose that $\mathfrak{p} \in \Ass\ M_k \setminus \Ass\ M_{k-1}$. Then by
Proposition 6.6.15, $\mathfrak{p} \in \Ass\ (M_k/M_{k-1}) = \Ass\
	A/\mathfrak{p}_k$, and as $A/\mathfrak{p}_k$ is a domain, it follows that
$\ann_A\ (a + \mathfrak{p}_k) = \mathfrak{p}_k$ for any $a + \mathfrak{p}_k
	\in A/\mathfrak{p}_k$. We've shown that $\mathfrak{p} = \mathfrak{p}_k$ and the
statement follows by induction.

\subsection*{Ex 6.6.L}

As $A$ is a domain and $M \subset A$, it follows that $\Ass\ M = \{(0)\}$. Now,
suppose towards a contradiction that $M' \subset M$ is such that $M/M' \cong
	A$. Then let $m$ be the preimage of $1$ in $M$. It follows that $mA \cap M' =
	0$. Now let $m' \in M'$. Then $m'm \in mA \cap M' = \{0\}$ and $m' = 0$ as $m
	\not = 0$ and $A$ is a domain. Hence $M' = 0$ and $M = mA$, which is a
contradiction since $M$ is an ideal of height $2$ and hence can't be principal.

\subsection*{Ex 6.6.M}

We proceed by induction on the number $n$ of associated primes of $M$. \\

For the base case, suppose that $\Ass\ M = \{\mathfrak{q}\}$ and let
$\mathfrak{p}' \in \Spec(A)$ be some prime not containing $\mathfrak{q}$. Let
$K, P$ be the kernel and image of the localization of $M$ at $\mathfrak{p}'$
and consider the exact sequence of $A$-modules
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& K
		\ar[r]
		& M
		\ar[r]
		& P
		\ar[r]
		& 0.
	\end{tikzcd}
\]
First of all, $K$ is nonzero as there is some element $m \in M$ with
annihilator $\mathfrak{q}$, and an element $a \in \mathfrak{q} \setminus
	\mathfrak{p}'$ which is a unit in $A_{\mathfrak{p}'}$ and $m = am/a = 0$ in
$M_{\mathfrak{p}'}$. Moreover as $\mathfrak{p}' \not \in \Supp\ K$ and
$\mathfrak{p}' \not \in \Ass\ M$, it follows from Proposition 6.6.21 that
$\mathfrak{p}' \not \in \Ass\ P$. But localization of $P$ at $\mathfrak{p}'$
has trivial kernel since we've already factored out $K$, and it follows that
$P$ must be $0$. Hence $\mathfrak{p}' \not \in \Supp(M)$, and we've shown that
every prime in the support of $M$ must contain $Q$, and in particular the given
minimal prime $\mathfrak{p}$ must be equal to $\mathfrak{q}$ whence we obtain
$\mathfrak{p} \in \Ass\ M$. \\

Now suppose that $M$ has $n > 1$ associated primes and that
\[
	M_{0} \subset \ldots \subset M_m
\]
is a filtration of $M$ as in Proposition 6.6.21. Then let $k$ be the largest
index such that $\Ass\ M_k \subsetneq \Ass\ M$. \\

First consider the case when $\mathfrak{p} \in \Supp\ M_k$. Then as $\Supp\ M_k
	\subset \Supp\ M$, we must have $\mathfrak{p}$ a minimal element of $\Supp\
	M_k$ as well, and $\mathfrak{p} \in \Ass\ M_k \subset \Ass\ M$ by induction. \\

Now consider the case when $\mathfrak{p} \not \in \Supp\ M_k$. Then $\Ass\ M_k
	= \Ass\ M_{k + 1} \setminus \mathfrak{p}$ by our choice of $k$, and $M_{k +
			1}/M_k = A/\mathfrak{p}$ by Proposition 6.6.15. We have a S.E.S
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& M_{k}
		\ar[r]
		& M_{k + 1}
		\ar[r]
		& M_{k + 1}/M_k
		\ar[r]
		& 0
	\end{tikzcd}
\]
satisfying the hypothesis of Proposition 6.6.21, and $\mathfrak{p} \in \Ass\
	M_{k + 1} \subset \Ass\ M$.

\subsection*{Ex 6.6.N}

Suppose that $\mathfrak{p} \in \Spec(A)$ is such that $A_{\mathfrak{p}}$ is
reduced. Then let $a \in \mathfrak{N}$ be such that $a^{k} = 0$ in $A$. Then we
have $a^{k} = 0$ in $A_{\mathfrak{p}}$ as well, whence it follows that $a = 0$
in $A_{\mathfrak{p}}$. Thus $\mathfrak{p} \not \in \Supp\ \mathfrak{N}$. \\

Now suppose that $\mathfrak{p} \in \Supp\ \mathfrak{N}$ and let $a \in
	\mathfrak{N}$ be such that $a \not = 0$ near $\mathfrak{p}$. Then again $a^{k}
	= 0$ near $\mathfrak{p}$ and so $A_{\mathfrak{p}}$ is not reduced.

\subsection*{Ex 6.6.O}

This is immediate from exercise 6.6.A which says that $\Supp\ f = V(\ann\ f)$
and the definition of associated primes.

\subsection*{Ex 6.6.P}

Let $M_k \subset M_{k + 1}$ be two modules in the filtration and consider the S.E.S
\[
	\begin{tikzcd}
		& 0
		\ar[r]
		& M_k
		\ar[r]
		& M_{k + 1}
		\ar[r]
		& A/\mathfrak{p}_{k}
		\ar[r]
		& 0.
	\end{tikzcd}
\]
Then it follows from Exercise 6.6.B.(a) that
\[
	\Supp\ A/\mathfrak{p}_k
	=
	\overline{[\mathfrak{p}_k]}
	\subset
	\Supp\ M_{k + 1}
	\subset
	\Supp\ M.
\]

\subsection*{Ex 6.6.Q}

Suppose that $\mathfrak{p} \in \Supp\ S^{-1}M$. Then let $m/s \in S^{-1}M$ be
an element which is nonzero in $(S^{-1}M)_{\mathfrak{p}}$. It follows that
there is no element in $S^{-1}A \setminus \mathfrak{p}$ which annihilates
$m/s$, hence there is no element in $A \setminus \mathfrak{p}$ which
annihilates $m$ and so $m$ is nonzero in $M_{\mathfrak{p}}$ and $\mathfrak{p}
	\in \Supp\ M$. \\

Now suppose that $\mathfrak{p} \in \Supp\ M \cap \Spec\ S^{-1}A$ and let $m \in
	M$ be an element which is nonzero near $\mathfrak{p}$. Then the annihilator of
$m$ is contained in $\mathfrak{p}$ and as $S$ doesn't meet $\mathfrak{p}$, the
annihilator of $m$ doesn't meet the union of the two multiplicative sets $S
	\cup (A \setminus \mathfrak{p})$ and $m$ is nonzero in
$(S^{-1}M)_{\mathfrak{p}}$ and $\mathfrak{p} \in \Supp\ S^{-1}A$.

\subsection*{Ex 6.6.R}

Suppose that $\mathfrak{p} = \ann\ a$ is an embedded prime of $\Spec\ A$.
$\mathfrak{p}$ lies in no minimal prime of $A$, and by prime avoidance, doesn't
lie in their union. So let $b \in \mathfrak{p}$ be an element which avoids all
minimal primes of $A$. As $ab = 0$, $a$ lies in all minimal primes of $A$ by
primality, whence $a$ lies in all primes of $A$ and $a$ is nilpotent. \\

We can do even better: As $a$ is nilpotent, it must be contained in every prime
ideal and in particular $\mathfrak{p}$. But then $a^{2} \in a\mathfrak{p} = 0$
so $a$ has square $0$.

\subsection*{Ex 6.6.S}

By the exercise above, $\mathfrak{p}$ is the annihilator of a nilpotent element
$a \in A$. As $a$ is nonzero in $A_{\ann(a)} = A_{\mathfrak{p}}$, we obtain a
nilpotent element here.

\subsection*{Ex 6.6.T}
\subsubsection*{(a)}

A basis for $A$ as a $k$-space is given by $1, y, x, x^{2}, \ldots$. We have
that $\ann\ 1 = (0)$, $\ann\ x^{k} = (y)$, $\ann\ y = (x, y)$. Thus $\Ass\ A =
	\{(y), (x, y)\}$, and the support of $f \not = 0$ is all of $\Spec(A)$ if $f$ has
a nonzero constant term, else if it contains a nonzero power of $x$ it's supported
at the line $x=0$, otherwise it's a multiple of $y$ and only supported at the
origin.

\subsubsection*{(b)}

\subsection*{Ex 6.6.U}
\subsubsection*{(a)}

Let $A$ be our ring. We have that $(x - 1, y - 1)$ is an embedded prime
contained in the minimal prime $(y - x^{2})$, and that $(x - 2, y - 2)$ is a
minimal prime. \\

Before we draw the "fuzz", we first discuss the relations between embedded
primes and fuzz. In Chapter 4.2, an example of fuzz is given in the scheme
$\Spec\ k[x, y]/(y^{2}, xy)$. Every global section on this scheme can be
written as $f(x) + ay$ for some $f(x) \in k[x], a \in k$. The fuzz is
meant to give an intuitive informal explanation of the following:
given a polynomial $f \in k[x, y]$, if we take the image of
$f$ in $k[x, y]/(y^{2}, xy)$, we remember the partial derivative
of $f$ in the $y$ direction at the origin. That is, we have a commutative
diagram
\[
	\begin{tikzcd}
		& k[x, y]
		\ar[r, "f \mapsto f'_{y}(0)"]
		\ar[dr]
		& k[x, y]/(x, y) \\
		&
		& k[x, y]/(y^{2}, xy)
		\ar[u, "f \mapsto f'_{y}(0)"].
	\end{tikzcd}
\]
Indeed, the map $k$-linear derivation $f \mapsto f'_{y}(0)$ has kernel all
polynomials in $k[x, y]$ without a linear $y$ term, and hence vanishes on
$(y^{2}, xy)$ making the map out of $k[x, y]/(y^{2}, xy)$ well-defined.
Moreover, crucially this map does not factor through $k[x, y]/\sqrt{(y^{2}, xy)}
	= k[x, y]/(y)$, and thus the normal "affine variety picture" does not capture
this behavior. Hence, to illustrate this, we draw the scheme $\Spec\ k[x,
			y]/(y^{2}, xy)$ by first drawing the reduced version $\Spec\ k[x, y]/(x, y)$,
and then adding some "fuzz" around the origin to capture the fact that our
nonreduced scheme contains "first-order differential information" about the
origin. \\

Now let's formalize this. We say that an affine $k$-scheme $\Spec\ A$ with
nilradical $\mathfrak{N}$ has fuzz at the point $\mathfrak{p}$ if there is some
$k$-derivation $D : A \to A/\mathfrak{p}$ which doesn't factor through
$A/\mathfrak{N}$. \\

We will first show that any nilpotent element of a finitely generated
$k$-algebra induces fuzz somewhere. If $A \cong \Kx / I$, then $\Omega_{A|k}$
is the cokernel of the jacobian map $I/I^{2} \to \oplus_{i}Adx_i$. Thus if $f
	\in A$ and $df = 0$ in $\Omega_{A|k}$, there is some element $g \in I/I^{2}$
such that $dg = df$ in $\Omega_{\Kx | k}$. As $d : \Kx \to \Omega_{\Kx | k}$
has kernel $k$, it follows that $f$ and $g$ differ by a constant, whence $f$ is
a constant modulo $I$. Hence the kernel of $d : A \to \Omega_{A|k}$ is $k$. It
follows that if $t \in A$ is nilpotent, that $dt \in \Omega_{A|k}$ is nonzero.
Meanwhile, $dt$ lies in the kernel of $\Omega_{A|k} \to
	\Omega_{A/\mathfrak{N}|k}$ so the existence of $dt$ shows that we have fuzz
somewhere. \\

\begin{lemma}
	Let $A = \Kx/I$ be a finitely generated $\K$-algebra, and $d : A \to \Omega_{A \vert \K}$
	be the universal derivation. Then $\ker(d) = \K$.
\end{lemma}
\begin{proof}
	By the conormal sequence, $\Omega_{A \vert \K}$ may be identified with
	the cokernel of
	\[
		D : I/I^{2} \to A \otimes_\Kx \Omega_{\Kx \vert \K}
	\]
	sending
	\[
		D : a(i + I^{2})
		\mapsto
		a \otimes di.
	\]
	Hence $f \in \ker(d)$ if and only if there is some element $i + I^{2} \in I/I^{2}$
	such that $df = di$ in $A \otimes_{\Kx \Omega_{\Kx \vert \K}}$, which in turn
	happens if and only if $d(f - i)$ lies in the submodule $I\Omega_{\Kx \vert \K}$
	in $\Omega_{\Kx \vert \K}$.
\end{proof}

\subsection*{Ex 6.6.V}

\begin{definition}
	Let $X$ be a locally Noetherian scheme and $[\mathfrak{p}] \in X$. Then
	$[\mathfrak{p}]$ is said to be an associated point of $X$ if there exist
	an Noetherian affine open set $\Spec(A)$ containing $[\mathfrak{p}]$
	and $\mathfrak{p}$ is an associated prime of $A$. \\
\end{definition}

\begin{lemma}
	Let $X$ be a locally Noetherian scheme and suppose that $[\mathfrak{p}]$ is
	an associated point of $X$. Then for any Noetherian affine open set
	$\Spec(A)$ containing $[\mathfrak{p}]$, we have that $\mathfrak{p}$ is an
	associated prime of $A$.
\end{lemma}
\begin{proof}
	Let $\Spec(A')$ be a Noetherian affine open set containing $[\mathfrak{p}]$
	such that $\mathfrak{p} \in \Ass(A')$. Then
	\[
		\mathfrak{p}
		\in
		\Ass_{A'_{\mathfrak{p}}}(A'_{\mathfrak{p}})
		=
		\Ass_{A_{\mathfrak{p}}}(A_{\mathfrak{p}})
		\subseteq
		\Ass_{A}(A).
	\]
\end{proof}

\subsection*{Ex 6.6.W}

Let $K$ be the kernel of the map, and $\Spec(A_i), i \in I$ be a Noetherian
affine cover of $X$. Then let $\Spec(B_{ij}), j \in J_i$ be an open
distinguished affine cover of each $U_i = U \cap \Spec(A_i)$. As each $B_{ij}$
is a localization of a Noetherian ring $A_i$ and hence Noetherian, it follows
from Exercise 6.6.11.1 that the map that $K$ is $0$ on $\Spec(B_{ij})$. As $K$
is $0$ on an open cover, $K$ is $0$ globally.

\subsection*{Ex 6.6.Z}

From the definition, a rational function requires us to have a set $U$
containing all associated points, and the image of a function $f \in
	\mathcal{O}(U)$. If $f', U'$ is another collection of such data, the rational
functions $f$ and $f'$ agree if and only if they agree in the image of
6.6.32.1, which they do if and only if they agree on $U \cap U'$, since $U \cap
	U'$ contains all associated points. \\

If $X$ is reduced, it has no embedded associated points, and the set of
associated points are exactly the generic points of the irreducible components.
An open set $U$ contains the generic point $[\mathfrak{p}_r]$ of an irreducible
component $X_r$ if and only if $U \cap X_r$ does. Every nonempty open set of
$X_r$ contains the generic point $[\mathfrak{p}]_r$, hence $U$ contains
$[\mathfrak{p}]$ if and only if it intersects $X_r$.


\section*{Ch 7}

\subsection*{Ex 7.2.A}

For the map of topological spaces, we simply send $x \in X$ to $\pi_i(x)$ for
any $U_i$ containing $x$. This is a well-defined map as the $\pi_i$ agree on
overlaps. Moreover, if $U \subset Y$ is open, then $\restr{\pi^{-1}(U)}{U_i} =
	\pi_i^{-1}(U)$ is open in $U_i$, and hence $\pi^{-1}(U)$ is open in $X$ as it's
open on an open cover. \\

Now for the map of structure sheaves, for $V$ open in $Y$, let $V_i = U \cap
	V_i$. Then for any $y \in V$, as the $\pi_i$ agree on the overlaps of the
$V_i$, the $\restr{\pi_i}{V_i}(y)$ must agree on the overlaps of the
$\pi_i^{-1}(V_i)$, and hence glue to an element $x \in
	\pi_{*}\mathcal{O}_{X}(V)$, which we define to be the image of $y$ by the map
$\pi$. Then $\pi$ commutes with restrictions since the $\pi_i$ do, and we have
a map of sheaves $\mathcal{O}_Y \to \pi_{*}\mathcal{O}_X$.

\subsection*{Ex 7.2.B}

Suppose that we have a $f, g : \mathcal{O}_X \to \mathcal{O}_Y$
which both agree after being postcomposed with an open immersion
$\iota : \mathcal{O}_Y \to \mathcal{O}_Z$. \\

As $\iota$ is an injection on the underlying set, it follows that $f$ and $g$
agree as maps of topological spaces. \\

Now suppose that $U$ is open in $Y$. We will show that the set theoretic kernel
$\ker(f^{\#}_U - g^{\#}_U)$ is all of $\mathcal{O}_Y(U)$, after which it
follows that the maps agree as maps of rings on all open subsets, and $\iota$
is a monomorphism of schemes. Let $y \in \mathcal{O}_Y(U)$. Then as $Y$
is isomorphic to a subset of $Y$, which in particular contains $\iota(U)$,
it follows that the map $\iota^{\#}_U : \mathcal{O}_Z(\iota(U)) \to \mathcal{O}_Y(U)$
is an isomorphism and we have
\[
	z = \left(\iota^{\#}_U\right)^{-1}(y)  \in \mathcal{O}_Z(\iota(U)).
\]
As $f^{\#} \circ \iota^{\#} = g^{\#} \circ \iota^{\#}$, it follows that
\[
	z \in \ker\left(\left(f^{\#}_U - g^{\#}_U\right) \circ \iota^{\#}_U\right),
\]
and
\[
	y \in \ker\left(f^{\#}_U - g^{\#}_U\right).
\]
\subsection*{Ex 7.2.C}

Let $\mathcal{M}$ be an $\mathcal{O}_X$-module. Then for any $U$ open in $Y$ we
define an $\mathcal{O}_Y(U)$-module structure on $\mathcal{M}(U)$ via the map
$\mathcal{O}_Y(U) \to \pi_{*}\mathcal{O}_X(U)$. As everything everywhere
commutes with restrictions, so does the $\mathcal{O}_Y(U)$-module structures on
the $\mathcal{M}(U)$ for all $U$ open in $Y$. \\

\subsection*{Ex 7.2.E}

Define $\pi_{q} : \mathcal{O}_{Y, q} \to \mathcal{O}_{X, p}$ by
sending
\[
	\pi_q
	:
	\overline{(y, U)}
	\mapsto
	\overline{(\pi_U(y), U)}.
\]
This map is well defined for if $y \in U, y' \in U'$ agree on $U'' \subset U
	\cap U'$, then so does $\pi_U(y), \pi_{U'}(Y)$. Moreover, it's a ring
homomorphism as the $\pi_U$ are.

\subsection*{Ex 7.2.F}

First of all, the morphism $\pi^{\#}_f : B_f \to A_{\pi^{\#}f}$ sending $b/f^{k}
	\mapsto \pi^{\#}(b)/\pi^{\#}(f)^{k}$ is well-defined for if $b/f^{k} =
	b'/f^{k'}$, then $f^{r + k}b' = f^{r + k'}b$ for some $r\in \N$ and the same is
true in the image of $\pi^{\#}$. \\

Moreover, $\pi^{-1}(D(f)) = D(\pi^{\#}(f))$ since $\mathfrak{p} \in \Spec(A)$
doesn't contain $\pi^{\#}(f)$ if and only if $(\pi^{\#})^{-1}(\mathfrak{p}) \in
	\Spec(A)$ doesn't contain $f$. \\

Now suppose that $f, g \in B$ and that $x/f^{r} \in B_{f}, y/g^{s} B_{g}$ are two elements
which agree in $B_{fg}$. Then there is $k \in \N$ such that
\[
	f^{k}g^{k + s}x = f^{k + r}g^{k}y
\]
and the same is true in the image of $\pi^{\#}$. We've verified that the
functions $\pi^{\#}_f$ agree on the intersections.

\subsection*{Ex 7.2.G}

Define $\pi : \Spec(k(x)) \to \Spec(k[y]_{(y)})$ on the topology by setting
$\pi([(0)]) = [(y)]$. The only non-empty open sets of $\Spec(k[y]_{(y)})$ are
$D_y = \{[(0)]\}$ and $D_1 = \{[(0)], [(y)]\}$, and their preimages in
$\Spec(k(x))$ are $\emptyset$ and $\{[(0)]\}$ respectively. Hence it simply
remains to define
\begin{align*}
	\pi^{\#}(D_1) : k[y]_{y} \to k(x) \\
	\pi^{\#}(D_1) : y \mapsto x.
\end{align*}
This is indeed a morphism of ringed spaces as all of the requisite conditions
on $\pi^{\#}$ are vacuously fulfilled due to $\pi^{\#}$ only being non-zero on
a single open set. But this is not the morphism of schemes induced by
$\pi^{\#}$, since under this map the preimage of $[(0)]$ is $[(0)]$ and not
$[(y)]$.

\subsection*{Ex 7.3.A}

Consider the composition of the maps $\mathcal{O}_{Y, q} \to \mathcal{O}_{X, p}
	\to \kappa(p)$ and name it $\phi$. As $\mathfrak{m}_{Y, q}$ is sent to
$\mathfrak{m}_{X, p}$, it follows that $\phi(\mathfrak{m}_{Y, q}) = 0$ and
$\phi$ factors through $\kappa(q)$. Thus we get a map $\kappa(q) \to
	\kappa(p)$. As this is a map of fields, it is injective if it's nonzero, which
it must be since $\kappa(p)$ is nonzero on account of being the residue field
of a local (I.e nonzero) ring, after which the definition of a ring morphism
forces us to send $1 \in \mathcal{O}_{Y, q}$ to $1 \in \kappa(p)$.

\subsection*{Ex 7.3.B}

Morphisms of locally ringed spaces are also morphisms of ringed spaces, which
glue by Exercise 7.2.A. As gluing doesn't affect stalk-local behavior, it's
clear that the result is again a morphism of locally ringed spaces.

\subsection*{Ex 7.3.C}

Let $\mathfrak{p} \in \Spec(A)$ and $\mathfrak{q} =
	(\pi^{\#})^{-1}(\mathfrak{p})$. Then the induced map on the stalks is given by
$B_{\mathfrak{q}} \to A_{\mathfrak{p}}$, and this map sends
\[
	\mathfrak{q} \mapsto \pi^{\#}(\mathfrak{q})
	=
	\pi^{\#}(\pi^{\#})^{-1}(\mathfrak{p})
	\subseteq
	\mathfrak{p}.
\]

\subsection*{Ex 7.3.D}

Let $\phi : \Spec(A) \to \Spec(B)$ denote the induced morphism. We begin by
clarifying how exactly $\phi$ maps sections on an open set $U \subset \Spec(B)$
to sections on $\pi^{-1}(U) \cap \Spec(A) = \phi^{-1}(U)$. \\

First note that we have the map
\[
	\pi^{\#}(U) :
	\mathcal{O}_{Y}(U) = \mathcal{O}_{\Spec(B)}(U)
	\to
	\pi_{*}\mathcal{O}_X(U)
	\cong
	\mathcal{O}_X(\pi^{-1}(U)),
\]
which we can further compose with the restriction map
\[
	\mathcal{O}_X(\pi^{-1}(U))
	\to
	\mathcal{O}_X(\Spec(A) \cap \pi^{-1}(U))
	=
	\mathcal{O}_{\Spec(A)}(\phi^{-1}(U))
\]
to obtain a morphism
\[
	\mathcal{O}_{\Spec(B)}(U)
	\to
	\mathcal{O}_{\Spec(A)}(\phi^{-1}(U))
	=
	\phi_{*}\mathcal{O}_{\Spec(A)}(U),
\]
and this will be our map $\phi^{\#}(U)$. \\

In other words,
\[
	\phi^{\#}
	=
	\iota^{\#} \circ \restr{\pi^{\#}}{\Spec(B)}
\]
where $\iota : \Spec(A) \hookrightarrow X$ is the open immersion. As both of
these maps are maps of locally ringed spaces, so is $\phi^{\#}$. Hence it is a
morphism of affine schemes by Proposition 7.2.3.

\subsection*{Ex 7.3.F}

Let the map be denoted by $\pi$. Then $\pi$ maps closed points $(x_{0} - a_{0},
	\ldots, x_n - a_n)$ with $a_i \not = 0$ according to
\[
	\pi((x_{0} - a_{0}, \ldots, x_n - a_n))
	\mapsto
	\left(x_{0} - \frac{a_{0}}{a_i} x_i, \ldots, x_n - \frac{a_n}{a_i} x_i\right).
\]
Now let $A_i = D_{+}(x_i)$ be the standard affine cover of $\Pn_{k}$, and
let $B_i = \pi^{-1}(A_i) = D(x_i)$ which is then a cover of $\A^{n + 1} - 0$. \\

We figure out what the global sections on $\A^{n + 1} - 0$ is. We take this to
be the open immersion of $\A^{n + 1} - 0 \subset \A^{n + 1}$, hence the global
sections are the rational functions on $\A^{n + 1}$ defined away from the
origin. But no polynomial function on $\A^{n + 1}$ vanishes only at the origin,
hence $\Gamma(\A^{n + 1} - 0, \mathcal{O}_{\A^{n + 1}}) = \K[x_{0}, \ldots,
		x_n]$. \\

It follows that the $B_i$ are affine with $\Gamma(B_i) = \K[x_{0}, \ldots,
		x_n]_{x_i}$. \\

Hence, as a map of schemes, we let
\[
	\pi_i
	:
	\mathcal{O}_{\Pn}(B_i)
	=
	(\K[x_{0}, \ldots, x_n]_{x_i})_0
	\to
	\pi_{*} \mathcal{O}_{\A^{n + 1} - 0}(A_i)
	=
	\K[x_{0}, \ldots, x_n]_{x_i}
\]
be just the normal inclusion. Then for any closed point $(x_{0} - a_0, \ldots,
	x_n - a_n) \in A_i = D(x_i)$, we have $a_i \not = 0$ and
\[
	\frac{x_{0}}{x_i} - \frac{a_{0}}{a_i}
	=
	\frac{1}{x_{i}}(x_{0} - a_{0})
	-
	\frac{a_{0}}{x_i a_i} (x_i - a_i)
	\in
	(x_{0} - a_0, \ldots, x_n - a_n)
\]
whence it follows that
\[
	\pi_i^{-1}(x_{0} - a_0, \ldots, x_n - a_n)
	=
	\left(\frac{x_{0}}{x_{i}} - \frac{a_{0}}{a_i}, \ldots, \frac{x_n}{x_i} - \frac{a_n}{a_i}\right),
\]
which corresponds to the homogeneous ideal
\[
	\left(x_{0} - \frac{a_{0}}{a_i} x_i, \ldots, x_n - \frac{a_n}{a_i}
	x_i\right) \in \text{Proj}(\K[x_{0}, \ldots, x_n])
\]
and our maps $\pi_i$ are indeed consistent with the given map $\pi$ on the points. \\

Finally, it's trivial to verify that the maps $\pi_i$ agree on overlaps, whence
we indeed have a map of schemes.

\subsection*{Ex 7.3.G}

When $X$ is affine, the statement is immediate from Exercise 7.3.E. Now suppose
that $\Spec(B_i)$ is an affine cover of $X$. Then any morphism
\[
	f : A \to \Gamma(X, \mathcal{O}_X)
\]
determines morphisms
\[
	f_i : A \to \Gamma(\Spec(B_i), \mathcal{O}_X).
\]
given by $f_i = \text{res}_{X \to \Spec(B_i)} \circ f$. As
\[
	\text{res}_{\Spec(B_i) \to \Spec(B_i) \cap \Spec(B_j)}
	\circ
	\text{res}_{X \to \Spec(B_i)}
	=
	\text{res}_{\Spec(B_j) \to \Spec(B_i) \cap \Spec(B_j)}
	\circ
	\text{res}_{X \to \Spec(B_j)},
\]
it follows that the $f_i$ induce morphisms of affine schemes which agree on the
overlaps $\Spec(B_i) \cap \Spec(B_j)$, hence glue to a morphism of schemes $X
	\to \Spec(A)$ which is $f$ on the global sections. \\

The other direction of the bijection is immediate, a proof of naturality is
omitted.

\subsection*{Ex 7.3.H}

Let $S_{\bullet}$ be a finitely $A$-algebra (with $S_0 = A$). Then $S_+$ is
finitely generated as an ideal over $A$ by say $f_{1}, \ldots, f_n$, and
$\Proj\ S_{\bullet}$ is covered by open affine schemes $D_{+}(f_i)$ with rings
of sections $((S_{\bullet})_{f_i})_0$. As $S_{0}$ injects into each
$((S_{\bullet})_{f_i})_0$ in a manner which clearly respects restrictions,
these injections glue together and we get a natural map of schemes $\Proj\
	S_{\bullet} \to \Spec(S_{0})$.

\subsection*{Ex 7.3.I}

Let $\pi : X \to \Spec(A)$ be an $A$-scheme. It's immediate from the following
commutative diagram that all of the rings of sections of an $A$-scheme are
$A$-algebras and that their restriction maps are maps of $A$-algebras
\[
	\begin{tikzcd}
		A
		=
		\Gamma(X, \pi_{*}\osp{A})
		\ar[r, "\text{res}_{X \to U}"]
		& \Gamma(U, \pi_{*}\osp{A})
		\ar[r, "\pi^{\#}"]
		\ar[d, "\text{res}_{U \to V}"]
		& \Gamma(U, \mathcal{O}_X)
		\ar[d, "\text{res}_{U \to V}"] \\
		& \Gamma(V, \pi_{*}\osp{A})
		\ar[r, "\pi^{\#}"]
		& \Gamma(V \mathcal{O}_X)
	\end{tikzcd}
\]

For the other direction, suppose $X$ is a scheme such that all rings of
sections are $A$-algebras. Then $A \to \Gamma(X, \mathcal{O}_X)$ induces a map
of schemes $X \to \Spec(A)$ by Exercise 7.3.G, and $X$ is an $A$-scheme. \\

\subsection*{Ex 7.3.J}

$\Z$ is the initial object in the category of commutative rings: Every ring $A$
has exactly one map to it from $\Z$, that which sends $1 \mapsto 1$. Then $\Z$
is the final object in the opposite category of rings, the limit of the empty
diagram. Exercise 7.3.G shows that $\Spec$ is a right adjoint functor from the
opposite category rings to the category of schemes. Hence it preserves limits,
and $\Spec(\Z)$ is the final object in the category of schemes. \\

Similarly, $A, \id_A$ is the initial object in the category of $A$-algebras:
Every $A$ algebra $\phi : A \to S$ comes with a map $\phi : A \to S$, and for
any commutative diagram
\[
	\begin{tikzcd}
		& A
		\ar[dl, "\id_A"]
		\ar[dr, "\phi"] \\
		A
		\ar[rr, "\psi"]
		&& S
	\end{tikzcd}
\]
we have $\psi = \phi$.

\subsection*{Ex 7.3.K}

We first solve the exercise for affine schemes As $\Spec$ is a contravariant
equivalence from the category of commutative rings to the category of affine
schemes, it follows that the coproduct of $\Spec(A)$ and $\Spec(B)$ is given by
$\Spec$ of the product of $A$ and $B$. The product of $A, B$ in $\CRing$ is $A
	\times B$, and by Exercise 3.6.A
\[
	\Spec(A \times B) = \Spec(A) \coprod \Spec(B).
\]

Now let $X, Y$ be arbitrary schemes and
\[
	\begin{tikzcd}
		& X
		\ar[r, "\iota_X"]
		& Z
		& Y
		\ar[l, "\iota_Y"]
	\end{tikzcd}
\]
be their coproduct. Then suppose $\Spec(A_i), \Spec(B_j)$ be affine covers of
$X, Y$ respectively. For each $i, j$, the maps
\[
	\restr{\iota_X}{\Spec(A_i)},
	\restr{\iota_Y}{\Spec(B_j)},
\]
then factor uniquely through $\Spec(A_i) \coprod \Spec(B_j)$ by the universal
property of the coproduct of $\Spec(A_i), \Spec(B_j)$. These maps glue to maps
factoring $\iota_X, \iota_Y$ as in the following diagram (we omit all the
necessary verification...)
\[
	\begin{tikzcd}
		& X
		\ar[dr, "\iota_X'"]
		\ar[drr, bend left=45, "\iota_X"]
		\\
		&
		& X \coprod Y
		\ar[r]
		& Z \\
		& Y
		\ar[ur, "\iota_Y'"]
		\ar[urr, bend right=45, "\iota_X"]
		\\
	\end{tikzcd}
\]
By the universality of the coproduct, it follows that $X \coprod Y$ is a
coproduct of $X, Y$.

\subsection*{Ex 7.3.L}
\subsubsection*{(a)}

For an affine scheme $\Spec(A)$, we have the localization map $A \to
	A_{\mathfrak{p}}$ which induces a map of schemes $\Spec(A_{\mathfrak{p}}) \to
	\Spec(A)$. \\

For an arbitrary scheme $X$ and an affine open set $\Spec(A)$ containing $p$,
we have the open immersion $\Spec(A) \hookrightarrow X$ which we can precompose
with the map $\Spec(A_p) = \mathcal{O}_{X, p} \to \Spec(A)$ from above. We just need to
show that this map is independent of our choice of affine open set $\Spec(A)$. \\

Suppose that $\Spec(B)$ is another affine open neighborhood of $p$. As it
doesn't matter if we restrict to a neighborhood of $p$ before taking the stalk
at $p$, we get a commutative diagram
\[
	\begin{tikzcd}
		& \Gamma(X, \mathcal{O}_X)
		\ar[r]
		\ar[d]
		& \Gamma(\Spec(A), \mathcal{O}_X) = A
		\ar[d] \\
		& \Gamma(\Spec(B), \mathcal{O}_X) = B
		\ar[r]
		& \mathcal{O}_{X, p}.
	\end{tikzcd}
\]
Restriction maps correspond to open immersions under the $\Spec$ functor, hence we get a commutative diagram
\[
	\begin{tikzcd}
		& \Spec(\mathcal{O}_{X, p})
		\ar[r]
		\ar[d]
		& \Spec(A)
		\ar[d] \\
		& \Spec(B)
		\ar[r]
		&
		X
	\end{tikzcd}
\]
and we've shown to our prescribed map does not depend on choice of affine open
neighborhood. \\

We conclude by computing what the morphism actually is. \\

The points of $\Spec\ \mathcal{O}_{X, p}$ are simply the subset of points of $q
	\in X$ such that $p \in \overline{q}$: Let $\Spec(A)$ be an affine open
neighborhood containing $p$. Then $X - \Spec(A)$ does not contain $p$, and as
$X - \Spec(A)$ is closed, it contains all the closures of all of its points. It
follows that if $p \in \overline{q}$ that $q \not \in X - \Spec(A)$ and $q \in
	\Spec(A)$. In this affine situation, $q, p$ correspond to prime ideals of $A$
such that $p$ contains $q$ whence $q$ is a prime ideal of $A_{p} \cong
	\mathcal{O}_{X, p}$. \\

Given an open neighborhood $U$ of $p$ in $X$, just like before $U$ contains all
$q \in X$ such that $p \in \overline{q}$, hence all of $\Spec(\mathcal{O}_{X,
		p})$. It follows that $\Gamma(U, \pi_{*}\Spec(\mathcal{O}_{X, p}) =
	\mathcal{O}_{X, p}$ and the map $\Gamma(U, \mathcal{O}_X) \to \mathcal{O}_{X,
		p}$ is then just given by the normal map taking stalks at $p$. If $U$ is an
open set of $X$ not containing $p$ then $\Gamma(U, \pi_{*}\Spec(\mathcal{O}_{X,
		p}) = 0$. \\


\subsubsection*{(b)}

There is a canonical quotient map $\mathcal{O}_{X, p} \to \kappa(p)$ which
induces a map of affine schemes in the other direction which in turn can be composed
with the map from (a).

\subsection*{Ex 7.3.M}

Let $U$ be an open neighborhood of $p$ in $X$. Let $V = X - U$. Then
$\pi^{-1}(V)$ is a closed set of $\Spec(A)$ not containing $\pi^{-1}(p) =
	\mathfrak{m}$. Every ideal $I$ of $A$ is contained in $\mathfrak{m}$, so every
nonempty closed subset $V(I)$ of $\Spec(A)$ contains $\mathfrak{m}$ whence
$\pi^{-1}(V) = \emptyset$ and the image of $\pi$ lies in $U$. \\

It follows that for every open neighborhood $U$ of $p$ in $X$,
we get a map
\[
	\restr{\pi^{\#}}{U}
	:
	\mathcal{O}_X(U)
	\to
	\Gamma(\pi^{-1}(U), \osp{A})
	=
	\Gamma(\Spec(A), \osp{A})
	=
	A
\]
As $\mathcal{O}_{X, p}$ is the direct limit over all such $\mathcal{O}_X(U)$,
we get an induced morphism $\mathcal{O}_{X, p} \to A$. Moreover, over any
affine $U = \Spec(A)$ we have that the prime ideal corresponding to $p$ is the
preimage of $\mathfrak{m}$, hence the same is true in $\mathcal{O}_{X, p}$ and
the induced map is a local homomorphism. \\

Given a morphism of local rings $\mathcal{O}_{X,p} \to A$, we get a morphism of
affine schemes $\Spec(A) \to \Spec(\mathcal{O}_{X, p})$ which composes with the
morphism from Exercise 7.3.L.(a) to a morphism of schemes $\Spec(A) \to X$. \\

\subsection*{Ex 7.3.N}

\subsubsection*{(a)}

Postcomposition

\subsubsection*{(b)}

A map $\Kx \to \Kx$ is not determined by it's value after being postcomposed
with the quotient by $(x_{1}, \ldots, x_n)$. For example, the identity on $\Kx$
coincides with the map $x_i \mapsto x_i^{2}$ after taking the quotient by
$(x_{1}, \ldots, x_n)$. After applying the $\Spec$ functor, we obtain two
different maps $\An \to \An$ which induce the same map of points $\An(k) \to
	\An(k)$. \\

Now suppose that we have two maps of schemes $\pi, \tau : X \to Y$ which
induce the same maps of points $X(Z) \to X(Y)$ for all $Z$. Then pick $Z$
to be $X$, which gives us the diagram
\[
	\begin{tikzcd}
		& \Mor(X, X)
		\ar[r, bend left=30, "\pi_{*}"]
		\ar[r, bend right=30, "\tau_{*}"]
		& \Mor(X, Y)
	\end{tikzcd}
\]
hence $\pi \circ \id_X = \tau \circ \id_X$ and $\pi = \tau$.

\subsection*{Ex 7.3.O}

\subsubsection*{(a)}

We first define what the notation $[f_{0}, \ldots, f_n]$ means in this setting.
\begin{definition}
	Let $X$ be a $B$-scheme, $f_{0}, \ldots, f_n \in \Gamma(X, \mathcal{O}_X)$
	be global sections that never simultaneously vanish. Then we define a map
	of schemes
	\[
		[f_{0}, \ldots, f_n] : X \to \Pn_{B}
	\]
	as follows:
	\begin{itemize}
		\item First we define a ring map from the affine patches $U_i$ of $\Pn_{B}$
		      to the patches $D(f_i)$ of $X$
		      \[
			      \restr{[f_{0}, \ldots, f_n]^{\#}}{U_i}
			      :
			      (B[x_{0}, \ldots, x_n]_{x_i})_0
			      \to
			      \mathcal{O}_X(D(f_i))
		      \]
		      according to
		      \[
			      \restr{[f_{0}, \ldots, f_n]^{\#}}{U_i}
			      :
			      x_j/x_i
			      \mapsto
			      f_j/f_i.
		      \]
		      (Note here that $D(f_i)$ need not be affine open, the non-vanishing
		      locus of a global section on a scheme is open, and this coincides
		      exactly with the locus where this section is invertible). By
		      Exercise 7.3.G, this defines a morphism of sheaves
		      \[
			      \restr{[f_{0}, \ldots, f_n]}{U_i}
			      :
			      \mathcal{O}_{X \vert D(f_i)}
			      \to
			      \mathcal{O}_{\Pn_{B} \vert U_i}
		      \]
		\item Now we check that these morphisms glue. We do this by checking
		      that the ring maps coincide on the overlaps $U_i \cap U_j$, after
		      which it follows that the scheme maps coincide, since morphisms to
		      affine schemes are determined by their ring maps. The ring of
		      sections $\mathcal{O}_{\Pn_{B}}(U_i \cap U_j) = (B[x_{0}, \ldots,
					      x_n]_{x_ix_j})_0$ is generated by $x_k/x_i, x_k/x_j, k \in [0..n]$
		      as a $B$-algebra. We have
		      \begin{align*}
			      \restr{\restr{[f_{0}, \ldots, f_n]^{\#}}{U_j}}{U_i}(x_k/x_i)
			       & =
			      \frac{
				      \restr{[f_{0}, \ldots, f_n]^{\#}}{U_j}(x_k)
			      }{
				      \restr{[f_{0}, \ldots, f_n]^{\#}}{U_j}(x_i)
			      }       \\
			       & =
			      f_k/f_i \\
			       & =
			      \restr{\restr{[f_{0}, \ldots, f_n]^{\#}}{U_i}}{U_j}(x_k/x_i),
		      \end{align*}
		      and the same is true of the other generator. Thus the maps glue and
		      we have a map of schemes as desired.
	\end{itemize}
\end{definition}

We conclude with a sanity check and compute where our map sends points. Let $p
	\in X$ and suppose that $p \in D(f_{0})$. Then as a morphism of schemes is a
morphism of locally ringed spaces, sections $g(x_{1}/x_{0}, \ldots, x_n/x_{0})
	\in \mathcal{O}_{\Pn_{B}}(U_0) = (B[x_{0}, \ldots, x_n]_{x_0})_0$ vanish on
$\pi(p)$ if and only if $g(f_{1}/f_{0}, \ldots, f_n/f_{0})$ vanishes on $p$. It
follows that $\pi(p)$ is the preimage of the prime ideal $\mathfrak{p}$ of all
functions of $\mathcal{O}_X(D(f_i))$ which vanish at $p$. Indeed $\mathfrak{p}$
is prime as the sections on $D(f_0)$ take values in the residue field
$\kappa(p)$ (which in particular is a domain) when evaluated at $p$. Hence a
product of two functions vanishes at $p$ if and only if one of the factors
vanish there.

\subsubsection*{(b)}

This is immediate from our definitions (and the fact that $g$ is invertible
everywhere), as the ring maps on affine patches of $\Pn_{B}$ now become
\[
	x_j/x_i
	\mapsto
	gf_j/gf_i
	=
	f_j/f_i.
\]

\subsection*{Ex 7.4.A}

For any homogeneous $f \in S_{\bullet}$ of positive degree, we have that $\phi$
defines a ring map on the affine patch $D_{+}(f)$
\[
	\phi_f^{\#}
	:
	((S_{\bullet})_f)_0
	\to
	((R_{\bullet})_{\phi(f)})_0
\]
according to
\[
	\phi_f^{\#}
	:
	s/f
	\mapsto
	\phi(s)/\phi(f)
\]
since $\phi$ respects the grading. It follows that we get maps of affine schemes
\[
	\phi_f
	:
	\mathcal{O}_{\Proj\ R_{\bullet} \vert D_{+}(\phi(f))}
	\to
	\mathcal{O}_{\Proj\ S_{\bullet} \vert D_{+}(f)}.
\]

These maps glue, as if $f, g \in S_{\bullet}$ are homogeneous elements and
\[
	h/(fg)^{k}
	\in
	\mathcal{O}_{\Proj\ S_{\bullet}}(D_{+}(f) \cap D_{+}(g))
	=
	((S_{\bullet})_{fg})_{0}
\]
then
\begin{align*}
	\restr{(\phi^{\#}_f)}{D_{+}(g)}(h/fg)
	 & =
	\frac{
		\phi^{\#}_f(h/f)
	}{
		\phi^{\#}_f(g)
	}                        \\
	 & =
	\frac{\phi(h)}{\phi(fg)} \\
	 & =
	\restr{(\phi^{\#}_g)}{D_{+}(f)}(h/fg),
\end{align*}
hence they glue to a map of schemes (as they agree as maps of rings to a cover
by affine patches). The problem is that the $D_{+}(\phi(f))$ need not cover
$\Proj\ R_{\bullet}$. However, if $\mathfrak{p}$ is a homogeneous prime ideal
of $R_{\bullet}$ not in $V(\phi(S_{+}))$, then there is some element $\phi(f)
	\in \phi(S_{+})$ such that $\phi(f) \not \in \mathfrak{p}$ and $\mathfrak{p}
	\in D_{+}(\phi(f))$. Hence we do get a map of schemes
\[
	\phi : \Proj\ R_{\bullet} \setminus V(\phi(S_{+})) \to \Proj\ S_{\bullet}.
\]

\subsection*{Ex 7.4.B}

Immediate from Exercise 4.5.L and 7.4.0.1.

\subsection*{Ex 7.4.C}

Any homogeneous prime ideal of $R_{\bullet}$ must contain $z$ as $z^{2} = 0$ is
nilpotent. Then homogeneous primes of $R_{\bullet}$ correspond to homogeneous
primes of $R_{\bullet}/(z) \cong \K[x, y]$ and it follows that $\Proj\
	R_{\bullet} = \P^{1}_{n}$. The exact same thing happens for $S_{\bullet}$. \\

These maps give the same map of schemes as they agree when followed by taking
the quotient by $z$. \\

\subsection*{Ex 7.4.D}

Suppose that $\mathfrak{p} \not \subset \mathfrak{q}$ are two different
homogeneous prime ideals of $S_{\bullet}$ not containing $S_{+}$. Then let $f$
be an element in $\mathfrak{p}$ but not in $\mathfrak{q}$. Then $f^{n}$ is
contained in the preimage of $\mathfrak{p}$ in $S_{n \bullet}$ but not in the
preimage of $\mathfrak{q}$. Hence the induced map on the topologies $\Proj\
	S_{\bullet} \to \Proj\ S_{n \bullet}$ is injective. Moreover, $S_{\bullet}$ is
finite over $S_{n \bullet}$, for if $f \in S_{\bullet}$ then $f^{n} \in S_{n
			\bullet}$. Thus it follows from the Lying-Over Theorem that the map of
topologies $\Proj\ S_{\bullet} \to \Proj\ S_{n \bullet}$ is surjective as well.
\\

It's clear that for homogeneous $f \in S_{\bullet}$, open subsets $D_{+}(f)
	\subset \Proj\ S_{\bullet}$ correspond to open subsets $D_{+}(f^{n}) \subset
	\Proj\ S_{n \bullet}$. Moreover, if $f$ already has degree divisible by $n$, then
$D_{+}(f^{n}) = D_{+}(f) \subset \Proj\ S_{n \bullet}$. \\

Now suppose that $f_{1}, \ldots, f_m$ generate $S_{+}$. Then $f_{1}^{n},
	\ldots, f_m^{n}$ generate an ideal whose radical is $S_{+}$, hence the
$D_{+}(f_i^{n})$ cover $\Proj\ S_{\bullet}$ and $\Proj\ S_{n \bullet}$. We
investigate the injection on these affine patches. Let $f = f_i^{n}$ for some
$i$. If $s/f^{k} \in ((S_{\bullet})_f)_0$, then $\deg(s) = nk$ and $s/f^{k} \in
	((S_{n \bullet})_f)_0$, whence the inclusion is an isomorphism here, and the
map of schemes is an isomorphism.

\subsection*{Ex 7.4.E}

If $S_{\bullet}$ is generated in degree $1$, then any homogeneous element $f
	\in S_{dn}$ may be written as a homogeneous polynomial of degree $dn$ in the
elements of $S_{1}$. Any monomial of degree $dn$ in elements of $S_{1}$ may be
written as monomial of degree $d$ in elements of $S_{n}$ by just aggregating
products of $n$ elements. It follows that $f$ may then be written as a
homogeneous polynomial of degree $d$ in elements of $S_n$ and we see that $S_n$
generates $S_{n \bullet}$ as an $S_{0}$ algebra.

\subsection*{Ex 7.4.F}

Suppose that there is a map of graded rings $\phi : S_{\bullet} \to
	R_{\bullet}$ which induces isomorphisms of groups $\phi_i : S_i \cong R_i$ for
all but finitely many degrees. Then there exist $n \in \N$ such that $\phi_i :
	S_i \cong R_i$ for all $i \geq n$, and it follows that $\phi$ induces an
isomorphism of rings $\psi : S_{n \bullet} \cong R_{n \bullet}$. The remaining
steps follow from Exercise 7.4.D.

\subsection*{Ex 7.4.G}

TODO todo ToDo

\subsection*{Ex 7.5.A}

Let $X$ be a $\K$-scheme and suppose that $\overline{(\phi, U)} : X \to
	\A_{k}^{1}$ is a rational morphism (that is, $U \subset X$ is dense open and
$\phi$ is a morphism from $U$ to $\A_{k}^{1}$). Then we have $\K$-algebra map
$\phi^{\#} : \K[x] \to \mathcal{O}_X(U)$ which is the same thing as picking an
element $\phi^{\#}(x) \in \mathcal{O}_X(U)$. \\

Let $f \in K(X)$ be a rational function on $X$, that is $f \in \Gamma(U,
	\mathcal{O}_X)$ for some open dense subset $U \subset X$. This is clearly the
same data as above modulo the same equivalence relation.

\subsection*{Ex 7.5.B}

We review some things that I have forgotten.
\begin{definition}
	Let $X$ be a topological space. A point $\eta \in X$ is said to
	be generic if $\overline{\eta} = X$.
\end{definition}

\begin{lemma}
	Let $X$ be a topological space and $\eta \in X$. Then $\eta$ is generic if
	and only if every nonempty open set of $X$ contains $\eta$.
\end{lemma}
\begin{proof}
	Suppose first that $\eta$ is generic and that $U$ is an open set not containing $\eta$. It
	follows that $X \setminus U$ is a closed set containing $\eta$, hence is all of $X$ and
	$U = \emptyset$. \\

	Now suppose that $\eta$ isn't generic. Then $X \setminus \overline{\eta}$
	is a nonempty open set not containing $\eta$.
\end{proof}
\begin{lemma}
	Let $X$ be an affine scheme and $\eta, \xi \in X$ be two generic points.
	Then $\eta = \xi$.
\end{lemma}
\begin{proof}
	Any affine open set $\Spec(A) \subset X$ contains both $\eta$ and $\xi$,
	and here the points correspond to prime ideals of $A$ which are contained
	in every other prime ideal of $A$. In particular the two corresponding
	prime ideals contain each other and must therefore be equal. It follows
	that $\eta = \xi$.
\end{proof}

\begin{lemma}
	Let $\Spec(A)$ be an affine scheme. Then $\Spec(A)$ is irreducible if and
	only if $A$ is an integral domain if and only if the nilradical
	$\sqrt{(0)}$ is a prime ideal of $A$ if and only if $[\sqrt{(0)}] \in
		\Spec(A)$ is a generic point.
\end{lemma}
\begin{proof}
	The only non-trivial statement is that $\Spec(A)$ is irreducible if and
	only if $A$ is an integral domain. Suppose that $\Spec(A)$ is irreducible
	and let $f, g \in A$ be such that $(fg)^{k} = 0$. Then
	\[
		V(f) \cup V(g)
		=
		V(fg)
		=
		V((fg)^{k})
		=
		\Spec(A)
	\]
	Hence either $V(f)$ or $V(g)$ is all of $\Spec(A)$ which means that either
	$f$ or $g$ lies in the nilradical. \\

	For the other direction, every prime ideal of $A$ contains the nilradical.
	Hence if it is prime, $V(\sqrt{(0)}) = \Spec(A)$ and $[\sqrt{(0)}]$ is a
	generic point of $\Spec(A)$ whence the scheme is irreducible.
\end{proof}

\begin{lemma}
	Let $X$ be an irreducible scheme. Then there exist a generic point $\eta
		\in X$.
\end{lemma}
\begin{proof}
	Any affine open set $\Spec(A) \subset X$ is irreducible as well, hence
	contains a generic point $p = [(0)]$. Moreover, every distinguished open
	set $D(f) \subset \Spec(A)$ contains $[(0)]$ as $f \not \in (0)$. Hence if
	$\Spec(B) \subset X$ is another affine open set, $\Spec(B) \cap \Spec(A)
		\not = \emptyset$ by irreducibility of $X$, and there is some open set
	$D(f) \subset \Spec(B) \cap \Spec(A)$ which is distinguished in both affine
	subschemes, hence contains the generic points of both affine subschemes. As
	there can only be one generic point, these coincide and $p \in \Spec(B)$.
	Hence we have a point $p$ which lies in every affine open set of $X$ and is
	therefore generic.
\end{proof}

Suppose that $X, Y$ are irreducible schemes with generic points $\eta, \xi$ and
that $f : X \dashedrightarrow Y$ is a dominant morphism. Then $f$ is defined on
some dense open subset $U \subset X$ which necessarily contains the generic
point $\eta$. Then $\overline{f(\eta)}$ pulls back to a closed set of $X$
containing $\eta$, I.e $f^{-1}(\overline{f(\eta)}) = X$ is all of $X$ and it
follows that $f(X) \subset \overline{f(\eta)}$. But then $Y = \overline{f(X)} =
	\overline{f(\eta)}$, and by uniqueness of the generic point, $f(\eta) = \xi$. \\

For the other direction, if $f : X \dashedrightarrow Y$ is a rational map
mapping $f(\eta) \to \xi$, then $\xi \in f(X)$ hence $Y = \overline{\xi} =
	\overline{f(X)}$ and $f$ is dominant.

\subsection*{Ex 7.5.C}

Let $f : X \dashedrightarrow Y$ be a dominant morphism of integral schemes
with generic points $\eta \in X, \xi \in Y$. Then every representative of $f$
maps the stalk at $\xi$ to the stalk at $\eta$, I.e is a map $K(Y) =
	\mathcal{O}_{Y, \xi} \to \mathcal{O}_{X, \eta} = K(X)$.

\subsection*{Ex 7.5.D}

Suppose that $K$ is generated by $x_{1}, \ldots, x_n$. Then there is a
$k$-algebra morphism $\phi : k[t_{1}, \ldots, t_n] \to K$ mapping $\phi : t_{i}
	\mapsto x_{i}$. Let $A = k[t_1, \ldots, t_n]/\ker(\phi)$. Then $A$ injects into
$K$, and has function field $K$.

\subsection*{Ex 7.5.E}

Let $\catname{A}$ be the category of "irreducible affine $k$-varieties" with
dominant rational maps defined over $k$, and $\catname{B}$ be the category of
finitely generated field extensions of $k$. \\

By Exercise 7.5.C, a dominant rational map of of integral schemes induces a
morphism of function fields in the other direction. This is clearly a
functorial construction and we have a functor $F : \catname{A} \to
	\catname{B}^{\op}$. \\

Exercise 7.5.D tells us how to construct an irreducible affine $k$-variety from
a filed extension $k \hookrightarrow K$, but in this construction we had to
pick a generating set for $K/k$. So suppose that $A, B$ are two different
finitely generated irreducible $k$-algebras with function fields isomorphic to
$K$. Then the function fields of $A$ and $B$ are isomorphic, and Proposition
7.5.7 tells us that there are dominant rational maps $A \dashedrightarrow B$,
$B \dashedrightarrow A$ inducing these isomorphisms. It follows that the
composition $A \dashedrightarrow B \dashedrightarrow A$ induces the identity on
the function field of $A$, and as $A$ is integral, it follows that $A
	\dashedrightarrow B \dashedrightarrow A$ is the identity and $A, B$ are
birational (after following identical arguments for $B$ as well). \\

Hence we define a functor $G : \catname{B} \to \catname{A}$ on the objects of
$\catname{B}$ by for each object, making some choice of generating set and
assigning to it the scheme yielded by following Exercise 7.5.D. To assign
morphisms we use those obtained from Proposition 7.5.D. \\

We don't worry about showing functoriality or that there are natural
equivalences with the identity functors. \\


\subsection*{Ex 7.5.G}

Let $C = \Spec\ \frac{k[x, y]}{(x^{2} + y^{2} - 1)}$. In the paragraph preceding the
exercise, we are given a birational morphism $f : C \to \P_{k}^{1}$ given by
\[
	f : (x, y) \mapsto [x + 1, -y]
\]
when $(x, y) \not = (-1, 0)$ and
\[
	f : (x, y) \mapsto [y, x - 1]
\]
when $(x, y) \not = (1, 0)$. As $C$ is dense in $X = \Proj\ \frac{k[x, y,
				z]}{(x^{2} + y^{2} - z_{2})}$ (indeed it's the open affine patch $D_{+}(z)$),
it follows that $f$ is a birational map $f : X \dashedrightarrow \P_{k}^{1}$. \\

To recap, we have a birational map $f : X \dashedrightarrow \P_{k}^{1}$
which is defined on $D_{+}(z)$ according to
\[
	f : [x, y, 1] \mapsto [x + 1, - y]
\]
or
\[
	f : [x, y, 1] \mapsto [y, x - 1]
\]
with inverse $g : \P_{k}^{1} \dashedrightarrow X$ defined on $D_{+}(t(s^{2} + 1))$ according to
\[
	g : [s, 1]
	\mapsto
	\left[
		\frac{s^{2} - 1}{s^{2} + 1},
		\frac{-2s}{s^{2} + 1},
		1
		\right]
\]
The map $f$ may just as well be written
\[
	f : [x, y, z] \mapsto [x/z + 1, - y/z],\,
	f : [x, y, z] \mapsto [y/z, x/z - 1]
\]
and after multiplying by $z$ in the image we extend the definition of $f$ to all of $X$ as
\[
	f : [x, y, z] \mapsto [x + z, - y],\,
	f : [x, y, z] \mapsto [y, x - z],
\]
Similarly, we extend the inverse $g$ to all of $D_{+}(t)$ according to
\[
	g : [s, 1]
	\mapsto
	\left[
		s^{2} - 1,
		-2s,
		s^{2} + 1
		\right],
\]
and then to all of $\P_{k}^{1}$ by multiplying with $t^{2}$ according to
\[
	g : [s, t]
	\mapsto
	\left[
		s^{2} - t^{2},
		-2st,
		s^{2} + t^{2}
		\right].
\]
$f$ and $g$ are indeed morphisms of projective spaces as the component
functions are homogeneous polynomials of the same degree. Moreover, it's easy
to check that $g$ lands in $X$ and we omit this. It remains to check that they
are inverse each other. We have
\begin{align*}
	f \circ g ([s, t])
	 & =
	f \left(\left[
		s^{2} - t^{2},
		-2st,
		s^{2} + t^{2}
	\right]\right) \\
	 & =
	\left[
		-2st,
		s^{2} - t^{2} -
		(s^{2} + t^{2})
	\right]        \\
	 & =
	\left[
		s,
		t
		\right],
\end{align*}
and the other calculation is omitted.


\subsection*{Ex 7.5.H}

After drawing the graph of $y^{2} = x^{3} + x^{2}$, we see that every line
through the origin meet the curve in exactly one other point except for the
lines with slope $1, -1$, which are tangent to the curve here. As before, lines
with rational slope will meet the curve in rational points, and rational points
on the curve will induce lines through the origin with rational slopes. \\

So, we let $y = mx$ with $m \in \Q$ and solve for $y, x$. We get the cubic equation
\[
	x^{2}(1 - m^{2} + x) = 0
\]
and $x = m^{2} - 1, y = m^{3} - m$. \\

For the other direction, suppose that $(x, y) \in \Q^{2}$ lies on the curve.
The map in the other direction is simply $m = y/x$ as our desired line passes
through the origin. \\

To check that we've found all points, it suffices to show that the map from the
curve to $\A^{1}_{Q}$ and back again is the identity. Indeed, this implies that
the map from the line to our curve is surjective. We have
\begin{align*}
	(x, y)
	 & \mapsto
	y/x                                                                         \\
	 & \mapsto
	\left((y/x)^{2} - 1, (y/x)^{3} - (y/x)\right)                               \\
	 & =
	\left(\frac{x^{3} + x^{2}}{x^{2}} - 1, \frac{y^{3} - yx^{2}}{x^{3}} \right) \\
	 & =
	\left(x, y\frac{y^{2} - x^{2}}{x^{3}} \right)                               \\
	 & =
	\left(x, y\frac{x^{2} + x^{3} - x^{2}}{x^{3}} \right)                       \\
	 & =
	\left(x, y\right)                                                           \\
\end{align*}

\subsection*{Ex 7.5.I}

Consider the subset $D_{+}(w)$ of $Q$. Here our quadric surface becomes the
surface obtained from rotating $z^{2} = r^{2} - 1$ about the $z$-axis, and it's
clear that any line through the origin which isn't the $z$-axis will meet the
surface in exactly two points. We don't continue.

\subsection*{Ex 7.5.J}

The map agrees with the map $[x, y, z] \mapsto [yz, xz, xy]$ on $D_{+}(xyz)$
and can thus be extend to $D_{+}(xy) \cup D_{+}(xz) \cup D_{+}(yz)$

\subsection*{Ex 7.6.A}

By Exercise $7.3.G$, there is a natural bijection between maps of $A$-schemes
to affine $A$-schemes and maps of $A$-algebras via taking global sections.
Hence we need only to show that there is a natural bijection between maps $A[t]
	\to \Gamma(X, \mathcal{O}_X)$ and elements of $\Gamma(X, \mathcal{O}_X)$. But
this is clearly the case, as any such morphism corresponds to picking an
element of $\Gamma(X, \mathcal{O}_X)$, and this is functorial in $X$.

\subsection*{Ex 7.6.C}

Let $F$ be a functor represented by $Y$ and $Z$. As natural isomorphisms
compose, it follows that we have a natural isomorphism $\phi : h_Y \Rightarrow
	h_Z$ with inverse $\psi : h_Z \to h_Y$. In particular, we have the isomorphism
\[
	\phi_Y : \Mor(Y, Y) \to \Mor(Y, Z), \,
	\psi_Z : \Mor(Z, Z) \to \Mor(Z, Y)
\]
and we let
\[
	f = \phi_Y \id_Y : Y \to Z,\,
	g = \psi_Z \id_Z : Z \to Y.
\]
The morphism $f : Y \to Z$ induces the following diagram of natural isomorphisms
\[
	\begin{tikzcd}
		& h_Z(Z) = \Mor(Z, Z)
		\ar[r, "h_Z f = f^{*}"]
		\ar[d, "\psi_Z"]
		& h_Z(Y) = \Mor(Y, Z)
		\ar[d, "\psi_Y"] \\
		& h_Y(Z) = \Mor(Z, Y)
		\ar[r, "h_Y f = f^{*}"]
		& h_Y(Y) = \Mor(Y, Y)
	\end{tikzcd}
\]
If send $\id_Y \in \Mor(Z, Z)$ along the upper path in the square we get
\begin{align*}
	\psi_Y(f^{*}(\id_Z))
	 & =
	\psi_Y(f)             \\
	 & =
	\psi_Y(\phi_Y(\id_Y)) \\
	 & =
	\id_Y,
\end{align*}
whilst along the bottom path we get
\begin{align*}
	f^{*}(\psi_Z(\id_Z))
	 & =
	f^{*}(g) \\
	 & =
	g \circ f.
\end{align*}
We've verified that $\id_Y = g \circ f$ and it follows in an identical manner
that $\id_Z = f \circ g$. The morphisms $f, g$ are canonical, and we've
verified that representing objects are unique up to canonical isomorphism.

\subsection*{Ex 7.6.D}

We are looking for a scheme $T$ such that every scheme $X$ has exactly one
morphism to $T$. I.e a terminal object in the category of schemes, which is
given by $T = \Spec(Z)$ (maps to affine schemes are equivalent to maps of
global sections and there is exactly one map from $Z$ to any ring determined by
$1 \mapsto 1$).

\subsection*{Ex 7.6.E}

\subsubsection*{(a)}

By Exercise 7.3.G, maps from $B$-schemes to affine $B$-schemes are in natural
bijection with maps of global sections in the other direction. Specifying the
target scheme to $\A^{n}_{B}$ gives a natural isomorphism between the two
functors $\Sch \to \Set$ given by $X \to \Mor(X \to \An_{B})$ and $X \to
	\Hom_{B-\Alg}(B[t_{1}, \ldots, t_n], \Gamma(X, \mathcal{O}_X))$. The statement
now follows from the fact that $B[t_{1}, \ldots, t_n]$ is a free $B$-algebra on
the set $t_{1}, \ldots, t_n$: Morphisms from $B[t_{1}, \ldots, t_n]$ are
equivalent to picking $n$ elements from the target algebra.

\subsubsection*{(b)}

Using the same arguments as above, this boils down to showing that picking a
morphism from $B[t, t^{-1}]$ to any other $B$-algebra $a$ is equivalent to
picking an invertible element of $A$. Indeed this is the case, as we're picking
an invertible element for the image of $t$, and any such invertible element
determines a morphism this way.

\subsection*{Ex 7.6.F}

Immediately implied from Exercise 7.3.G.

\subsection*{Ex 8.1.A}

We begin with some lemmas about fibered products.

\begin{lemma}
	Let $f : X \to Y$ be a morphism in a category. Then
	\[
		\begin{tikzcd}
			& X
			\ar[r, "f"]
			\ar[d, "\id_X"]
			& Y
			\ar[d, "\id_Y"] \\
			& X
			\ar[r, "f"]
			& Y
		\end{tikzcd}
	\]
	is a cartesian square.
\end{lemma}
\begin{proof}
	Suppose that
	\[
		\begin{tikzcd}
			& Z
			\ar[r, "g"]
			\ar[d, "h"]
			& Y
			\ar[d, "\id_Y"] \\
			& X
			\ar[r, "f"]
			& Y
		\end{tikzcd}
	\]
	is a commutative diagram. Then
	\[
		\begin{tikzcd}
			Z
			\ar[rd, "\exists! h"]
			\ar[rrd, bend left=30, "g"]
			\ar[rdd, bend right=30, "h"]
			\\
			& X
			\ar[r, "f"]
			\ar[d, "\id_X"]
			& Y
			\ar[d, "\id_Y"] \\
			& X
			\ar[r, "f"]
			& Y
		\end{tikzcd}
	\]
	is a commutative diagram, and the morphism $h : Z \to X$ is the only morphism making the
	diagram commute as it's the only morphism which is equal to $h$ after being postcomposed by
	$\id_X$.
\end{proof}

\begin{lemma}
	If a category contains objects and morphisms according to
	\[
		\begin{tikzcd}
			&
			&
			A
			\ar[d, "a"] \\
			&
			B
			\ar[r, "b_{1}"]
			\ar[d, "b_{2}"]
			& X \\
			C
			\ar[r, "c"]
			& Y
		\end{tikzcd}
	\]
	and the requisite pullbacks exist, there is a unique isomorphism $A
		\times_X (B \times_Y C) \cong (A \times_X B) \times_Y C$.
\end{lemma}
\begin{proof}
	Both objects are the limit of the given diagram, hence uniquely isomorphic.
\end{proof}

Now consider the diagram
\[
	\begin{tikzcd}
		& X \times_Y Y \times_S Y'
		\ar[r, ""]
		\ar[d, ""]
		& Y \times_S Y'
		\ar[r, ""]
		\ar[d, ""]
		& Y'
		\ar[d, ""] \\
		& X
		\ar[r, ""]
		& Y
		\ar[r, ""]
		& S
	\end{tikzcd}
\]
As $X \to Y$ has $P$, so does the map $X \times_Y Y \times_S Y' = X \times_S Y' \to Y \times_S Y'$.
Similarly, the map $X' \times_S Y \to Y \times_S Y'$ also has $P$. Now we get a cartesian square
\[
	\begin{tikzcd}
		& X \times_S Y' \times_{Y \times_S Y'} X' \times_S Y
		\ar[r, ""]
		\ar[d, ""]
		& X' \times_S Y
		\ar[d, ""] \\
		& X \times_S Y'
		\ar[r, ""]
		& Y \times_S Y'
	\end{tikzcd}
\]
where all maps have $P$. But
\begin{align*}
	X \times_S Y' \times_{Y \times_S Y'} X' \times_S Y
	 & =
	X \times_S X' \times_{Y \times_S Y'} Y' \times_S Y \\
	 & =
	X \times_S X'.
\end{align*}
Hence the composition of either paths in the square above is the map given by the
product, we are done.

\subsection*{Ex 8.1.B}

Properties (1) and (3) are immediate, we verify (2) below. Suppose that $\pi :
	X \to Y$ is an isomorphism and that $\tau : Y \to Y'$ is a map.
We get a cartesian square
\[
	\begin{tikzcd}
		& X \times_{Y} Y'
		\ar[r, "p_Y"]
		\ar[d, "p_X"]
		& Y'
		\ar[d, "\tau"] \\
		& X
		\ar[r, "\pi"]
		& Y.
	\end{tikzcd}
\]
But we also have the commutative diagram
\[
	\begin{tikzcd}
		& Y'
		\ar[r, "\id_Y'"]
		\ar[d, "\pi^{-1} \circ \tau"]
		& Y'
		\ar[d, "\tau"] \\
		& X
		\ar[r, "\pi"]
		& Y,
	\end{tikzcd}
\]
hence there is a unique morphism $h : Y' \to X \times_Y Y'$ factoring the diagram

\[
	\begin{tikzcd}
		Y'
		\ar[dr, dotted, "\exists! h"]
		\ar[drr, "\id_{Y'}", bend left=30]
		\ar[ddr, "\pi^{-1} \circ \tau", bend right=30, swap=true]
		\\
		& X \times_{Y} Y'
		\ar[r, "p_{Y'}"]
		\ar[d, "p_X"]
		& Y'
		\ar[d, "\tau"] \\
		& X
		\ar[r, "\pi"]
		& Y
	\end{tikzcd}
\]
So $\id_{Y'} = p_{Y'} \circ h$. Now consider the diagram
\[
	\begin{tikzcd}
		X \times_Y Y'
		\ar[dr, "p_{Y'}"]
		\ar[ddrrr, "p_{Y'}", bend left=30]
		\ar[dddrr, "p_X", bend right=30, swap=true]
		\\
		& Y'
		\ar[dr, "h"]
		\\
		&& X \times_{Y} Y'
		\ar[r, "p_{Y'}"]
		\ar[d, "p_X"]
		& Y'
		\ar[d, "\tau"] \\
		&& X
		\ar[r, "\pi"]
		& Y
	\end{tikzcd}
\]
This is a commutative diagram since indeed
\[
	p_{Y'} \circ h \circ p_{Y'} = \id_{Y'} \circ p_{Y'} = p_{Y'},
\]
and
\[
	p_X \circ h \circ p_{Y'}
	=
	\pi^{-1} \circ \tau \circ p_{Y'}
	=
	p_X.
\]
By the universal property of the fibered product there can only be one map
factoring $p_X$ and $p_Y$ this way, hence $h \circ p_{Y'} = \id_X$ and we are
done.

\subsection*{Ex 8.1.C}
\subsubsection*{(i)}

Suppose that $\pi : X \to Y$ and $\tau : Y \to Z$ are open immersions which
factor as
\[
	(X, \mathcal{O}_X) \cong (U, \mathcal{O}_{Y \vert U}) \hookrightarrow (Y, \mathcal{O}_Y),
\]
and
\[
	(Y, \mathcal{O}_Y) \cong (V, \mathcal{O}_{Z \vert V}) \hookrightarrow (Z, \mathcal{O}_Z)
\]
respectively. Then $(U, \mathcal{O}_{Y \vert U}) \cong (V \cap \tau(U),
	\mathcal{O}_{Z \vert V \cap \tau(U)})$ and $\tau \circ \pi$ factors as
\[
	(X, \mathcal{O}_X)
	\cong
	(U, \mathcal{O}_{Y \vert U})
	\cong
	(V \cap \tau(U), \mathcal{O}_{Z \vert V \cap \tau(U)})
	\hookrightarrow
	(Z, \mathcal{O}_Z)
\]
and the composition is indeed an open immersion.

\subsubsection*{(iii)}

For part (a), suppose that $\pi : X \to Y$ is an open immersion and that $V$ is
open in $Y$. Then $\pi$ factors as
\[
	(X, \mathcal{O}_X) \cong (U, \mathcal{O}_{Y \vert U}) \hookrightarrow (Y, \mathcal{O}_Y),
\]
and it's easy to see that $\restr{\pi}{\pi^{-1}(V)}$ factors as
\[
	(\pi^{-1}(V), \mathcal{O}_X) \cong (U \cap V, \mathcal{O}_{Y \vert U \cap
		V}) \hookrightarrow (V, \mathcal{O}_{Y \vert V}).
\]

Now for part (b), suppose that $\pi : X \to Y$ is a map which restricts to open
immersions on a cover $V_i$ of $Y$. Each $\pi_i = \restr{\pi}{\pi^{-1}(V_i)}$
factors as
\[
	(\pi^{-1}(V_i), \mathcal{O}_X) \cong (V_i \cap U_i, \mathcal{O}_{Y \vert
		U_i \cap V_i}) \hookrightarrow (V_i, \mathcal{O}_{Y \vert V_i}).
\]
The inclusions of the subschemes obviously glue to an inclusion $(U,
	\mathcal{O}_{Y \vert U}) \hookrightarrow (Y, \mathcal{O}_{Y}),$ where $U =
	\bigcup U_i$. Similarly, the isomorphisms $(\pi^{-1}(V_i), \mathcal{O}_X) \cong
	(V_i \cap U_i, \mathcal{O}_{Y \vert U_i \cap V_i})$ are determined by
$\restr{\pi}{\pi^{-1}(V_i \cap U_i)}$ at the level of points and by
$\restr{\pi^{\#}}{V_i \cap U_i}$ at the level of sections, and as $\pi$ is
globally defined, these all glue as well.

\subsection*{Ex 8.1.D}

We begin with a lemma about cartesian squares
\begin{lemma}
	Consider a diagram
	\[
		\begin{tikzcd}
			& A
			\ar[r, "a_{1}"]
			\ar[d, "a_{2}"]
			& B
			\ar[r, "b_{1}"]
			\ar[d, "b_{2}"]
			& C
			\ar[d, "c"] \\
			& D
			\ar[r, "d"]
			& E
			\ar[r, "e"]
			& F,
		\end{tikzcd}
	\]
	and suppose that the outer and rightmost square are cartesian. Then the
	leftmost square is cartesian as well.
\end{lemma}
\begin{proof}
	Let $P$ be an object with morphisms making the following diagram commute
	\[
		\begin{tikzcd}
			P
			\ar[drr, "p_{1}", bend left=20]
			\ar[ddr, "p_{2}", bend right=20] \\
			& A
			\ar[r, "a_{1}"]
			\ar[d, "a_{2}"]
			& B
			\ar[r, "b_{1}"]
			\ar[d, "b_{2}"]
			& C
			\ar[d, "c"] \\
			& D
			\ar[r, "d"]
			& E
			\ar[r, "e"]
			& F,
		\end{tikzcd}
	\]
	Then as $A$ is the pullback of $C \rightarrow F \leftarrow D$, we get a unique map $h : P \to A$
	making the following diagram commute
	\[
		\begin{tikzcd}
			P
			\ar[dr, dotted, "\exists! h"]
			\ar[drrr, bend left=20, "b_{1} \circ p_{1}"]
			\ar[ddr, bend right=20, "p_{2}"] \\
			& A
			\ar[rr, "b_{1} \circ a_{1}"]
			\ar[d, "a_{2}"]
			&
			& C
			\ar[d, "c"] \\
			& D
			\ar[rr, "e \circ d"]
			&
			& F.
		\end{tikzcd}
	\]
	If we now examine the diagram (which we've not yet shown is commutative)
	\[
		\begin{tikzcd}
			P
			\ar[dr, "h"]
			\ar[drr, "p_{1}", bend left=20]
			\ar[ddr, "p_{2}", bend right=20] \\
			& A
			\ar[r, "a_{1}"]
			\ar[d, "a_{2}"]
			& B
			\ar[r, "b_{1}"]
			\ar[d, "b_{2}"]
			& C
			\ar[d, "c"] \\
			& D
			\ar[r, "d"]
			& E
			\ar[r, "e"]
			& F,
		\end{tikzcd}
	\]
	We have that both
	\[
		cb_{1}p_{1} = e b_{2} p_{1}
	\]
	and
	\[
		c_{1} b_{1} a_{1} h = e b_{2} a_{1} h
	\]
	by the commutativity of the leftmost square. But we also
	have
	\[
		cb_{1}p_{1} = c b_{1} a_{1} h
	\]
	by how we obtained $h$, and it follows that
	\[
		cb_{1}p_{1} = e b_{2} p_{1}
		=
		c_{1} b_{1} a_{1} h = e b_{2} a_{1} h.
	\]
	By the universal property of $B$ and the fact that there
	is a unique morphism factoring
	\[
		\begin{tikzcd}
			& P
			\ar[r, ""]
			\ar[d, ""]
			& C
			\ar[d, ""] \\
			& E
			\ar[r, ""]
			& F
		\end{tikzcd}
	\]
	through $B$, it follows that $p_{1} = a_{1} h$. Hence the square diagram is
	commutative and as there can only be one morphism $P \to A$ making the
	diagram commute (by the universal property of $A$), we see that the
	leftmost square is cartesian as well.
\end{proof}

Let $i : U \to Z$ be an open embedding which factors as $U \cong V
	\hookrightarrow Z$ for some open $V \subset Z$, and $\rho : Y \to Z$ be any
morphism. We have a commutative diagram
\[
	\begin{tikzcd}
		& U \times_Z Y
		\ar[rr, "p_Y"]
		\ar[d, "p_U"]
		&
		&
		Y
		\ar[d, "\rho"] \\
		& U
		\ar[r, "\phi"]
		& V
		\ar[r, "\iota"]
		& Z.
	\end{tikzcd}
\]
Then the universal property of $V \times_Z Y$ gives a commutative diagram
\[
	\begin{tikzcd}
		& U \times_Z Y
		\ar[rr, "p_Y", bend left=30]
		\ar[r, "\exists ! h", dotted]
		\ar[d, "p_U"]
		&
		V \times_Z Y
		\ar[r, "p_Y"]
		\ar[d, "p_V"]
		&
		Y
		\ar[d, "\rho"] \\
		& U
		\ar[r, "\phi"]
		& V
		\ar[r, "\iota"]
		& Z.
	\end{tikzcd}
\]
As both the outer and rightmost squares are cartesian, so is the leftmost
square. Moreover, as $\phi$ is an isomorphism so is $h$ (by the previous
exercise). It remains to show that $p_Y$ is an open immersion. To do this, we
will show that
\[
	\begin{tikzcd}
		& (\rho^{-1}(V), \mathcal{O}_{Y \vert \rho^{-1}(V)})
		\ar[r, ""]
		\ar[d, "\rho"]
		& (Y, \mathcal{O}_{Y})
		\ar[d, "\rho"] \\
		& (V, \mathcal{O}_V)
		\ar[r, ""]
		& (Z, \mathcal{O}_Z)
	\end{tikzcd}
\]
is a cartesian square. Suppose that $X$ is a scheme with morphisms making then
following diagram commute
\[
	\begin{tikzcd}
		& (X, \mathcal{O}_X)
		\ar[r, "\pi"]
		\ar[d, "\tau"]
		& (Y, \mathcal{O}_{Y})
		\ar[d, "\rho"] \\
		& (V, \mathcal{O}_V)
		\ar[r, ""]
		& (Z, \mathcal{O}_Z).
	\end{tikzcd}
\]
We claim that $\pi(X) \subset \rho^{-1}(V)$ as sets. To see this, note that $V
	\subset Z$ is an inclusion of sets, and that $\tau(X)$ really is a subset of
$Z$. Moreover, as $\rho(\pi(X)) = \tau(X)$ we get
\[
	\pi(X)
	\subset
	\rho^{-1}(\rho(\pi(X)))
	=
	\rho^{-1}(\tau(X))
	\subset
	\rho^{-1}(V)
\]
It follows that $\pi$ really is a map
\[
	\pi : (X, \mathcal{O}_X) \to (\rho^{-1}(V), \mathcal{O}_{Y \vert \rho^{-1}(V)})
\]
and its the unique map making the following diagram commute
\[
	\begin{tikzcd}
		\pi(X)
		\ar[dr, "\pi"]
		\ar[drr, "\pi", bend left=30]
		\ar[ddr, "\tau", bend right=30] \\
		& (\rho^{-1}(V), \mathcal{O}_{Y \vert \rho^{-1}(V)})
		\ar[r, ""]
		\ar[d, "\rho"]
		& (Y, \mathcal{O}_{Y})
		\ar[d, "\rho"] \\
		& (V, \mathcal{O}_V)
		\ar[r, ""]
		& (Z, \mathcal{O}_Z).
	\end{tikzcd}
\]
As fibered products are unique up to isomorphism,
\[
	V \times_Z Y
	\cong
	(\rho^{-1}(V), \mathcal{O}_{Y \vert \rho^{-1}(V)})
\]
and we are done.

\subsection*{Ex 8.1.E}

As open embeddings are monomorphisms in the bigger category of ringed spaces,
it's immediate that they are monomorphisms in the category of schemes.

\subsection*{Ex 8.1.F}

As all these properties respect isomorphisms of schemes, we will assume that
$X$ is a subset of $Y$. \\

Let $\Spec(A_i), i \in I$ be a Noetherian affine cover of $Y$. Then $X_i = X
	\cap \Spec(A_i)$ is open in $\Spec(A_i)$ and hence admits a finite
distinguished affine cover $D(f_{i,j}), j \in J_i$, and each such distinguished
open set is Noetherian as well. The $D(f_{i, j}), i \in I, j \in J_i$ cover
$X$, and it's clear that this is a finite cover when $I$ is. \\

For a counterexample where $Y$ is quasicompact but $X$ isn't: Exercise 3.6.G.

\subsection*{Ex 8.1.G}

Let $A$ be a ring and $\phi^{\#} : A \to A \times A$ be the diagonal map $a
	\mapsto (a, a)$. This induces a map of schemes $\phi : \Spec(A) \coprod
	\Spec(A) \to \Spec(A)$. The source is covered by two copies of $\Spec(A)
	\hookrightarrow \Spec(A) \coprod \Spec(A)$, where the open embeddings
correspond to the ring maps $(a_{1}, a_{2}) \to a_{1}$ and $(a_{1}, a_{2}) \to
	a_{2}$,and at each such copy the composition is indeed an isomorphism. It clear
however that $\phi$ isn't an open embedding.

\subsection*{Ex 8.2.A}

We suppose that $B \subset A$. Let $a \in A$. Then in each $A_{b_i}$, we have
that $a$ satisfies some monic polynomial $F_i(X)$ with coefficients in
$A[1/b_i]$. By multiplying each $F_i$ with powers of $X$, we may suppose the
$F_i$ have the same degree. Let $k_i$ be the largest power of $b_i$ appearing
in a denominator of $F_i$, and let $G_i = b_i^{k_i} F_i$. The $G_i$ are no
longer monic polynomials, but they are polynomials killing $a$ of the same
degree, and each $G_i$ has leading coefficient $b_i^{k_i}$. As the $b_i$
generate the unit ideal in $B$, so do the $b_i^{k_i}$ and we have a partition
of unity
\[
	1 = \sum_{i = 1}^{n} c_i b_i^{k_i}
\]
with $c_i \in B$. It follows that
\[
	F = \sum_{i = 1}^{n} c_i G_i
\]
is a monic polynomial with coefficients in $B$ killing $a$, and we are done.


\subsection*{Ex 8.2.B}
\subsubsection*{(a)}

Suppose that $\phi : B \to A$ is integral, and that $T \subset B$
is a multiplicative subset. Let $a/\phi(t) \in \phi(T)^{-1}A$.
Then there is a monic polynomial $F \in \phi(B)[X]$ such that $F(a) = 0$.
Now let
\[
	G[X] = F(\phi(t)X)/\phi(t)^{\deg(F)} \in \phi(T^{-1}B)[X].
\]
Then $G$ is monic as well and
\[
	G(a/\phi(t))
	=
	F(a)/\phi(t)^{\deg(F)}
	=
	0
\]
so $\phi(T)^{-1}A$ is integral over $\phi(T^{-1}B)$. \\

Now let $J$ be an ideal of $B$, and $J'$ be the ideal of $A$ generated by
$\phi(J)$. Then the composition $B \to A \to A/J'$ vanishes on $J$ and induces
a morphism $\phi' : B/J \to A/J'$. Now let $a + J' \in A/J'$ and $F \in
	B[X]$ be a monic polynomial such that $\phi(F)(a) = 0$. Then
\[
	\phi'(F + J)(a + J')
	=
	(\phi(F) + J')(a + J')
	=
	\phi(F)(a) + J'
	=
	0
\]
and as $1 \not \in J$, $\phi(F + J)$ is a monic polynomial killing $a + J'$. \\

Integral morphisms compose, and as quotients are surjective, any composition $B
	\to A \to A/I$ is clearly integral. \\

Finally localizations need not be integral since for example $k[x] \subset
	k(x)$ isn't integral, no monic polynomial with coefficients in $k[x]$ kills
$x^{-1}$.


\subsubsection*{(b)}

Quotients aren't subsets.

\subsubsection*{(c)}

Exactly the hint

\subsection*{Ex 8.2.C}

A finite generating set for $C$ as an $A$-module is given by pairs $b_ic_j$
where $c_j$ is a finite generating set of $C$ as a $B$-module, and $b_i$ is a
finite generating set form $B$ as an $A$-moduls

\subsection*{Ex 8.2.D}

If $a_{1}, a_{2}$ are integral over $\phi$, the algebras $\phi(B)[a_{1}],
	\phi(B)[a_{2}]$ are finite over $\phi$, but then $\phi(B)[a_{1}, a_{2}]$ is
finite over $\phi(B)[a_{1}]$ (with the same basis as $\phi(B)[a_{2}]$ over
	$\phi(B)$), hence finite over $\phi$, whence $a_{1} + a_{2}, a_{1}a_{2}$ are
	integral over $\phi$.

	\subsection*{Ex 8.2.E}

	Let $b \in B$ be a nonzero element. Then $b^{-1} \in A$ satisfies
	a monic polynomial
	\[
		X^{d} + b_{d - 1} X^{d - 1} + \ldots b_{0} \in B[X].
	\]
	But then
	\begin{align*}
		0
		 & =
		b^{-d} + b_{d - 1} b^{-d + 1} + \ldots b_{0}            \\
		 & =
		b^{d - 1}(b^{-d} + b_{d - 1} b^{-d + 1} + \ldots b_{0}) \\
		 & =
		b^{-1} + b_{d - 1} b^{0} + \ldots b_{0}b^{d - 1}        \\
	\end{align*}
	and
	\[
		b^{-1}
		=
		- b_{d - 1} b^{0} - \ldots b_{0}b^{d - 1}
		\in B.
	\]

	\subsection*{Ex 8.3.A}

	Let $X \xrightarrow{f} Y \xrightarrow{g} Z$ be maps of schemes and $f, g$ be
	quasicompact morphisms. Then let $\Spec(A) \subset Z$. Then $f^{-1}(g)$ has a
	finite affine cover $\Spec(B_i)$ and each $g^{-1}(\Spec(B_i))$ has a finite
	affine cover $\Spec(C_{i, j})$. The $\Spec(C_{i, j})$ is a finite affine cover
	of $(g \circ f)^{-1}(\Spec(A))$ and $g \circ f$ is quasicompact by Exercise
	3.6.H (a) and (b).

	\subsection*{Ex 8.3.B}

	\subsubsection*{(a)}

	Let $X$ be a Noetherian scheme. By Exercise 5.1.C, $X$ is a Noetherian space,
	whence Exercise 3.6.U gives us that every open subset of $X$ is quasicompact.
	Hence any morphism $f: X \to Y$ is necessarily quasicompact since $f^{-1}(U)$
	is quasicompact for all $U$ open in $Y$.

	\subsubsection*{(b)}

	If $X$ is a quasiseparated scheme and $U \subset X$ is open, any two
	quasicompact subsets of $U$ are indeed quasicompact subset of $X$, hence there
	intersection is as well and $U$ is quasiseparated. The rest of the exercise
	follows as in part (a).


	\subsection*{Ex 8.3.C}

	\subsubsection*{(a)}

	Let $P$ be the property of affine open sets $U = \Spec(A) \subset Y$ that
$\pi^{-1}(U)$ is quasicompact. We will verify that $P$ satisfies the Affine
	Communication Lemma, after which the statement of the exercise immediately
	follows. We will make use of the fact that a scheme is quasicompact if and only
	if it admits a finite affine open cover (Exercise 3.6.G.(a) \& 3.6.H.(a)). \\

	\textbf{Property (i): } Suppose that $\Spec(A) \subset Y$ is an affine open set
	of $Y$ such that $V = \pi^{-1}(\Spec(A))$ is quasicompact. Let $\Spec(B_i), i
\in [1..m]$ be an affine open cover of $V$. Then let $f \in A$ and consider
$\pi^{-1}(\Spec(A_f))$. By Exercise 7.3.A, the non-vanishing locus of $g$ in
$V$ is given by $V_g = \pi^{-1}(\Spec(A_f))$. Hence $V_g$ is covered by the
$\Spec((B_i)_g)$ and we are done. \\

	\textbf{Property (ii): } Let $A, f_i$ be as in the Affine Communication Lemma,
	and suppose that each $V_i = \pi^{-1}(\Spec(A_{f_i}))$ has a finite affine
	cover $\Spec(B_{i, j})$. Then as the $V_i$ cover $V = \pi^{-1}(\Spec(A))$, it
	follows that the $\Spec(B_{i, j})$ for a finite affine open cover of $V$ and
$V$ is quasicompact.

	\subsubsection*{(b)}

	We proceed as in part (a) by verifying the conditions of the Affine
	Communication Lemma. We will make use of the characterization of
	quasiseparatedness given in Exercise 5.1.H. \\

	\textbf{Property (i): } Suppose that $\Spec(A) \subset Y$ is an affine open set
	of $Y$ such that $V = \pi^{-1}(\Spec(A))$ is quasiseparated. Let $U_i =
\Spec(B_i), i \in I$ be an affine open cover of $V$ such that every
	intersection $\Spec(B_i) \cap \Spec(B_j)$ admits a finite cover by affine opens
$\Spec(C_{i, j, k}), k \in K_{i, j}$. Then let $f \in A$ and consider
$\pi^{-1}(\Spec(A_f))$. By Exercise 7.3.A, the non-vanishing locus of $g$ in
$V$ is given by $V_g = \pi^{-1}(\Spec(A_f))$. Hence $V_g$ is covered by the
$\Spec((B_i)_g)$, where the intersections are covered by
	\[
		\Spec((B_i)_g)
		\cap
		\Spec((B_j)_g)
		=
		\bigcup_{k \in K_{i, j}}
		\Spec((C_{i, j, k})_g)
	\]
	and we are done. \\

	\textbf{Property (ii): } Let $A, f_i$ be as in the Affine Communication Lemma,
	and suppose that each $V_i = \pi^{-1}(\Spec(A_{f_i}))$ has an affine cover
$\Spec(B_{i, j})$ where each intersection admits a finite cover by affine open
	subsets. Then as the $V_i$ cover $V = \pi^{-1}(\Spec(A))$, it follows that the
$\Spec(B_{i, j})$ form an affine open cover of $V$ and $V$ is quasiseparated.


\subsection*{Ex 8.3.D}

Affine schemes are both quasicompact and quasiseparated (Exercise 3.6.G.(a) \&
5.1.G) and the statement follows immediately.

\subsection*{Ex 8.3.E}

Let $U = \Spec(A) \setminus Z$. Then the open immersion $U \hookrightarrow
\Spec(A)$ is affine on the given cover where $Z$ is locally cut out by one
equation, hence $U$ is affine (being the preimage of the affine open set
$\Spec(A)$ under the immersion).

\subsection*{Ex 8.3.F}

We verify the two conditions of the Affine Communication Lemma for the property
of affine open sets $\Spec(A) \subset Y$ having preimages $\Spec(B) =
\pi^{-1}(\Spec(A))$ with $B$ a finite $A$-module. \\

\textbf{Property (i): }
Let $\Spec(A)$ be an affine open subset of $Y$ such that $\pi^{-1}(\Spec(A)) =
\Spec(B)$ and $B$ is a finite $A$-module. Let $f \in A$ and $g = \pi^{\#}(f)$.
Then $\pi^{-1}(D(f)) = D(g)$ by Exercise 7.3.A, whence $\Gamma(D(g), \osp{B}) =
B_g$ and $\pi^{\#}$ restricts to a morphism $\restr{\pi^{\#}}{D(f)} : A_f \to
B_g$. If $b_i, i \in [1..n]$ is a generating set of $B$ as an $A$-module, it's
immediate that $1 \otimes b_i, i \in [1..n]$ is a generating set of $A_f
\otimes_f B \cong B_f$ as an $A_f$-module. \\

\textbf{Property (ii): }
Suppose that $\Spec(A)$ is an affine open subset covered by affine opens
$\Spec(A_{f_i}), i \in [1..n]$ where $\pi^{-1}(\Spec(A_{f_i})) = \Spec(B_i)$
are such that the $B_i$ are finite $A_i$-modules. From Proposition 8.3.4 that
$\pi^{-1}(\Spec(A))$ is affine and we denote it by $\Spec(B)$. As above, if we
let $g_i = \pi^{\#}(f_i)$ it follows that $\pi^{-1}(D(f_i)) = D(g_i)$ and we
see that $B_i = B_{g_i}$. \\ 

Now, let $b_{i, j}/g_i^{k_i}, j \in J_i$ be a finite generating set of
$B_{g_i}$ as an $A_{f_i}$-module. As $f_i, 1/f_i \in A$ acts on $B_{g_i}$ by
multiplication by $g_i, 1/g_i$, it follows that $b_{i, j}/1, j \in J_i$ is
another generating set of $B_{g_i}$ as an $A_{f_i}$-module. We claim that all
of the $b_{i, j}, i \in [1..n], j \in J_i$ generates $B$ as an $A$-module. To see this,
let $b \in B$. Then for each $i \in [1..n]$ we can write 
\[
    b = \sum_{j \in J_i} \frac{a_{i, j}}{f_{i}^{r_{i, j}}} \cdot b_{i, j},
\]
and letting $M$ be the largest of all exponents $r_{i, j}$ we have a partition
of unity in $A$
\[
    1 = \sum_{i = 1}^{n} c_i f_i^{M},
\]
and we get
\begin{align*}
    b
    &=
    \left(\sum_{i = 1}^{n} c_i f_i^{M}\right)
    \cdot 
    b \\
    &=
    \sum_{i = 1}^{n} \left(c_i f_i^{M} \cdot b\right) \\
    &=
    \sum_{i = 1}^{n} \left(
        c_i f_i^{M} 
        \cdot 
        \sum_{j \in J_i} \frac{a_{i, j}}{f_{i}^{r_{i, j}}} \cdot b_{i, j}
    \right) \\
    &=
    \sum_{i = 1}^{n} \left(
        \sum_{j \in J_i} c_i a_{i, j}f_{i}^{M - r_{i, j}} \cdot b_{i, j}
    \right) 
\end{align*}
and we are done.


\subsection*{Ex 8.3.G}

Any finite morphism $\pi : X \to \Spec(k)$ is affine by definition so $X =
\Spec(A)$. Then $A$ is a $k$-algebra which is finite dimensional as a
$k$-space. As ideals are subspaces, $A$ satisfies the d.c.c and is therefore
Artinian, hence a finite product of Artin local rings by the Structure Theorem
for Artin Rings (I suppose this might be the fancy theorem we were not supposed
to use..?)
\[
    A
    =
    \bigtimes_{i = 1}^{n} A_i
\]
with maximal ideals $\mathfrak{m}_i$. Thus
\[
    \Spec(A)
    =
    \coprod_{i = 1}^{n} \Spec(A_i)
\]
and the spectra of Artin local rings are indeed points, as Artin rings are
$0$-dimensional. Moreover, as $A$ is a finite dimensional as a $k$-space, so
must each $A_i$ be, hence also $A_i/\mathfrak{m}_i$.

\subsection*{Ex 8.3.H}

Let $X \xrightarrow{f} Y \xrightarrow{g} Z$ be integral morphisms. We want to
show that $h = g \circ f$ is finite, and by Exercise 8.3.E, it suffices to do
so on an affine cover $\Spec(A_i),i \in I$ of $Z$. As finite morphisms are
affine, we get affine covers $\Spec(B_i) = g^{-1}(\Spec(A_i))$ and $\Spec(C_i)
= f^{-1}(\Spec(B_i))$ of $Y$ and $X$ respectively. Then $h$ restricts to a
finite morphism on each $\Spec(C_i)$ by Exercise 8.2.C and Lemma 8.2.1 and we
are done.

\subsection*{Ex 8.3.I}

We begin by describing the isomorphism $\phi : \Proj\ S_{\bullet} \to \Spec\
A$. Let $f \in A$ and $f_1$ be the copy of $f$ in $S_{1} = A$ which lies in the
first degree of $S_{\bullet}$. Then the elements of
$((S_{\bullet})_{f_{1}})_{0}$ are of the form $g/f^{k}$ with $g \in S_{k} = A$.
These are exactly elements of $A_{f}$ and we get an isomorphism
$((S_{\bullet})_f)_{0} \to A_f$ which clearly glues on overlaps, and in turn an
isomorphism $\phi : \Proj\ S_{\bullet} \to \Spec\ A$. \\ 

Moreover, if $A$ is generated by $a_{1}, \ldots, a_n$ as an $R$-module, it
follows that $S_{1}$ is generated by $a_{1}, \ldots, a_n$ as an
$S_{0}=R$-module, I.e ideal, and we can obtain $S_{k}$ by multiplying with
$1_1^{k}$ where $1_1 \in S_{1}$ is the copy of $1 \in A$ in the first degree of
$S_{\bullet}$.

\subsection*{Ex 8.3.J}

Let $\pi : X \to Y$ be a finite morphism of schemes. Given $p \in Y$, let
$\Spec(A)$ be an affine neighborhood of $p$ and $\Spec(B) = \pi^{-1}(\Spec(A))$
(the preimage of $\Spec(A)$ is affine since finite morphisms are affine). Then
$\pi^{-1}(p) \in \Spec(B)$ and we've reduced the exercise to showing that
finite maps of affine schemes $\pi : \Spec(B) \to \Spec(A)$ have finite fibers.
So, let $\mathfrak{p} \in \Spec(A)$. Prime ideals of $\mathfrak{q} \in
\pi^{-1}(\mathfrak{p})$ are exactly the prime ideals $\mathfrak{q} \in
\Spec(B)$ such that $(\pi^{\#})^{-1}(\mathfrak{q}) = \mathfrak{p}$, which in
turn are exactly the prime ideals $\mathfrak{q} \in \Spec(B)$ which don't meet
the multiplicative subset $S = \pi^{\#}(A \setminus \mathfrak{p})$ whilst still
containing $\pi^{\#}(\mathfrak{p})$. I.e, we have a bijection of sets
\[
    \pi^{-1}(\mathfrak{p}) \cong \Spec\ \kappa(\mathfrak{p}) \otimes_{A} B.
\]
As $B$ is a finite $A$-module, it follows that $\kappa(\mathfrak{p})
\otimes_{A} B$ is a finite $\kappa(\mathfrak{p})$-space, hence Artinian as a
ring and $\Spec\ \kappa(\mathfrak{p}) \otimes_{A} B$ must be a finite set.

\subsection*{Ex 8.3.K}

The corresponding ring map is given by the localization map $\C[x] \to
\C[x]_{x}$, and $1/x$ is not integral over $\C[x]$ as shown in Exercise
8.2.B.(a).

\subsection*{Ex 8.3.L}

We begin with the affine case. Suppose that $\pi : X \to \Spec(A)$ is an
integral morphism. Then $X = \Spec(B)$ as integral morphisms are affine, and we
let $\phi : A \to B$ be given by $\pi^{\#}$ (to simplify notation). \\

Let $V(I) \subset \Spec(B)$ be a closed subset and $J = \phi^{-1}(I)$. We get
an induced monomorphism $\phi : A/J \hookrightarrow B/I$, which is integral by
Exercise 8.2.B.(a). It then follows by lying over that there exists primes in
$B/I$ lying over every prime of $A/J$. I.e, for every prime of $\mathfrak{p}
\in \mathfrak{q} \in \Spec(B)$ containing $I$, there is a prime in $\Spec(A)$
containing $J$ such that $\mathfrak{p} = \phi^{-1}(\mathfrak{q})$, and we've
verified that $\pi(V(I)) = \phi^{-1}(V(I)) = V(J)$ is closed and we are done
with the affine case. \\

Suppose now that $\pi : X \to Y$ is an integral morphism of arbitrary schemes.
Then $\pi$ is closed affine-locally on the target, hence closed by Exercise
9.1.D.

\subsection*{Ex 8.3.M}

\end{document}
